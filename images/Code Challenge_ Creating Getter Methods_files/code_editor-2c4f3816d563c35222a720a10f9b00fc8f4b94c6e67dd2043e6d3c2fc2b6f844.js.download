!function(e, t) {
  "object" == typeof exports && "undefined" != typeof module ? module.exports = t() : "function" == typeof define && define.amd ? define(t) : (e = e || self).CodeMirror = t();
}(this, function() {
  "use strict";
  function e(e) {
    return new RegExp("(^|\\s)" + e + "(?:$|\\s)\\s*");
  }
  function t(e) {
    for (var t = e.childNodes.length; t > 0; --t) e.removeChild(e.firstChild);
    return e;
  }
  function r(e, r) {
    return t(e).appendChild(r);
  }
  function n(e, t, r, n) {
    var i = document.createElement(e);
    if (r && (i.className = r), n && (i.style.cssText = n), "string" == typeof t) i.appendChild(document.createTextNode(t)); else if (t) for (var o = 0; o < t.length; ++o) i.appendChild(t[o]);
    return i;
  }
  function i(e, t, r, i) {
    var o = n(e, t, r, i);
    return o.setAttribute("role", "presentation"), o;
  }
  function o(e, t) {
    if (3 == t.nodeType && (t = t.parentNode), e.contains) return e.contains(t);
    do {
      if (11 == t.nodeType && (t = t.host), t == e) return !0;
    } while (t = t.parentNode);
  }
  function a() {
    var e;
    try {
      e = document.activeElement;
    } catch ($a) {
      e = document.body || null;
    }
    for (;e && e.shadowRoot && e.shadowRoot.activeElement; ) e = e.shadowRoot.activeElement;
    return e;
  }
  function l(t, r) {
    var n = t.className;
    e(r).test(n) || (t.className += (n ? " " : "") + r);
  }
  function s(t, r) {
    for (var n = t.split(" "), i = 0; i < n.length; i++) n[i] && !e(n[i]).test(r) && (r += " " + n[i]);
    return r;
  }
  function c(e) {
    var t = Array.prototype.slice.call(arguments, 1);
    return function() {
      return e.apply(null, t);
    };
  }
  function u(e, t, r) {
    for (var n in t || (t = {}), e) !e.hasOwnProperty(n) || !1 === r && t.hasOwnProperty(n) || (t[n] = e[n]);
    return t;
  }
  function d(e, t, r, n, i) {
    null == t && -1 == (t = e.search(/[^\s\u00a0]/)) && (t = e.length);
    for (var o = n || 0, a = i || 0; ;) {
      var l = e.indexOf("\t", o);
      if (l < 0 || l >= t) return a + (t - o);
      a += l - o, a += r - a % r, o = l + 1;
    }
  }
  function f(e, t) {
    for (var r = 0; r < e.length; ++r) if (e[r] == t) return r;
    return -1;
  }
  function p(e, t, r) {
    for (var n = 0, i = 0; ;) {
      var o = e.indexOf("\t", n);
      -1 == o && (o = e.length);
      var a = o - n;
      if (o == e.length || i + a >= t) return n + Math.min(a, t - i);
      if (i += o - n, n = o + 1, (i += r - i % r) >= t) return n;
    }
  }
  function h(e) {
    for (;Qa.length <= e; ) Qa.push(m(Qa) + " ");
    return Qa[e];
  }
  function m(e) {
    return e[e.length - 1];
  }
  function g(e, t) {
    for (var r = [], n = 0; n < e.length; n++) r[n] = t(e[n], n);
    return r;
  }
  function v(e, t, r) {
    for (var n = 0, i = r(t); n < e.length && r(e[n]) <= i; ) n++;
    e.splice(n, 0, t);
  }
  function y() {}
  function b(e, t) {
    var r;
    return Object.create ? r = Object.create(e) : (y.prototype = e, r = new y()), t && u(t, r), 
    r;
  }
  function x(e) {
    return /\w/.test(e) || e > "\x80" && (e.toUpperCase() != e.toLowerCase() || Ja.test(e));
  }
  function w(e, t) {
    return t ? !!(t.source.indexOf("\\w") > -1 && x(e)) || t.test(e) : x(e);
  }
  function k(e) {
    for (var t in e) if (e.hasOwnProperty(t) && e[t]) return !1;
    return !0;
  }
  function _(e) {
    return e.charCodeAt(0) >= 768 && el.test(e);
  }
  function C(e, t, r) {
    for (;(r < 0 ? t > 0 : t < e.length) && _(e.charAt(t)); ) t += r;
    return t;
  }
  function S(e, t, r) {
    for (var n = t > r ? -1 : 1; ;) {
      if (t == r) return t;
      var i = (t + r) / 2, o = n < 0 ? Math.ceil(i) : Math.floor(i);
      if (o == t) return e(o) ? t : r;
      e(o) ? r = o : t = o + n;
    }
  }
  function T(e, t, r, n) {
    if (!e) return n(t, r, "ltr", 0);
    for (var i = !1, o = 0; o < e.length; ++o) {
      var a = e[o];
      (a.from < r && a.to > t || t == r && a.to == t) && (n(Math.max(a.from, t), Math.min(a.to, r), 1 == a.level ? "rtl" : "ltr", o), 
      i = !0);
    }
    i || n(t, r, "ltr");
  }
  function M(e, t, r) {
    var n;
    tl = null;
    for (var i = 0; i < e.length; ++i) {
      var o = e[i];
      if (o.from < t && o.to > t) return i;
      o.to == t && (o.from != o.to && "before" == r ? n = i : tl = i), o.from == t && (o.from != o.to && "before" != r ? n = i : tl = i);
    }
    return null != n ? n : tl;
  }
  function L(e, t) {
    var r = e.order;
    return null == r && (r = e.order = rl(e.text, t)), r;
  }
  function N(e, t) {
    return e._handlers && e._handlers[t] || nl;
  }
  function A(e, t, r) {
    if (e.removeEventListener) e.removeEventListener(t, r, !1); else if (e.detachEvent) e.detachEvent("on" + t, r); else {
      var n = e._handlers, i = n && n[t];
      if (i) {
        var o = f(i, r);
        o > -1 && (n[t] = i.slice(0, o).concat(i.slice(o + 1)));
      }
    }
  }
  function z(e, t) {
    var r = N(e, t);
    if (r.length) for (var n = Array.prototype.slice.call(arguments, 2), i = 0; i < r.length; ++i) r[i].apply(null, n);
  }
  function O(e, t, r) {
    return "string" == typeof t && (t = {
      type: t,
      preventDefault: function() {
        this.defaultPrevented = !0;
      }
    }), z(e, r || t.type, e, t), q(t) || t.codemirrorIgnore;
  }
  function D(e) {
    var t = e._handlers && e._handlers.cursorActivity;
    if (t) for (var r = e.curOp.cursorActivityHandlers || (e.curOp.cursorActivityHandlers = []), n = 0; n < t.length; ++n) -1 == f(r, t[n]) && r.push(t[n]);
  }
  function E(e, t) {
    return N(e, t).length > 0;
  }
  function I(e) {
    e.prototype.on = function(e, t) {
      il(this, e, t);
    }, e.prototype.off = function(e, t) {
      A(this, e, t);
    };
  }
  function P(e) {
    e.preventDefault ? e.preventDefault() : e.returnValue = !1;
  }
  function W(e) {
    e.stopPropagation ? e.stopPropagation() : e.cancelBubble = !0;
  }
  function q(e) {
    return null != e.defaultPrevented ? e.defaultPrevented : 0 == e.returnValue;
  }
  function F(e) {
    P(e), W(e);
  }
  function R(e) {
    return e.target || e.srcElement;
  }
  function H(e) {
    var t = e.which;
    return null == t && (1 & e.button ? t = 1 : 2 & e.button ? t = 3 : 4 & e.button && (t = 2)), 
    Ea && e.ctrlKey && 1 == t && (t = 3), t;
  }
  function j(e) {
    if (null == Ua) {
      var t = n("span", "\u200b");
      r(e, n("span", [ t, document.createTextNode("x") ])), 0 != e.firstChild.offsetHeight && (Ua = t.offsetWidth <= 1 && t.offsetHeight > 2 && !(ka && _a < 8));
    }
    var i = Ua ? n("span", "\u200b") : n("span", "\xa0", null, "display: inline-block; width: 1px; margin-right: -1px");
    return i.setAttribute("cm-text", ""), i;
  }
  function B(e) {
    if (null != Ka) return Ka;
    var n = r(e, document.createTextNode("A\u062eA")), i = qa(n, 0, 1).getBoundingClientRect(), o = qa(n, 1, 2).getBoundingClientRect();
    return t(e), !(!i || i.left == i.right) && (Ka = o.right - i.right < 3);
  }
  function U(e) {
    if (null != cl) return cl;
    var t = r(e, n("span", "x")), i = t.getBoundingClientRect(), o = qa(t, 0, 1).getBoundingClientRect();
    return cl = Math.abs(i.left - o.left) > 1;
  }
  function K(e, t) {
    arguments.length > 2 && (t.dependencies = Array.prototype.slice.call(arguments, 2)), 
    ul[e] = t;
  }
  function $(e, t) {
    dl[e] = t;
  }
  function V(e) {
    if ("string" == typeof e && dl.hasOwnProperty(e)) e = dl[e]; else if (e && "string" == typeof e.name && dl.hasOwnProperty(e.name)) {
      var t = dl[e.name];
      "string" == typeof t && (t = {
        name: t
      }), (e = b(t, e)).name = t.name;
    } else {
      if ("string" == typeof e && /^[\w\-]+\/[\w\-]+\+xml$/.test(e)) return V("application/xml");
      if ("string" == typeof e && /^[\w\-]+\/[\w\-]+\+json$/.test(e)) return V("application/json");
    }
    return "string" == typeof e ? {
      name: e
    } : e || {
      name: "null"
    };
  }
  function G(e, t) {
    t = V(t);
    var r = ul[t.name];
    if (!r) return G(e, "text/plain");
    var n = r(e, t);
    if (fl.hasOwnProperty(t.name)) {
      var i = fl[t.name];
      for (var o in i) i.hasOwnProperty(o) && (n.hasOwnProperty(o) && (n["_" + o] = n[o]), 
      n[o] = i[o]);
    }
    if (n.name = t.name, t.helperType && (n.helperType = t.helperType), t.modeProps) for (var a in t.modeProps) n[a] = t.modeProps[a];
    return n;
  }
  function X(e, t) {
    u(t, fl.hasOwnProperty(e) ? fl[e] : fl[e] = {});
  }
  function Z(e, t) {
    if (!0 === t) return t;
    if (e.copyState) return e.copyState(t);
    var r = {};
    for (var n in t) {
      var i = t[n];
      i instanceof Array && (i = i.concat([])), r[n] = i;
    }
    return r;
  }
  function Y(e, t) {
    for (var r; e.innerMode && (r = e.innerMode(t)) && r.mode != e; ) t = r.state, e = r.mode;
    return r || {
      mode: e,
      state: t
    };
  }
  function Q(e, t, r) {
    return !e.startState || e.startState(t, r);
  }
  function J(e, t) {
    if ((t -= e.first) < 0 || t >= e.size) throw new Error("There is no line " + (t + e.first) + " in the document.");
    for (var r = e; !r.lines; ) for (var n = 0; ;++n) {
      var i = r.children[n], o = i.chunkSize();
      if (t < o) {
        r = i;
        break;
      }
      t -= o;
    }
    return r.lines[t];
  }
  function ee(e, t, r) {
    var n = [], i = t.line;
    return e.iter(t.line, r.line + 1, function(e) {
      var o = e.text;
      i == r.line && (o = o.slice(0, r.ch)), i == t.line && (o = o.slice(t.ch)), n.push(o), 
      ++i;
    }), n;
  }
  function te(e, t, r) {
    var n = [];
    return e.iter(t, r, function(e) {
      n.push(e.text);
    }), n;
  }
  function re(e, t) {
    var r = t - e.height;
    if (r) for (var n = e; n; n = n.parent) n.height += r;
  }
  function ne(e) {
    if (null == e.parent) return null;
    for (var t = e.parent, r = f(t.lines, e), n = t.parent; n; t = n, n = n.parent) for (var i = 0; n.children[i] != t; ++i) r += n.children[i].chunkSize();
    return r + t.first;
  }
  function ie(e, t) {
    var r = e.first;
    e: do {
      for (var n = 0; n < e.children.length; ++n) {
        var i = e.children[n], o = i.height;
        if (t < o) {
          e = i;
          continue e;
        }
        t -= o, r += i.chunkSize();
      }
      return r;
    } while (!e.lines);
    for (var a = 0; a < e.lines.length; ++a) {
      var l = e.lines[a].height;
      if (t < l) break;
      t -= l;
    }
    return r + a;
  }
  function oe(e, t) {
    return t >= e.first && t < e.first + e.size;
  }
  function ae(e, t) {
    return String(e.lineNumberFormatter(t + e.firstLineNumber));
  }
  function le(e, t, r) {
    if (void 0 === r && (r = null), !(this instanceof le)) return new le(e, t, r);
    this.line = e, this.ch = t, this.sticky = r;
  }
  function se(e, t) {
    return e.line - t.line || e.ch - t.ch;
  }
  function ce(e, t) {
    return e.sticky == t.sticky && 0 == se(e, t);
  }
  function ue(e) {
    return le(e.line, e.ch);
  }
  function de(e, t) {
    return se(e, t) < 0 ? t : e;
  }
  function fe(e, t) {
    return se(e, t) < 0 ? e : t;
  }
  function pe(e, t) {
    return Math.max(e.first, Math.min(t, e.first + e.size - 1));
  }
  function he(e, t) {
    if (t.line < e.first) return le(e.first, 0);
    var r = e.first + e.size - 1;
    return t.line > r ? le(r, J(e, r).text.length) : me(t, J(e, t.line).text.length);
  }
  function me(e, t) {
    var r = e.ch;
    return null == r || r > t ? le(e.line, t) : r < 0 ? le(e.line, 0) : e;
  }
  function ge(e, t) {
    for (var r = [], n = 0; n < t.length; n++) r[n] = he(e, t[n]);
    return r;
  }
  function ve(e, t, r, n) {
    var i = [ e.state.modeGen ], o = {};
    Se(e, t.text, e.doc.mode, r, function(e, t) {
      return i.push(e, t);
    }, o, n);
    for (var a = r.state, l = function(n) {
      r.baseTokens = i;
      var l = e.state.overlays[n], s = 1, c = 0;
      r.state = !0, Se(e, t.text, l.mode, r, function(e, t) {
        for (var r = s; c < e; ) {
          var n = i[s];
          n > e && i.splice(s, 1, e, i[s + 1], n), s += 2, c = Math.min(e, n);
        }
        if (t) if (l.opaque) i.splice(r, s - r, e, "overlay " + t), s = r + 2; else for (;r < s; r += 2) {
          var o = i[r + 1];
          i[r + 1] = (o ? o + " " : "") + "overlay " + t;
        }
      }, o), r.state = a, r.baseTokens = null, r.baseTokenPos = 1;
    }, s = 0; s < e.state.overlays.length; ++s) l(s);
    return {
      styles: i,
      classes: o.bgClass || o.textClass ? o : null
    };
  }
  function ye(e, t, r) {
    if (!t.styles || t.styles[0] != e.state.modeGen) {
      var n = be(e, ne(t)), i = t.text.length > e.options.maxHighlightLength && Z(e.doc.mode, n.state), o = ve(e, t, n);
      i && (n.state = i), t.stateAfter = n.save(!i), t.styles = o.styles, o.classes ? t.styleClasses = o.classes : t.styleClasses && (t.styleClasses = null), 
      r === e.doc.highlightFrontier && (e.doc.modeFrontier = Math.max(e.doc.modeFrontier, ++e.doc.highlightFrontier));
    }
    return t.styles;
  }
  function be(e, t, r) {
    var n = e.doc, i = e.display;
    if (!n.mode.startState) return new ml(n, !0, t);
    var o = Te(e, t, r), a = o > n.first && J(n, o - 1).stateAfter, l = a ? ml.fromSaved(n, a, o) : new ml(n, Q(n.mode), o);
    return n.iter(o, t, function(r) {
      xe(e, r.text, l);
      var n = l.line;
      r.stateAfter = n == t - 1 || n % 5 == 0 || n >= i.viewFrom && n < i.viewTo ? l.save() : null, 
      l.nextLine();
    }), r && (n.modeFrontier = l.line), l;
  }
  function xe(e, t, r, n) {
    var i = e.doc.mode, o = new pl(t, e.options.tabSize, r);
    for (o.start = o.pos = n || 0, "" == t && we(i, r.state); !o.eol(); ) ke(i, o, r.state), 
    o.start = o.pos;
  }
  function we(e, t) {
    if (e.blankLine) return e.blankLine(t);
    if (e.innerMode) {
      var r = Y(e, t);
      return r.mode.blankLine ? r.mode.blankLine(r.state) : void 0;
    }
  }
  function ke(e, t, r, n) {
    for (var i = 0; i < 10; i++) {
      n && (n[0] = Y(e, r).mode);
      var o = e.token(t, r);
      if (t.pos > t.start) return o;
    }
    throw new Error("Mode " + e.name + " failed to advance stream.");
  }
  function _e(e, t, r, n) {
    var i, o, a = e.doc, l = a.mode, s = J(a, (t = he(a, t)).line), c = be(e, t.line, r), u = new pl(s.text, e.options.tabSize, c);
    for (n && (o = []); (n || u.pos < t.ch) && !u.eol(); ) u.start = u.pos, i = ke(l, u, c.state), 
    n && o.push(new gl(u, i, Z(a.mode, c.state)));
    return n ? o : new gl(u, i, c.state);
  }
  function Ce(e, t) {
    if (e) for (;;) {
      var r = e.match(/(?:^|\s+)line-(background-)?(\S+)/);
      if (!r) break;
      e = e.slice(0, r.index) + e.slice(r.index + r[0].length);
      var n = r[1] ? "bgClass" : "textClass";
      null == t[n] ? t[n] = r[2] : new RegExp("(?:^|\\s)" + r[2] + "(?:$|\\s)").test(t[n]) || (t[n] += " " + r[2]);
    }
    return e;
  }
  function Se(e, t, r, n, i, o, a) {
    var l = r.flattenSpans;
    null == l && (l = e.options.flattenSpans);
    var s, c = 0, u = null, d = new pl(t, e.options.tabSize, n), f = e.options.addModeClass && [ null ];
    for ("" == t && Ce(we(r, n.state), o); !d.eol(); ) {
      if (d.pos > e.options.maxHighlightLength ? (l = !1, a && xe(e, t, n, d.pos), d.pos = t.length, 
      s = null) : s = Ce(ke(r, d, n.state, f), o), f) {
        var p = f[0].name;
        p && (s = "m-" + (s ? p + " " + s : p));
      }
      if (!l || u != s) {
        for (;c < d.start; ) i(c = Math.min(d.start, c + 5e3), u);
        u = s;
      }
      d.start = d.pos;
    }
    for (;c < d.pos; ) {
      var h = Math.min(d.pos, c + 5e3);
      i(h, u), c = h;
    }
  }
  function Te(e, t, r) {
    for (var n, i, o = e.doc, a = r ? -1 : t - (e.doc.mode.innerMode ? 1e3 : 100), l = t; l > a; --l) {
      if (l <= o.first) return o.first;
      var s = J(o, l - 1), c = s.stateAfter;
      if (c && (!r || l + (c instanceof hl ? c.lookAhead : 0) <= o.modeFrontier)) return l;
      var u = d(s.text, null, e.options.tabSize);
      (null == i || n > u) && (i = l - 1, n = u);
    }
    return i;
  }
  function Me(e, t) {
    if (e.modeFrontier = Math.min(e.modeFrontier, t), !(e.highlightFrontier < t - 10)) {
      for (var r = e.first, n = t - 1; n > r; n--) {
        var i = J(e, n).stateAfter;
        if (i && (!(i instanceof hl) || n + i.lookAhead < t)) {
          r = n + 1;
          break;
        }
      }
      e.highlightFrontier = Math.min(e.highlightFrontier, r);
    }
  }
  function Le() {
    vl = !0;
  }
  function Ne() {
    yl = !0;
  }
  function Ae(e, t, r) {
    this.marker = e, this.from = t, this.to = r;
  }
  function ze(e, t) {
    if (e) for (var r = 0; r < e.length; ++r) {
      var n = e[r];
      if (n.marker == t) return n;
    }
  }
  function Oe(e, t) {
    for (var r, n = 0; n < e.length; ++n) e[n] != t && (r || (r = [])).push(e[n]);
    return r;
  }
  function De(e, t) {
    e.markedSpans = e.markedSpans ? e.markedSpans.concat([ t ]) : [ t ], t.marker.attachLine(e);
  }
  function Ee(e, t, r) {
    var n;
    if (e) for (var i = 0; i < e.length; ++i) {
      var o = e[i], a = o.marker;
      if (null == o.from || (a.inclusiveLeft ? o.from <= t : o.from < t) || o.from == t && "bookmark" == a.type && (!r || !o.marker.insertLeft)) {
        var l = null == o.to || (a.inclusiveRight ? o.to >= t : o.to > t);
        (n || (n = [])).push(new Ae(a, o.from, l ? null : o.to));
      }
    }
    return n;
  }
  function Ie(e, t, r) {
    var n;
    if (e) for (var i = 0; i < e.length; ++i) {
      var o = e[i], a = o.marker;
      if (null == o.to || (a.inclusiveRight ? o.to >= t : o.to > t) || o.from == t && "bookmark" == a.type && (!r || o.marker.insertLeft)) {
        var l = null == o.from || (a.inclusiveLeft ? o.from <= t : o.from < t);
        (n || (n = [])).push(new Ae(a, l ? null : o.from - t, null == o.to ? null : o.to - t));
      }
    }
    return n;
  }
  function Pe(e, t) {
    if (t.full) return null;
    var r = oe(e, t.from.line) && J(e, t.from.line).markedSpans, n = oe(e, t.to.line) && J(e, t.to.line).markedSpans;
    if (!r && !n) return null;
    var i = t.from.ch, o = t.to.ch, a = 0 == se(t.from, t.to), l = Ee(r, i, a), s = Ie(n, o, a), c = 1 == t.text.length, u = m(t.text).length + (c ? i : 0);
    if (l) for (var d = 0; d < l.length; ++d) {
      var f = l[d];
      if (null == f.to) {
        var p = ze(s, f.marker);
        p ? c && (f.to = null == p.to ? null : p.to + u) : f.to = i;
      }
    }
    if (s) for (var h = 0; h < s.length; ++h) {
      var g = s[h];
      if (null != g.to && (g.to += u), null == g.from) ze(l, g.marker) || (g.from = u, 
      c && (l || (l = [])).push(g)); else g.from += u, c && (l || (l = [])).push(g);
    }
    l && (l = We(l)), s && s != l && (s = We(s));
    var v = [ l ];
    if (!c) {
      var y, b = t.text.length - 2;
      if (b > 0 && l) for (var x = 0; x < l.length; ++x) null == l[x].to && (y || (y = [])).push(new Ae(l[x].marker, null, null));
      for (var w = 0; w < b; ++w) v.push(y);
      v.push(s);
    }
    return v;
  }
  function We(e) {
    for (var t = 0; t < e.length; ++t) {
      var r = e[t];
      null != r.from && r.from == r.to && !1 !== r.marker.clearWhenEmpty && e.splice(t--, 1);
    }
    return e.length ? e : null;
  }
  function qe(e, t, r) {
    var n = null;
    if (e.iter(t.line, r.line + 1, function(e) {
      if (e.markedSpans) for (var t = 0; t < e.markedSpans.length; ++t) {
        var r = e.markedSpans[t].marker;
        !r.readOnly || n && -1 != f(n, r) || (n || (n = [])).push(r);
      }
    }), !n) return null;
    for (var i = [ {
      from: t,
      to: r
    } ], o = 0; o < n.length; ++o) for (var a = n[o], l = a.find(0), s = 0; s < i.length; ++s) {
      var c = i[s];
      if (!(se(c.to, l.from) < 0 || se(c.from, l.to) > 0)) {
        var u = [ s, 1 ], d = se(c.from, l.from), p = se(c.to, l.to);
        (d < 0 || !a.inclusiveLeft && !d) && u.push({
          from: c.from,
          to: l.from
        }), (p > 0 || !a.inclusiveRight && !p) && u.push({
          from: l.to,
          to: c.to
        }), i.splice.apply(i, u), s += u.length - 3;
      }
    }
    return i;
  }
  function Fe(e) {
    var t = e.markedSpans;
    if (t) {
      for (var r = 0; r < t.length; ++r) t[r].marker.detachLine(e);
      e.markedSpans = null;
    }
  }
  function Re(e, t) {
    if (t) {
      for (var r = 0; r < t.length; ++r) t[r].marker.attachLine(e);
      e.markedSpans = t;
    }
  }
  function He(e) {
    return e.inclusiveLeft ? -1 : 0;
  }
  function je(e) {
    return e.inclusiveRight ? 1 : 0;
  }
  function Be(e, t) {
    var r = e.lines.length - t.lines.length;
    if (0 != r) return r;
    var n = e.find(), i = t.find(), o = se(n.from, i.from) || He(e) - He(t);
    if (o) return -o;
    var a = se(n.to, i.to) || je(e) - je(t);
    return a || t.id - e.id;
  }
  function Ue(e, t) {
    var r, n = yl && e.markedSpans;
    if (n) for (var i = void 0, o = 0; o < n.length; ++o) (i = n[o]).marker.collapsed && null == (t ? i.from : i.to) && (!r || Be(r, i.marker) < 0) && (r = i.marker);
    return r;
  }
  function Ke(e) {
    return Ue(e, !0);
  }
  function $e(e) {
    return Ue(e, !1);
  }
  function Ve(e, t) {
    var r, n = yl && e.markedSpans;
    if (n) for (var i = 0; i < n.length; ++i) {
      var o = n[i];
      o.marker.collapsed && (null == o.from || o.from < t) && (null == o.to || o.to > t) && (!r || Be(r, o.marker) < 0) && (r = o.marker);
    }
    return r;
  }
  function Ge(e, t, r, n, i) {
    var o = J(e, t), a = yl && o.markedSpans;
    if (a) for (var l = 0; l < a.length; ++l) {
      var s = a[l];
      if (s.marker.collapsed) {
        var c = s.marker.find(0), u = se(c.from, r) || He(s.marker) - He(i), d = se(c.to, n) || je(s.marker) - je(i);
        if (!(u >= 0 && d <= 0 || u <= 0 && d >= 0) && (u <= 0 && (s.marker.inclusiveRight && i.inclusiveLeft ? se(c.to, r) >= 0 : se(c.to, r) > 0) || u >= 0 && (s.marker.inclusiveRight && i.inclusiveLeft ? se(c.from, n) <= 0 : se(c.from, n) < 0))) return !0;
      }
    }
  }
  function Xe(e) {
    for (var t; t = Ke(e); ) e = t.find(-1, !0).line;
    return e;
  }
  function Ze(e) {
    for (var t; t = $e(e); ) e = t.find(1, !0).line;
    return e;
  }
  function Ye(e) {
    for (var t, r; t = $e(e); ) e = t.find(1, !0).line, (r || (r = [])).push(e);
    return r;
  }
  function Qe(e, t) {
    var r = J(e, t), n = Xe(r);
    return r == n ? t : ne(n);
  }
  function Je(e, t) {
    if (t > e.lastLine()) return t;
    var r, n = J(e, t);
    if (!et(e, n)) return t;
    for (;r = $e(n); ) n = r.find(1, !0).line;
    return ne(n) + 1;
  }
  function et(e, t) {
    var r = yl && t.markedSpans;
    if (r) for (var n = void 0, i = 0; i < r.length; ++i) if ((n = r[i]).marker.collapsed) {
      if (null == n.from) return !0;
      if (!n.marker.widgetNode && 0 == n.from && n.marker.inclusiveLeft && tt(e, t, n)) return !0;
    }
  }
  function tt(e, t, r) {
    if (null == r.to) {
      var n = r.marker.find(1, !0);
      return tt(e, n.line, ze(n.line.markedSpans, r.marker));
    }
    if (r.marker.inclusiveRight && r.to == t.text.length) return !0;
    for (var i = void 0, o = 0; o < t.markedSpans.length; ++o) if ((i = t.markedSpans[o]).marker.collapsed && !i.marker.widgetNode && i.from == r.to && (null == i.to || i.to != r.from) && (i.marker.inclusiveLeft || r.marker.inclusiveRight) && tt(e, t, i)) return !0;
  }
  function rt(e) {
    for (var t = 0, r = (e = Xe(e)).parent, n = 0; n < r.lines.length; ++n) {
      var i = r.lines[n];
      if (i == e) break;
      t += i.height;
    }
    for (var o = r.parent; o; o = (r = o).parent) for (var a = 0; a < o.children.length; ++a) {
      var l = o.children[a];
      if (l == r) break;
      t += l.height;
    }
    return t;
  }
  function nt(e) {
    if (0 == e.height) return 0;
    for (var t, r = e.text.length, n = e; t = Ke(n); ) {
      var i = t.find(0, !0);
      n = i.from.line, r += i.from.ch - i.to.ch;
    }
    for (n = e; t = $e(n); ) {
      var o = t.find(0, !0);
      r -= n.text.length - o.from.ch, r += (n = o.to.line).text.length - o.to.ch;
    }
    return r;
  }
  function it(e) {
    var t = e.display, r = e.doc;
    t.maxLine = J(r, r.first), t.maxLineLength = nt(t.maxLine), t.maxLineChanged = !0, 
    r.iter(function(e) {
      var r = nt(e);
      r > t.maxLineLength && (t.maxLineLength = r, t.maxLine = e);
    });
  }
  function ot(e, t, r, n) {
    e.text = t, e.stateAfter && (e.stateAfter = null), e.styles && (e.styles = null), 
    null != e.order && (e.order = null), Fe(e), Re(e, r);
    var i = n ? n(e) : 1;
    i != e.height && re(e, i);
  }
  function at(e) {
    e.parent = null, Fe(e);
  }
  function lt(e, t) {
    if (!e || /^\s*$/.test(e)) return null;
    var r = t.addModeClass ? kl : wl;
    return r[e] || (r[e] = e.replace(/\S+/g, "cm-$&"));
  }
  function st(e, t) {
    var r = i("span", null, null, Ca ? "padding-right: .1px" : null), n = {
      pre: i("pre", [ r ], "CodeMirror-line"),
      content: r,
      col: 0,
      pos: 0,
      cm: e,
      trailingSpace: !1,
      splitSpaces: e.getOption("lineWrapping")
    };
    t.measure = {};
    for (var o = 0; o <= (t.rest ? t.rest.length : 0); o++) {
      var a = o ? t.rest[o - 1] : t.line, l = void 0;
      n.pos = 0, n.addToken = ut, B(e.display.measure) && (l = L(a, e.doc.direction)) && (n.addToken = ft(n.addToken, l)), 
      n.map = [], ht(a, n, ye(e, a, t != e.display.externalMeasured && ne(a))), a.styleClasses && (a.styleClasses.bgClass && (n.bgClass = s(a.styleClasses.bgClass, n.bgClass || "")), 
      a.styleClasses.textClass && (n.textClass = s(a.styleClasses.textClass, n.textClass || ""))), 
      0 == n.map.length && n.map.push(0, 0, n.content.appendChild(j(e.display.measure))), 
      0 == o ? (t.measure.map = n.map, t.measure.cache = {}) : ((t.measure.maps || (t.measure.maps = [])).push(n.map), 
      (t.measure.caches || (t.measure.caches = [])).push({}));
    }
    if (Ca) {
      var c = n.content.lastChild;
      (/\bcm-tab\b/.test(c.className) || c.querySelector && c.querySelector(".cm-tab")) && (n.content.className = "cm-tab-wrap-hack");
    }
    return z(e, "renderLine", e, t.line, n.pre), n.pre.className && (n.textClass = s(n.pre.className, n.textClass || "")), 
    n;
  }
  function ct(e) {
    var t = n("span", "\u2022", "cm-invalidchar");
    return t.title = "\\u" + e.charCodeAt(0).toString(16), t.setAttribute("aria-label", t.title), 
    t;
  }
  function ut(e, t, r, i, o, a, l) {
    if (t) {
      var s, c = e.splitSpaces ? dt(t, e.trailingSpace) : t, u = e.cm.state.specialChars, d = !1;
      if (u.test(t)) {
        s = document.createDocumentFragment();
        for (var f = 0; ;) {
          u.lastIndex = f;
          var p = u.exec(t), m = p ? p.index - f : t.length - f;
          if (m) {
            var g = document.createTextNode(c.slice(f, f + m));
            ka && _a < 9 ? s.appendChild(n("span", [ g ])) : s.appendChild(g), e.map.push(e.pos, e.pos + m, g), 
            e.col += m, e.pos += m;
          }
          if (!p) break;
          f += m + 1;
          var v = void 0;
          if ("\t" == p[0]) {
            var y = e.cm.options.tabSize, b = y - e.col % y;
            (v = s.appendChild(n("span", h(b), "cm-tab"))).setAttribute("role", "presentation"), 
            v.setAttribute("cm-text", "\t"), e.col += b;
          } else "\r" == p[0] || "\n" == p[0] ? ((v = s.appendChild(n("span", "\r" == p[0] ? "\u240d" : "\u2424", "cm-invalidchar"))).setAttribute("cm-text", p[0]), 
          e.col += 1) : ((v = e.cm.options.specialCharPlaceholder(p[0])).setAttribute("cm-text", p[0]), 
          ka && _a < 9 ? s.appendChild(n("span", [ v ])) : s.appendChild(v), e.col += 1);
          e.map.push(e.pos, e.pos + 1, v), e.pos++;
        }
      } else e.col += t.length, s = document.createTextNode(c), e.map.push(e.pos, e.pos + t.length, s), 
      ka && _a < 9 && (d = !0), e.pos += t.length;
      if (e.trailingSpace = 32 == c.charCodeAt(t.length - 1), r || i || o || d || a) {
        var x = r || "";
        i && (x += i), o && (x += o);
        var w = n("span", [ s ], x, a);
        if (l) for (var k in l) l.hasOwnProperty(k) && "style" != k && "class" != k && w.setAttribute(k, l[k]);
        return e.content.appendChild(w);
      }
      e.content.appendChild(s);
    }
  }
  function dt(e, t) {
    if (e.length > 1 && !/  /.test(e)) return e;
    for (var r = t, n = "", i = 0; i < e.length; i++) {
      var o = e.charAt(i);
      " " != o || !r || i != e.length - 1 && 32 != e.charCodeAt(i + 1) || (o = "\xa0"), 
      n += o, r = " " == o;
    }
    return n;
  }
  function ft(e, t) {
    return function(r, n, i, o, a, l, s) {
      i = i ? i + " cm-force-border" : "cm-force-border";
      for (var c = r.pos, u = c + n.length; ;) {
        for (var d = void 0, f = 0; f < t.length && !((d = t[f]).to > c && d.from <= c); f++) ;
        if (d.to >= u) return e(r, n, i, o, a, l, s);
        e(r, n.slice(0, d.to - c), i, o, null, l, s), o = null, n = n.slice(d.to - c), c = d.to;
      }
    };
  }
  function pt(e, t, r, n) {
    var i = !n && r.widgetNode;
    i && e.map.push(e.pos, e.pos + t, i), !n && e.cm.display.input.needsContentAttribute && (i || (i = e.content.appendChild(document.createElement("span"))), 
    i.setAttribute("cm-marker", r.id)), i && (e.cm.display.input.setUneditable(i), e.content.appendChild(i)), 
    e.pos += t, e.trailingSpace = !1;
  }
  function ht(e, t, r) {
    var n = e.markedSpans, i = e.text, o = 0;
    if (n) for (var a, l, s, c, u, d, f, p = i.length, h = 0, m = 1, g = "", v = 0; ;) {
      if (v == h) {
        s = c = u = l = "", f = null, d = null, v = Infinity;
        for (var y = [], b = void 0, x = 0; x < n.length; ++x) {
          var w = n[x], k = w.marker;
          if ("bookmark" == k.type && w.from == h && k.widgetNode) y.push(k); else if (w.from <= h && (null == w.to || w.to > h || k.collapsed && w.to == h && w.from == h)) {
            if (null != w.to && w.to != h && v > w.to && (v = w.to, c = ""), k.className && (s += " " + k.className), 
            k.css && (l = (l ? l + ";" : "") + k.css), k.startStyle && w.from == h && (u += " " + k.startStyle), 
            k.endStyle && w.to == v && (b || (b = [])).push(k.endStyle, w.to), k.title && ((f || (f = {})).title = k.title), 
            k.attributes) for (var _ in k.attributes) (f || (f = {}))[_] = k.attributes[_];
            k.collapsed && (!d || Be(d.marker, k) < 0) && (d = w);
          } else w.from > h && v > w.from && (v = w.from);
        }
        if (b) for (var C = 0; C < b.length; C += 2) b[C + 1] == v && (c += " " + b[C]);
        if (!d || d.from == h) for (var S = 0; S < y.length; ++S) pt(t, 0, y[S]);
        if (d && (d.from || 0) == h) {
          if (pt(t, (null == d.to ? p + 1 : d.to) - h, d.marker, null == d.from), null == d.to) return;
          d.to == h && (d = !1);
        }
      }
      if (h >= p) break;
      for (var T = Math.min(p, v); ;) {
        if (g) {
          var M = h + g.length;
          if (!d) {
            var L = M > T ? g.slice(0, T - h) : g;
            t.addToken(t, L, a ? a + s : s, u, h + L.length == v ? c : "", l, f);
          }
          if (M >= T) {
            g = g.slice(T - h), h = T;
            break;
          }
          h = M, u = "";
        }
        g = i.slice(o, o = r[m++]), a = lt(r[m++], t.cm.options);
      }
    } else for (var N = 1; N < r.length; N += 2) t.addToken(t, i.slice(o, o = r[N]), lt(r[N + 1], t.cm.options));
  }
  function mt(e, t, r) {
    this.line = t, this.rest = Ye(t), this.size = this.rest ? ne(m(this.rest)) - r + 1 : 1, 
    this.node = this.text = null, this.hidden = et(e, t);
  }
  function gt(e, t, r) {
    for (var n, i = [], o = t; o < r; o = n) {
      var a = new mt(e.doc, J(e.doc, o), o);
      n = o + a.size, i.push(a);
    }
    return i;
  }
  function vt(e) {
    _l ? _l.ops.push(e) : e.ownsGroup = _l = {
      ops: [ e ],
      delayedCallbacks: []
    };
  }
  function yt(e) {
    var t = e.delayedCallbacks, r = 0;
    do {
      for (;r < t.length; r++) t[r].call(null);
      for (var n = 0; n < e.ops.length; n++) {
        var i = e.ops[n];
        if (i.cursorActivityHandlers) for (;i.cursorActivityCalled < i.cursorActivityHandlers.length; ) i.cursorActivityHandlers[i.cursorActivityCalled++].call(null, i.cm);
      }
    } while (r < t.length);
  }
  function bt(e, t) {
    var r = e.ownsGroup;
    if (r) try {
      yt(r);
    } finally {
      _l = null, t(r);
    }
  }
  function xt(e, t) {
    var r = N(e, t);
    if (r.length) {
      var n, i = Array.prototype.slice.call(arguments, 2);
      _l ? n = _l.delayedCallbacks : Cl ? n = Cl : (n = Cl = [], setTimeout(wt, 0));
      for (var o = function(e) {
        n.push(function() {
          return r[e].apply(null, i);
        });
      }, a = 0; a < r.length; ++a) o(a);
    }
  }
  function wt() {
    var e = Cl;
    Cl = null;
    for (var t = 0; t < e.length; ++t) e[t]();
  }
  function kt(e, t, r, n) {
    for (var i = 0; i < t.changes.length; i++) {
      var o = t.changes[i];
      "text" == o ? Tt(e, t) : "gutter" == o ? Lt(e, t, r, n) : "class" == o ? Mt(e, t) : "widget" == o && Nt(e, t, n);
    }
    t.changes = null;
  }
  function _t(e) {
    return e.node == e.text && (e.node = n("div", null, null, "position: relative"), 
    e.text.parentNode && e.text.parentNode.replaceChild(e.node, e.text), e.node.appendChild(e.text), 
    ka && _a < 8 && (e.node.style.zIndex = 2)), e.node;
  }
  function Ct(e, t) {
    var r = t.bgClass ? t.bgClass + " " + (t.line.bgClass || "") : t.line.bgClass;
    if (r && (r += " CodeMirror-linebackground"), t.background) r ? t.background.className = r : (t.background.parentNode.removeChild(t.background), 
    t.background = null); else if (r) {
      var i = _t(t);
      t.background = i.insertBefore(n("div", null, r), i.firstChild), e.display.input.setUneditable(t.background);
    }
  }
  function St(e, t) {
    var r = e.display.externalMeasured;
    return r && r.line == t.line ? (e.display.externalMeasured = null, t.measure = r.measure, 
    r.built) : st(e, t);
  }
  function Tt(e, t) {
    var r = t.text.className, n = St(e, t);
    t.text == t.node && (t.node = n.pre), t.text.parentNode.replaceChild(n.pre, t.text), 
    t.text = n.pre, n.bgClass != t.bgClass || n.textClass != t.textClass ? (t.bgClass = n.bgClass, 
    t.textClass = n.textClass, Mt(e, t)) : r && (t.text.className = r);
  }
  function Mt(e, t) {
    Ct(e, t), t.line.wrapClass ? _t(t).className = t.line.wrapClass : t.node != t.text && (t.node.className = "");
    var r = t.textClass ? t.textClass + " " + (t.line.textClass || "") : t.line.textClass;
    t.text.className = r || "";
  }
  function Lt(e, t, r, i) {
    if (t.gutter && (t.node.removeChild(t.gutter), t.gutter = null), t.gutterBackground && (t.node.removeChild(t.gutterBackground), 
    t.gutterBackground = null), t.line.gutterClass) {
      var o = _t(t);
      t.gutterBackground = n("div", null, "CodeMirror-gutter-background " + t.line.gutterClass, "left: " + (e.options.fixedGutter ? i.fixedPos : -i.gutterTotalWidth) + "px; width: " + i.gutterTotalWidth + "px"), 
      e.display.input.setUneditable(t.gutterBackground), o.insertBefore(t.gutterBackground, t.text);
    }
    var a = t.line.gutterMarkers;
    if (e.options.lineNumbers || a) {
      var l = _t(t), s = t.gutter = n("div", null, "CodeMirror-gutter-wrapper", "left: " + (e.options.fixedGutter ? i.fixedPos : -i.gutterTotalWidth) + "px");
      if (e.display.input.setUneditable(s), l.insertBefore(s, t.text), t.line.gutterClass && (s.className += " " + t.line.gutterClass), 
      !e.options.lineNumbers || a && a["CodeMirror-linenumbers"] || (t.lineNumber = s.appendChild(n("div", ae(e.options, r), "CodeMirror-linenumber CodeMirror-gutter-elt", "left: " + i.gutterLeft["CodeMirror-linenumbers"] + "px; width: " + e.display.lineNumInnerWidth + "px"))), 
      a) for (var c = 0; c < e.display.gutterSpecs.length; ++c) {
        var u = e.display.gutterSpecs[c].className, d = a.hasOwnProperty(u) && a[u];
        d && s.appendChild(n("div", [ d ], "CodeMirror-gutter-elt", "left: " + i.gutterLeft[u] + "px; width: " + i.gutterWidth[u] + "px"));
      }
    }
  }
  function Nt(t, r, n) {
    r.alignable && (r.alignable = null);
    for (var i = e("CodeMirror-linewidget"), o = r.node.firstChild, a = void 0; o; o = a) a = o.nextSibling, 
    i.test(o.className) && r.node.removeChild(o);
    zt(t, r, n);
  }
  function At(e, t, r, n) {
    var i = St(e, t);
    return t.text = t.node = i.pre, i.bgClass && (t.bgClass = i.bgClass), i.textClass && (t.textClass = i.textClass), 
    Mt(e, t), Lt(e, t, r, n), zt(e, t, n), t.node;
  }
  function zt(e, t, r) {
    if (Ot(e, t.line, t, r, !0), t.rest) for (var n = 0; n < t.rest.length; n++) Ot(e, t.rest[n], t, r, !1);
  }
  function Ot(e, t, r, i, o) {
    if (t.widgets) for (var a = _t(r), l = 0, s = t.widgets; l < s.length; ++l) {
      var c = s[l], u = n("div", [ c.node ], "CodeMirror-linewidget" + (c.className ? " " + c.className : ""));
      c.handleMouseEvents || u.setAttribute("cm-ignore-events", "true"), Dt(c, u, r, i), 
      e.display.input.setUneditable(u), o && c.above ? a.insertBefore(u, r.gutter || r.text) : a.appendChild(u), 
      xt(c, "redraw");
    }
  }
  function Dt(e, t, r, n) {
    if (e.noHScroll) {
      (r.alignable || (r.alignable = [])).push(t);
      var i = n.wrapperWidth;
      t.style.left = n.fixedPos + "px", e.coverGutter || (i -= n.gutterTotalWidth, t.style.paddingLeft = n.gutterTotalWidth + "px"), 
      t.style.width = i + "px";
    }
    e.coverGutter && (t.style.zIndex = 5, t.style.position = "relative", e.noHScroll || (t.style.marginLeft = -n.gutterTotalWidth + "px"));
  }
  function Et(e) {
    if (null != e.height) return e.height;
    var t = e.doc.cm;
    if (!t) return 0;
    if (!o(document.body, e.node)) {
      var i = "position: relative;";
      e.coverGutter && (i += "margin-left: -" + t.display.gutters.offsetWidth + "px;"), 
      e.noHScroll && (i += "width: " + t.display.wrapper.clientWidth + "px;"), r(t.display.measure, n("div", [ e.node ], null, i));
    }
    return e.height = e.node.parentNode.offsetHeight;
  }
  function It(e, t) {
    for (var r = R(t); r != e.wrapper; r = r.parentNode) if (!r || 1 == r.nodeType && "true" == r.getAttribute("cm-ignore-events") || r.parentNode == e.sizer && r != e.mover) return !0;
  }
  function Pt(e) {
    return e.lineSpace.offsetTop;
  }
  function Wt(e) {
    return e.mover.offsetHeight - e.lineSpace.offsetHeight;
  }
  function qt(e) {
    if (e.cachedPaddingH) return e.cachedPaddingH;
    var t = r(e.measure, n("pre", "x", "CodeMirror-line-like")), i = window.getComputedStyle ? window.getComputedStyle(t) : t.currentStyle, o = {
      left: parseInt(i.paddingLeft),
      right: parseInt(i.paddingRight)
    };
    return isNaN(o.left) || isNaN(o.right) || (e.cachedPaddingH = o), o;
  }
  function Ft(e) {
    return Va - e.display.nativeBarWidth;
  }
  function Rt(e) {
    return e.display.scroller.clientWidth - Ft(e) - e.display.barWidth;
  }
  function Ht(e) {
    return e.display.scroller.clientHeight - Ft(e) - e.display.barHeight;
  }
  function jt(e, t, r) {
    var n = e.options.lineWrapping, i = n && Rt(e);
    if (!t.measure.heights || n && t.measure.width != i) {
      var o = t.measure.heights = [];
      if (n) {
        t.measure.width = i;
        for (var a = t.text.firstChild.getClientRects(), l = 0; l < a.length - 1; l++) {
          var s = a[l], c = a[l + 1];
          Math.abs(s.bottom - c.bottom) > 2 && o.push((s.bottom + c.top) / 2 - r.top);
        }
      }
      o.push(r.bottom - r.top);
    }
  }
  function Bt(e, t, r) {
    if (e.line == t) return {
      map: e.measure.map,
      cache: e.measure.cache
    };
    for (var n = 0; n < e.rest.length; n++) if (e.rest[n] == t) return {
      map: e.measure.maps[n],
      cache: e.measure.caches[n]
    };
    for (var i = 0; i < e.rest.length; i++) if (ne(e.rest[i]) > r) return {
      map: e.measure.maps[i],
      cache: e.measure.caches[i],
      before: !0
    };
  }
  function Ut(e, t) {
    var n = ne(t = Xe(t)), i = e.display.externalMeasured = new mt(e.doc, t, n);
    i.lineN = n;
    var o = i.built = st(e, i);
    return i.text = o.pre, r(e.display.lineMeasure, o.pre), i;
  }
  function Kt(e, t, r, n) {
    return Gt(e, Vt(e, t), r, n);
  }
  function $t(e, t) {
    if (t >= e.display.viewFrom && t < e.display.viewTo) return e.display.view[Sr(e, t)];
    var r = e.display.externalMeasured;
    return r && t >= r.lineN && t < r.lineN + r.size ? r : void 0;
  }
  function Vt(e, t) {
    var r = ne(t), n = $t(e, r);
    n && !n.text ? n = null : n && n.changes && (kt(e, n, r, xr(e)), e.curOp.forceUpdate = !0), 
    n || (n = Ut(e, t));
    var i = Bt(n, t, r);
    return {
      line: t,
      view: n,
      rect: null,
      map: i.map,
      cache: i.cache,
      before: i.before,
      hasHeights: !1
    };
  }
  function Gt(e, t, r, n, i) {
    t.before && (r = -1);
    var o, a = r + (n || "");
    return t.cache.hasOwnProperty(a) ? o = t.cache[a] : (t.rect || (t.rect = t.view.text.getBoundingClientRect()), 
    t.hasHeights || (jt(e, t.view, t.rect), t.hasHeights = !0), (o = Yt(e, t, r, n)).bogus || (t.cache[a] = o)), 
    {
      left: o.left,
      right: o.right,
      top: i ? o.rtop : o.top,
      bottom: i ? o.rbottom : o.bottom
    };
  }
  function Xt(e, t, r) {
    for (var n, i, o, a, l, s, c = 0; c < e.length; c += 3) if (l = e[c], s = e[c + 1], 
    t < l ? (i = 0, o = 1, a = "left") : t < s ? o = (i = t - l) + 1 : (c == e.length - 3 || t == s && e[c + 3] > t) && (i = (o = s - l) - 1, 
    t >= s && (a = "right")), null != i) {
      if (n = e[c + 2], l == s && r == (n.insertLeft ? "left" : "right") && (a = r), "left" == r && 0 == i) for (;c && e[c - 2] == e[c - 3] && e[c - 1].insertLeft; ) n = e[2 + (c -= 3)], 
      a = "left";
      if ("right" == r && i == s - l) for (;c < e.length - 3 && e[c + 3] == e[c + 4] && !e[c + 5].insertLeft; ) n = e[(c += 3) + 2], 
      a = "right";
      break;
    }
    return {
      node: n,
      start: i,
      end: o,
      collapse: a,
      coverStart: l,
      coverEnd: s
    };
  }
  function Zt(e, t) {
    var r = Sl;
    if ("left" == t) for (var n = 0; n < e.length && (r = e[n]).left == r.right; n++) ; else for (var i = e.length - 1; i >= 0 && (r = e[i]).left == r.right; i--) ;
    return r;
  }
  function Yt(e, t, r, n) {
    var i, o = Xt(t.map, r, n), a = o.node, l = o.start, s = o.end, c = o.collapse;
    if (3 == a.nodeType) {
      for (var u = 0; u < 4; u++) {
        for (;l && _(t.line.text.charAt(o.coverStart + l)); ) --l;
        for (;o.coverStart + s < o.coverEnd && _(t.line.text.charAt(o.coverStart + s)); ) ++s;
        if ((i = ka && _a < 9 && 0 == l && s == o.coverEnd - o.coverStart ? a.parentNode.getBoundingClientRect() : Zt(qa(a, l, s).getClientRects(), n)).left || i.right || 0 == l) break;
        s = l, l -= 1, c = "right";
      }
      ka && _a < 11 && (i = Qt(e.display.measure, i));
    } else {
      var d;
      l > 0 && (c = n = "right"), i = e.options.lineWrapping && (d = a.getClientRects()).length > 1 ? d["right" == n ? d.length - 1 : 0] : a.getBoundingClientRect();
    }
    if (ka && _a < 9 && !l && (!i || !i.left && !i.right)) {
      var f = a.parentNode.getClientRects()[0];
      i = f ? {
        left: f.left,
        right: f.left + br(e.display),
        top: f.top,
        bottom: f.bottom
      } : Sl;
    }
    for (var p = i.top - t.rect.top, h = i.bottom - t.rect.top, m = (p + h) / 2, g = t.view.measure.heights, v = 0; v < g.length - 1 && !(m < g[v]); v++) ;
    var y = v ? g[v - 1] : 0, b = g[v], x = {
      left: ("right" == c ? i.right : i.left) - t.rect.left,
      right: ("left" == c ? i.left : i.right) - t.rect.left,
      top: y,
      bottom: b
    };
    return i.left || i.right || (x.bogus = !0), e.options.singleCursorHeightPerLine || (x.rtop = p, 
    x.rbottom = h), x;
  }
  function Qt(e, t) {
    if (!window.screen || null == screen.logicalXDPI || screen.logicalXDPI == screen.deviceXDPI || !U(e)) return t;
    var r = screen.logicalXDPI / screen.deviceXDPI, n = screen.logicalYDPI / screen.deviceYDPI;
    return {
      left: t.left * r,
      right: t.right * r,
      top: t.top * n,
      bottom: t.bottom * n
    };
  }
  function Jt(e) {
    if (e.measure && (e.measure.cache = {}, e.measure.heights = null, e.rest)) for (var t = 0; t < e.rest.length; t++) e.measure.caches[t] = {};
  }
  function er(e) {
    e.display.externalMeasure = null, t(e.display.lineMeasure);
    for (var r = 0; r < e.display.view.length; r++) Jt(e.display.view[r]);
  }
  function tr(e) {
    er(e), e.display.cachedCharWidth = e.display.cachedTextHeight = e.display.cachedPaddingH = null, 
    e.options.lineWrapping || (e.display.maxLineChanged = !0), e.display.lineNumChars = null;
  }
  function rr() {
    return Ta && Oa ? -(document.body.getBoundingClientRect().left - parseInt(getComputedStyle(document.body).marginLeft)) : window.pageXOffset || (document.documentElement || document.body).scrollLeft;
  }
  function nr() {
    return Ta && Oa ? -(document.body.getBoundingClientRect().top - parseInt(getComputedStyle(document.body).marginTop)) : window.pageYOffset || (document.documentElement || document.body).scrollTop;
  }
  function ir(e) {
    var t = 0;
    if (e.widgets) for (var r = 0; r < e.widgets.length; ++r) e.widgets[r].above && (t += Et(e.widgets[r]));
    return t;
  }
  function or(e, t, r, n, i) {
    if (!i) {
      var o = ir(t);
      r.top += o, r.bottom += o;
    }
    if ("line" == n) return r;
    n || (n = "local");
    var a = rt(t);
    if ("local" == n ? a += Pt(e.display) : a -= e.display.viewOffset, "page" == n || "window" == n) {
      var l = e.display.lineSpace.getBoundingClientRect();
      a += l.top + ("window" == n ? 0 : nr());
      var s = l.left + ("window" == n ? 0 : rr());
      r.left += s, r.right += s;
    }
    return r.top += a, r.bottom += a, r;
  }
  function ar(e, t, r) {
    if ("div" == r) return t;
    var n = t.left, i = t.top;
    if ("page" == r) n -= rr(), i -= nr(); else if ("local" == r || !r) {
      var o = e.display.sizer.getBoundingClientRect();
      n += o.left, i += o.top;
    }
    var a = e.display.lineSpace.getBoundingClientRect();
    return {
      left: n - a.left,
      top: i - a.top
    };
  }
  function lr(e, t, r, n, i) {
    return n || (n = J(e.doc, t.line)), or(e, n, Kt(e, n, t.ch, i), r);
  }
  function sr(e, t, r, n, i, o) {
    function a(t, a) {
      var l = Gt(e, i, t, a ? "right" : "left", o);
      return a ? l.left = l.right : l.right = l.left, or(e, n, l, r);
    }
    function l(e, t, r) {
      return a(r ? e - 1 : e, 1 == s[t].level != r);
    }
    n = n || J(e.doc, t.line), i || (i = Vt(e, n));
    var s = L(n, e.doc.direction), c = t.ch, u = t.sticky;
    if (c >= n.text.length ? (c = n.text.length, u = "before") : c <= 0 && (c = 0, u = "after"), 
    !s) return a("before" == u ? c - 1 : c, "before" == u);
    var d = M(s, c, u), f = tl, p = l(c, d, "before" == u);
    return null != f && (p.other = l(c, f, "before" != u)), p;
  }
  function cr(e, t) {
    var r = 0;
    t = he(e.doc, t), e.options.lineWrapping || (r = br(e.display) * t.ch);
    var n = J(e.doc, t.line), i = rt(n) + Pt(e.display);
    return {
      left: r,
      right: r,
      top: i,
      bottom: i + n.height
    };
  }
  function ur(e, t, r, n, i) {
    var o = le(e, t, r);
    return o.xRel = i, n && (o.outside = n), o;
  }
  function dr(e, t, r) {
    var n = e.doc;
    if ((r += e.display.viewOffset) < 0) return ur(n.first, 0, null, -1, -1);
    var i = ie(n, r), o = n.first + n.size - 1;
    if (i > o) return ur(n.first + n.size - 1, J(n, o).text.length, null, 1, 1);
    t < 0 && (t = 0);
    for (var a = J(n, i); ;) {
      var l = mr(e, a, i, t, r), s = Ve(a, l.ch + (l.xRel > 0 || l.outside > 0 ? 1 : 0));
      if (!s) return l;
      var c = s.find(1);
      if (c.line == i) return c;
      a = J(n, i = c.line);
    }
  }
  function fr(e, t, r, n) {
    n -= ir(t);
    var i = t.text.length, o = S(function(t) {
      return Gt(e, r, t - 1).bottom <= n;
    }, i, 0);
    return {
      begin: o,
      end: i = S(function(t) {
        return Gt(e, r, t).top > n;
      }, o, i)
    };
  }
  function pr(e, t, r, n) {
    return r || (r = Vt(e, t)), fr(e, t, r, or(e, t, Gt(e, r, n), "line").top);
  }
  function hr(e, t, r, n) {
    return !(e.bottom <= r) && (e.top > r || (n ? e.left : e.right) > t);
  }
  function mr(e, t, r, n, i) {
    i -= rt(t);
    var o = Vt(e, t), a = ir(t), l = 0, s = t.text.length, c = !0, u = L(t, e.doc.direction);
    if (u) {
      var d = (e.options.lineWrapping ? vr : gr)(e, t, r, o, u, n, i);
      l = (c = 1 != d.level) ? d.from : d.to - 1, s = c ? d.to : d.from - 1;
    }
    var f, p, h = null, m = null, g = S(function(t) {
      var r = Gt(e, o, t);
      return r.top += a, r.bottom += a, !!hr(r, n, i, !1) && (r.top <= i && r.left <= n && (h = t, 
      m = r), !0);
    }, l, s), v = !1;
    if (m) {
      var y = n - m.left < m.right - n, b = y == c;
      g = h + (b ? 0 : 1), p = b ? "after" : "before", f = y ? m.left : m.right;
    } else {
      c || g != s && g != l || g++, p = 0 == g ? "after" : g == t.text.length ? "before" : Gt(e, o, g - (c ? 1 : 0)).bottom + a <= i == c ? "after" : "before";
      var x = sr(e, le(r, g, p), "line", t, o);
      f = x.left, v = i < x.top ? -1 : i >= x.bottom ? 1 : 0;
    }
    return ur(r, g = C(t.text, g, 1), p, v, n - f);
  }
  function gr(e, t, r, n, i, o, a) {
    var l = S(function(l) {
      var s = i[l], c = 1 != s.level;
      return hr(sr(e, le(r, c ? s.to : s.from, c ? "before" : "after"), "line", t, n), o, a, !0);
    }, 0, i.length - 1), s = i[l];
    if (l > 0) {
      var c = 1 != s.level, u = sr(e, le(r, c ? s.from : s.to, c ? "after" : "before"), "line", t, n);
      hr(u, o, a, !0) && u.top > a && (s = i[l - 1]);
    }
    return s;
  }
  function vr(e, t, r, n, i, o, a) {
    var l = fr(e, t, n, a), s = l.begin, c = l.end;
    /\s/.test(t.text.charAt(c - 1)) && c--;
    for (var u = null, d = null, f = 0; f < i.length; f++) {
      var p = i[f];
      if (!(p.from >= c || p.to <= s)) {
        var h = Gt(e, n, 1 != p.level ? Math.min(c, p.to) - 1 : Math.max(s, p.from)).right, m = h < o ? o - h + 1e9 : h - o;
        (!u || d > m) && (u = p, d = m);
      }
    }
    return u || (u = i[i.length - 1]), u.from < s && (u = {
      from: s,
      to: u.to,
      level: u.level
    }), u.to > c && (u = {
      from: u.from,
      to: c,
      level: u.level
    }), u;
  }
  function yr(e) {
    if (null != e.cachedTextHeight) return e.cachedTextHeight;
    if (null == xl) {
      xl = n("pre", null, "CodeMirror-line-like");
      for (var i = 0; i < 49; ++i) xl.appendChild(document.createTextNode("x")), xl.appendChild(n("br"));
      xl.appendChild(document.createTextNode("x"));
    }
    r(e.measure, xl);
    var o = xl.offsetHeight / 50;
    return o > 3 && (e.cachedTextHeight = o), t(e.measure), o || 1;
  }
  function br(e) {
    if (null != e.cachedCharWidth) return e.cachedCharWidth;
    var t = n("span", "xxxxxxxxxx"), i = n("pre", [ t ], "CodeMirror-line-like");
    r(e.measure, i);
    var o = t.getBoundingClientRect(), a = (o.right - o.left) / 10;
    return a > 2 && (e.cachedCharWidth = a), a || 10;
  }
  function xr(e) {
    for (var t = e.display, r = {}, n = {}, i = t.gutters.clientLeft, o = t.gutters.firstChild, a = 0; o; o = o.nextSibling, 
    ++a) {
      var l = e.display.gutterSpecs[a].className;
      r[l] = o.offsetLeft + o.clientLeft + i, n[l] = o.clientWidth;
    }
    return {
      fixedPos: wr(t),
      gutterTotalWidth: t.gutters.offsetWidth,
      gutterLeft: r,
      gutterWidth: n,
      wrapperWidth: t.wrapper.clientWidth
    };
  }
  function wr(e) {
    return e.scroller.getBoundingClientRect().left - e.sizer.getBoundingClientRect().left;
  }
  function kr(e) {
    var t = yr(e.display), r = e.options.lineWrapping, n = r && Math.max(5, e.display.scroller.clientWidth / br(e.display) - 3);
    return function(i) {
      if (et(e.doc, i)) return 0;
      var o = 0;
      if (i.widgets) for (var a = 0; a < i.widgets.length; a++) i.widgets[a].height && (o += i.widgets[a].height);
      return r ? o + (Math.ceil(i.text.length / n) || 1) * t : o + t;
    };
  }
  function _r(e) {
    var t = e.doc, r = kr(e);
    t.iter(function(e) {
      var t = r(e);
      t != e.height && re(e, t);
    });
  }
  function Cr(e, t, r, n) {
    var i = e.display;
    if (!r && "true" == R(t).getAttribute("cm-not-content")) return null;
    var o, a, l = i.lineSpace.getBoundingClientRect();
    try {
      o = t.clientX - l.left, a = t.clientY - l.top;
    } catch (t) {
      return null;
    }
    var s, c = dr(e, o, a);
    if (n && c.xRel > 0 && (s = J(e.doc, c.line).text).length == c.ch) {
      var u = d(s, s.length, e.options.tabSize) - s.length;
      c = le(c.line, Math.max(0, Math.round((o - qt(e.display).left) / br(e.display)) - u));
    }
    return c;
  }
  function Sr(e, t) {
    if (t >= e.display.viewTo) return null;
    if ((t -= e.display.viewFrom) < 0) return null;
    for (var r = e.display.view, n = 0; n < r.length; n++) if ((t -= r[n].size) < 0) return n;
  }
  function Tr(e, t, r, n) {
    null == t && (t = e.doc.first), null == r && (r = e.doc.first + e.doc.size), n || (n = 0);
    var i = e.display;
    if (n && r < i.viewTo && (null == i.updateLineNumbers || i.updateLineNumbers > t) && (i.updateLineNumbers = t), 
    e.curOp.viewChanged = !0, t >= i.viewTo) yl && Qe(e.doc, t) < i.viewTo && Lr(e); else if (r <= i.viewFrom) yl && Je(e.doc, r + n) > i.viewFrom ? Lr(e) : (i.viewFrom += n, 
    i.viewTo += n); else if (t <= i.viewFrom && r >= i.viewTo) Lr(e); else if (t <= i.viewFrom) {
      var o = Nr(e, r, r + n, 1);
      o ? (i.view = i.view.slice(o.index), i.viewFrom = o.lineN, i.viewTo += n) : Lr(e);
    } else if (r >= i.viewTo) {
      var a = Nr(e, t, t, -1);
      a ? (i.view = i.view.slice(0, a.index), i.viewTo = a.lineN) : Lr(e);
    } else {
      var l = Nr(e, t, t, -1), s = Nr(e, r, r + n, 1);
      l && s ? (i.view = i.view.slice(0, l.index).concat(gt(e, l.lineN, s.lineN)).concat(i.view.slice(s.index)), 
      i.viewTo += n) : Lr(e);
    }
    var c = i.externalMeasured;
    c && (r < c.lineN ? c.lineN += n : t < c.lineN + c.size && (i.externalMeasured = null));
  }
  function Mr(e, t, r) {
    e.curOp.viewChanged = !0;
    var n = e.display, i = e.display.externalMeasured;
    if (i && t >= i.lineN && t < i.lineN + i.size && (n.externalMeasured = null), !(t < n.viewFrom || t >= n.viewTo)) {
      var o = n.view[Sr(e, t)];
      if (null != o.node) {
        var a = o.changes || (o.changes = []);
        -1 == f(a, r) && a.push(r);
      }
    }
  }
  function Lr(e) {
    e.display.viewFrom = e.display.viewTo = e.doc.first, e.display.view = [], e.display.viewOffset = 0;
  }
  function Nr(e, t, r, n) {
    var i, o = Sr(e, t), a = e.display.view;
    if (!yl || r == e.doc.first + e.doc.size) return {
      index: o,
      lineN: r
    };
    for (var l = e.display.viewFrom, s = 0; s < o; s++) l += a[s].size;
    if (l != t) {
      if (n > 0) {
        if (o == a.length - 1) return null;
        i = l + a[o].size - t, o++;
      } else i = l - t;
      t += i, r += i;
    }
    for (;Qe(e.doc, r) != r; ) {
      if (o == (n < 0 ? 0 : a.length - 1)) return null;
      r += n * a[o - (n < 0 ? 1 : 0)].size, o += n;
    }
    return {
      index: o,
      lineN: r
    };
  }
  function Ar(e, t, r) {
    var n = e.display;
    0 == n.view.length || t >= n.viewTo || r <= n.viewFrom ? (n.view = gt(e, t, r), 
    n.viewFrom = t) : (n.viewFrom > t ? n.view = gt(e, t, n.viewFrom).concat(n.view) : n.viewFrom < t && (n.view = n.view.slice(Sr(e, t))), 
    n.viewFrom = t, n.viewTo < r ? n.view = n.view.concat(gt(e, n.viewTo, r)) : n.viewTo > r && (n.view = n.view.slice(0, Sr(e, r)))), 
    n.viewTo = r;
  }
  function zr(e) {
    for (var t = e.display.view, r = 0, n = 0; n < t.length; n++) {
      var i = t[n];
      i.hidden || i.node && !i.changes || ++r;
    }
    return r;
  }
  function Or(e) {
    e.display.input.showSelection(e.display.input.prepareSelection());
  }
  function Dr(e, t) {
    void 0 === t && (t = !0);
    for (var r = e.doc, n = {}, i = n.cursors = document.createDocumentFragment(), o = n.selection = document.createDocumentFragment(), a = 0; a < r.sel.ranges.length; a++) if (t || a != r.sel.primIndex) {
      var l = r.sel.ranges[a];
      if (!(l.from().line >= e.display.viewTo || l.to().line < e.display.viewFrom)) {
        var s = l.empty();
        (s || e.options.showCursorWhenSelecting) && Er(e, l.head, i), s || Pr(e, l, o);
      }
    }
    return n;
  }
  function Er(e, t, r) {
    var i = sr(e, t, "div", null, null, !e.options.singleCursorHeightPerLine), o = r.appendChild(n("div", "\xa0", "CodeMirror-cursor"));
    if (o.style.left = i.left + "px", o.style.top = i.top + "px", o.style.height = Math.max(0, i.bottom - i.top) * e.options.cursorHeight + "px", 
    i.other) {
      var a = r.appendChild(n("div", "\xa0", "CodeMirror-cursor CodeMirror-secondarycursor"));
      a.style.display = "", a.style.left = i.other.left + "px", a.style.top = i.other.top + "px", 
      a.style.height = .85 * (i.other.bottom - i.other.top) + "px";
    }
  }
  function Ir(e, t) {
    return e.top - t.top || e.left - t.left;
  }
  function Pr(e, t, r) {
    function i(e, t, r, i) {
      t < 0 && (t = 0), t = Math.round(t), i = Math.round(i), s.appendChild(n("div", null, "CodeMirror-selected", "position: absolute; left: " + e + "px;\n                             top: " + t + "px; width: " + (null == r ? d - e : r) + "px;\n                             height: " + (i - t) + "px"));
    }
    function o(t, r, n) {
      function o(r, n) {
        return lr(e, le(t, r), "div", p, n);
      }
      function a(t, r, n) {
        var i = pr(e, p, null, t), a = "ltr" == r == ("after" == n) ? "left" : "right";
        return o("after" == n ? i.begin : i.end - (/\s/.test(p.text.charAt(i.end - 1)) ? 2 : 1), a)[a];
      }
      var s, c, p = J(l, t), h = p.text.length, m = L(p, l.direction);
      return T(m, r || 0, null == n ? h : n, function(e, t, l, p) {
        var g = "ltr" == l, v = o(e, g ? "left" : "right"), y = o(t - 1, g ? "right" : "left"), b = null == r && 0 == e, x = null == n && t == h, w = 0 == p, k = !m || p == m.length - 1;
        if (y.top - v.top <= 3) {
          var _ = (f ? x : b) && k, C = (f ? b : x) && w ? u : (g ? v : y).left, S = _ ? d : (g ? y : v).right;
          i(C, v.top, S - C, v.bottom);
        } else {
          var T, M, L, N;
          g ? (T = f && b && w ? u : v.left, M = f ? d : a(e, l, "before"), L = f ? u : a(t, l, "after"), 
          N = f && x && k ? d : y.right) : (T = f ? a(e, l, "before") : u, M = !f && b && w ? d : v.right, 
          L = !f && x && k ? u : y.left, N = f ? a(t, l, "after") : d), i(T, v.top, M - T, v.bottom), 
          v.bottom < y.top && i(u, v.bottom, null, y.top), i(L, y.top, N - L, y.bottom);
        }
        (!s || Ir(v, s) < 0) && (s = v), Ir(y, s) < 0 && (s = y), (!c || Ir(v, c) < 0) && (c = v), 
        Ir(y, c) < 0 && (c = y);
      }), {
        start: s,
        end: c
      };
    }
    var a = e.display, l = e.doc, s = document.createDocumentFragment(), c = qt(e.display), u = c.left, d = Math.max(a.sizerWidth, Rt(e) - a.sizer.offsetLeft) - c.right, f = "ltr" == l.direction, p = t.from(), h = t.to();
    if (p.line == h.line) o(p.line, p.ch, h.ch); else {
      var m = J(l, p.line), g = J(l, h.line), v = Xe(m) == Xe(g), y = o(p.line, p.ch, v ? m.text.length + 1 : null).end, b = o(h.line, v ? 0 : null, h.ch).start;
      v && (y.top < b.top - 2 ? (i(y.right, y.top, null, y.bottom), i(u, b.top, b.left, b.bottom)) : i(y.right, y.top, b.left - y.right, y.bottom)), 
      y.bottom < b.top && i(u, y.bottom, null, b.top);
    }
    r.appendChild(s);
  }
  function Wr(e) {
    if (e.state.focused) {
      var t = e.display;
      clearInterval(t.blinker);
      var r = !0;
      t.cursorDiv.style.visibility = "", e.options.cursorBlinkRate > 0 ? t.blinker = setInterval(function() {
        return t.cursorDiv.style.visibility = (r = !r) ? "" : "hidden";
      }, e.options.cursorBlinkRate) : e.options.cursorBlinkRate < 0 && (t.cursorDiv.style.visibility = "hidden");
    }
  }
  function qr(e) {
    e.state.focused || (e.display.input.focus(), Rr(e));
  }
  function Fr(e) {
    e.state.delayingBlurEvent = !0, setTimeout(function() {
      e.state.delayingBlurEvent && (e.state.delayingBlurEvent = !1, Hr(e));
    }, 100);
  }
  function Rr(e, t) {
    e.state.delayingBlurEvent && (e.state.delayingBlurEvent = !1), "nocursor" != e.options.readOnly && (e.state.focused || (z(e, "focus", e, t), 
    e.state.focused = !0, l(e.display.wrapper, "CodeMirror-focused"), e.curOp || e.display.selForContextMenu == e.doc.sel || (e.display.input.reset(), 
    Ca && setTimeout(function() {
      return e.display.input.reset(!0);
    }, 20)), e.display.input.receivedFocus()), Wr(e));
  }
  function Hr(e, t) {
    e.state.delayingBlurEvent || (e.state.focused && (z(e, "blur", e, t), e.state.focused = !1, 
    Ha(e.display.wrapper, "CodeMirror-focused")), clearInterval(e.display.blinker), 
    setTimeout(function() {
      e.state.focused || (e.display.shift = !1);
    }, 150));
  }
  function jr(e) {
    for (var t = e.display, r = t.lineDiv.offsetTop, n = 0; n < t.view.length; n++) {
      var i = t.view[n], o = e.options.lineWrapping, a = void 0, l = 0;
      if (!i.hidden) {
        if (ka && _a < 8) {
          var s = i.node.offsetTop + i.node.offsetHeight;
          a = s - r, r = s;
        } else {
          var c = i.node.getBoundingClientRect();
          a = c.bottom - c.top, !o && i.text.firstChild && (l = i.text.firstChild.getBoundingClientRect().right - c.left - 1);
        }
        var u = i.line.height - a;
        if ((u > .005 || u < -.005) && (re(i.line, a), Br(i.line), i.rest)) for (var d = 0; d < i.rest.length; d++) Br(i.rest[d]);
        if (l > e.display.sizerWidth) {
          var f = Math.ceil(l / br(e.display));
          f > e.display.maxLineLength && (e.display.maxLineLength = f, e.display.maxLine = i.line, 
          e.display.maxLineChanged = !0);
        }
      }
    }
  }
  function Br(e) {
    if (e.widgets) for (var t = 0; t < e.widgets.length; ++t) {
      var r = e.widgets[t], n = r.node.parentNode;
      n && (r.height = n.offsetHeight);
    }
  }
  function Ur(e, t, r) {
    var n = r && null != r.top ? Math.max(0, r.top) : e.scroller.scrollTop;
    n = Math.floor(n - Pt(e));
    var i = r && null != r.bottom ? r.bottom : n + e.wrapper.clientHeight, o = ie(t, n), a = ie(t, i);
    if (r && r.ensure) {
      var l = r.ensure.from.line, s = r.ensure.to.line;
      l < o ? (o = l, a = ie(t, rt(J(t, l)) + e.wrapper.clientHeight)) : Math.min(s, t.lastLine()) >= a && (o = ie(t, rt(J(t, s)) - e.wrapper.clientHeight), 
      a = s);
    }
    return {
      from: o,
      to: Math.max(a, o + 1)
    };
  }
  function Kr(e, t) {
    if (!O(e, "scrollCursorIntoView")) {
      var r = e.display, i = r.sizer.getBoundingClientRect(), o = null;
      if (t.top + i.top < 0 ? o = !0 : t.bottom + i.top > (window.innerHeight || document.documentElement.clientHeight) && (o = !1), 
      null != o && !Aa) {
        var a = n("div", "\u200b", null, "position: absolute;\n                         top: " + (t.top - r.viewOffset - Pt(e.display)) + "px;\n                         height: " + (t.bottom - t.top + Ft(e) + r.barHeight) + "px;\n                         left: " + t.left + "px; width: " + Math.max(2, t.right - t.left) + "px;");
        e.display.lineSpace.appendChild(a), a.scrollIntoView(o), e.display.lineSpace.removeChild(a);
      }
    }
  }
  function $r(e, t, r, n) {
    var i;
    null == n && (n = 0), e.options.lineWrapping || t != r || (r = "before" == (t = t.ch ? le(t.line, "before" == t.sticky ? t.ch - 1 : t.ch, "after") : t).sticky ? le(t.line, t.ch + 1, "before") : t);
    for (var o = 0; o < 5; o++) {
      var a = !1, l = sr(e, t), s = r && r != t ? sr(e, r) : l, c = Gr(e, i = {
        left: Math.min(l.left, s.left),
        top: Math.min(l.top, s.top) - n,
        right: Math.max(l.left, s.left),
        bottom: Math.max(l.bottom, s.bottom) + n
      }), u = e.doc.scrollTop, d = e.doc.scrollLeft;
      if (null != c.scrollTop && (tn(e, c.scrollTop), Math.abs(e.doc.scrollTop - u) > 1 && (a = !0)), 
      null != c.scrollLeft && (nn(e, c.scrollLeft), Math.abs(e.doc.scrollLeft - d) > 1 && (a = !0)), 
      !a) break;
    }
    return i;
  }
  function Vr(e, t) {
    var r = Gr(e, t);
    null != r.scrollTop && tn(e, r.scrollTop), null != r.scrollLeft && nn(e, r.scrollLeft);
  }
  function Gr(e, t) {
    var r = e.display, n = yr(e.display);
    t.top < 0 && (t.top = 0);
    var i = e.curOp && null != e.curOp.scrollTop ? e.curOp.scrollTop : r.scroller.scrollTop, o = Ht(e), a = {};
    t.bottom - t.top > o && (t.bottom = t.top + o);
    var l = e.doc.height + Wt(r), s = t.top < n, c = t.bottom > l - n;
    if (t.top < i) a.scrollTop = s ? 0 : t.top; else if (t.bottom > i + o) {
      var u = Math.min(t.top, (c ? l : t.bottom) - o);
      u != i && (a.scrollTop = u);
    }
    var d = e.curOp && null != e.curOp.scrollLeft ? e.curOp.scrollLeft : r.scroller.scrollLeft, f = Rt(e) - (e.options.fixedGutter ? r.gutters.offsetWidth : 0), p = t.right - t.left > f;
    return p && (t.right = t.left + f), t.left < 10 ? a.scrollLeft = 0 : t.left < d ? a.scrollLeft = Math.max(0, t.left - (p ? 0 : 10)) : t.right > f + d - 3 && (a.scrollLeft = t.right + (p ? 0 : 10) - f), 
    a;
  }
  function Xr(e, t) {
    null != t && (Jr(e), e.curOp.scrollTop = (null == e.curOp.scrollTop ? e.doc.scrollTop : e.curOp.scrollTop) + t);
  }
  function Zr(e) {
    Jr(e);
    var t = e.getCursor();
    e.curOp.scrollToPos = {
      from: t,
      to: t,
      margin: e.options.cursorScrollMargin
    };
  }
  function Yr(e, t, r) {
    null == t && null == r || Jr(e), null != t && (e.curOp.scrollLeft = t), null != r && (e.curOp.scrollTop = r);
  }
  function Qr(e, t) {
    Jr(e), e.curOp.scrollToPos = t;
  }
  function Jr(e) {
    var t = e.curOp.scrollToPos;
    t && (e.curOp.scrollToPos = null, en(e, cr(e, t.from), cr(e, t.to), t.margin));
  }
  function en(e, t, r, n) {
    var i = Gr(e, {
      left: Math.min(t.left, r.left),
      top: Math.min(t.top, r.top) - n,
      right: Math.max(t.right, r.right),
      bottom: Math.max(t.bottom, r.bottom) + n
    });
    Yr(e, i.scrollLeft, i.scrollTop);
  }
  function tn(e, t) {
    Math.abs(e.doc.scrollTop - t) < 2 || (ya || Ln(e, {
      top: t
    }), rn(e, t, !0), ya && Ln(e), wn(e, 100));
  }
  function rn(e, t, r) {
    t = Math.max(0, Math.min(e.display.scroller.scrollHeight - e.display.scroller.clientHeight, t)), 
    (e.display.scroller.scrollTop != t || r) && (e.doc.scrollTop = t, e.display.scrollbars.setScrollTop(t), 
    e.display.scroller.scrollTop != t && (e.display.scroller.scrollTop = t));
  }
  function nn(e, t, r, n) {
    t = Math.max(0, Math.min(t, e.display.scroller.scrollWidth - e.display.scroller.clientWidth)), 
    (r ? t == e.doc.scrollLeft : Math.abs(e.doc.scrollLeft - t) < 2) && !n || (e.doc.scrollLeft = t, 
    On(e), e.display.scroller.scrollLeft != t && (e.display.scroller.scrollLeft = t), 
    e.display.scrollbars.setScrollLeft(t));
  }
  function on(e) {
    var t = e.display, r = t.gutters.offsetWidth, n = Math.round(e.doc.height + Wt(e.display));
    return {
      clientHeight: t.scroller.clientHeight,
      viewHeight: t.wrapper.clientHeight,
      scrollWidth: t.scroller.scrollWidth,
      clientWidth: t.scroller.clientWidth,
      viewWidth: t.wrapper.clientWidth,
      barLeft: e.options.fixedGutter ? r : 0,
      docHeight: n,
      scrollHeight: n + Ft(e) + t.barHeight,
      nativeBarWidth: t.nativeBarWidth,
      gutterWidth: r
    };
  }
  function an(e, t) {
    t || (t = on(e));
    var r = e.display.barWidth, n = e.display.barHeight;
    ln(e, t);
    for (var i = 0; i < 4 && r != e.display.barWidth || n != e.display.barHeight; i++) r != e.display.barWidth && e.options.lineWrapping && jr(e), 
    ln(e, on(e)), r = e.display.barWidth, n = e.display.barHeight;
  }
  function ln(e, t) {
    var r = e.display, n = r.scrollbars.update(t);
    r.sizer.style.paddingRight = (r.barWidth = n.right) + "px", r.sizer.style.paddingBottom = (r.barHeight = n.bottom) + "px", 
    r.heightForcer.style.borderBottom = n.bottom + "px solid transparent", n.right && n.bottom ? (r.scrollbarFiller.style.display = "block", 
    r.scrollbarFiller.style.height = n.bottom + "px", r.scrollbarFiller.style.width = n.right + "px") : r.scrollbarFiller.style.display = "", 
    n.bottom && e.options.coverGutterNextToScrollbar && e.options.fixedGutter ? (r.gutterFiller.style.display = "block", 
    r.gutterFiller.style.height = n.bottom + "px", r.gutterFiller.style.width = t.gutterWidth + "px") : r.gutterFiller.style.display = "";
  }
  function sn(e) {
    e.display.scrollbars && (e.display.scrollbars.clear(), e.display.scrollbars.addClass && Ha(e.display.wrapper, e.display.scrollbars.addClass)), 
    e.display.scrollbars = new Ll[e.options.scrollbarStyle](function(t) {
      e.display.wrapper.insertBefore(t, e.display.scrollbarFiller), il(t, "mousedown", function() {
        e.state.focused && setTimeout(function() {
          return e.display.input.focus();
        }, 0);
      }), t.setAttribute("cm-not-content", "true");
    }, function(t, r) {
      "horizontal" == r ? nn(e, t) : tn(e, t);
    }, e), e.display.scrollbars.addClass && l(e.display.wrapper, e.display.scrollbars.addClass);
  }
  function cn(e) {
    e.curOp = {
      cm: e,
      viewChanged: !1,
      startHeight: e.doc.height,
      forceUpdate: !1,
      updateInput: 0,
      typing: !1,
      changeObjs: null,
      cursorActivityHandlers: null,
      cursorActivityCalled: 0,
      selectionChanged: !1,
      updateMaxLine: !1,
      scrollLeft: null,
      scrollTop: null,
      scrollToPos: null,
      focus: !1,
      id: ++Nl
    }, vt(e.curOp);
  }
  function un(e) {
    var t = e.curOp;
    t && bt(t, function(e) {
      for (var t = 0; t < e.ops.length; t++) e.ops[t].cm.curOp = null;
      dn(e);
    });
  }
  function dn(e) {
    for (var t = e.ops, r = 0; r < t.length; r++) fn(t[r]);
    for (var n = 0; n < t.length; n++) pn(t[n]);
    for (var i = 0; i < t.length; i++) hn(t[i]);
    for (var o = 0; o < t.length; o++) mn(t[o]);
    for (var a = 0; a < t.length; a++) gn(t[a]);
  }
  function fn(e) {
    var t = e.cm, r = t.display;
    _n(t), e.updateMaxLine && it(t), e.mustUpdate = e.viewChanged || e.forceUpdate || null != e.scrollTop || e.scrollToPos && (e.scrollToPos.from.line < r.viewFrom || e.scrollToPos.to.line >= r.viewTo) || r.maxLineChanged && t.options.lineWrapping, 
    e.update = e.mustUpdate && new Al(t, e.mustUpdate && {
      top: e.scrollTop,
      ensure: e.scrollToPos
    }, e.forceUpdate);
  }
  function pn(e) {
    e.updatedDisplay = e.mustUpdate && Tn(e.cm, e.update);
  }
  function hn(e) {
    var t = e.cm, r = t.display;
    e.updatedDisplay && jr(t), e.barMeasure = on(t), r.maxLineChanged && !t.options.lineWrapping && (e.adjustWidthTo = Kt(t, r.maxLine, r.maxLine.text.length).left + 3, 
    t.display.sizerWidth = e.adjustWidthTo, e.barMeasure.scrollWidth = Math.max(r.scroller.clientWidth, r.sizer.offsetLeft + e.adjustWidthTo + Ft(t) + t.display.barWidth), 
    e.maxScrollLeft = Math.max(0, r.sizer.offsetLeft + e.adjustWidthTo - Rt(t))), (e.updatedDisplay || e.selectionChanged) && (e.preparedSelection = r.input.prepareSelection());
  }
  function mn(e) {
    var t = e.cm;
    null != e.adjustWidthTo && (t.display.sizer.style.minWidth = e.adjustWidthTo + "px", 
    e.maxScrollLeft < t.doc.scrollLeft && nn(t, Math.min(t.display.scroller.scrollLeft, e.maxScrollLeft), !0), 
    t.display.maxLineChanged = !1);
    var r = e.focus && e.focus == a();
    e.preparedSelection && t.display.input.showSelection(e.preparedSelection, r), (e.updatedDisplay || e.startHeight != t.doc.height) && an(t, e.barMeasure), 
    e.updatedDisplay && zn(t, e.barMeasure), e.selectionChanged && Wr(t), t.state.focused && e.updateInput && t.display.input.reset(e.typing), 
    r && qr(e.cm);
  }
  function gn(e) {
    var t = e.cm, r = t.display, n = t.doc;
    (e.updatedDisplay && Mn(t, e.update), null == r.wheelStartX || null == e.scrollTop && null == e.scrollLeft && !e.scrollToPos || (r.wheelStartX = r.wheelStartY = null), 
    null != e.scrollTop && rn(t, e.scrollTop, e.forceScroll), null != e.scrollLeft && nn(t, e.scrollLeft, !0, !0), 
    e.scrollToPos) && Kr(t, $r(t, he(n, e.scrollToPos.from), he(n, e.scrollToPos.to), e.scrollToPos.margin));
    var i = e.maybeHiddenMarkers, o = e.maybeUnhiddenMarkers;
    if (i) for (var a = 0; a < i.length; ++a) i[a].lines.length || z(i[a], "hide");
    if (o) for (var l = 0; l < o.length; ++l) o[l].lines.length && z(o[l], "unhide");
    r.wrapper.offsetHeight && (n.scrollTop = t.display.scroller.scrollTop), e.changeObjs && z(t, "changes", t, e.changeObjs), 
    e.update && e.update.finish();
  }
  function vn(e, t) {
    if (e.curOp) return t();
    cn(e);
    try {
      return t();
    } finally {
      un(e);
    }
  }
  function yn(e, t) {
    return function() {
      if (e.curOp) return t.apply(e, arguments);
      cn(e);
      try {
        return t.apply(e, arguments);
      } finally {
        un(e);
      }
    };
  }
  function bn(e) {
    return function() {
      if (this.curOp) return e.apply(this, arguments);
      cn(this);
      try {
        return e.apply(this, arguments);
      } finally {
        un(this);
      }
    };
  }
  function xn(e) {
    return function() {
      var t = this.cm;
      if (!t || t.curOp) return e.apply(this, arguments);
      cn(t);
      try {
        return e.apply(this, arguments);
      } finally {
        un(t);
      }
    };
  }
  function wn(e, t) {
    e.doc.highlightFrontier < e.display.viewTo && e.state.highlight.set(t, c(kn, e));
  }
  function kn(e) {
    var t = e.doc;
    if (!(t.highlightFrontier >= e.display.viewTo)) {
      var r = +new Date() + e.options.workTime, n = be(e, t.highlightFrontier), i = [];
      t.iter(n.line, Math.min(t.first + t.size, e.display.viewTo + 500), function(o) {
        if (n.line >= e.display.viewFrom) {
          var a = o.styles, l = o.text.length > e.options.maxHighlightLength ? Z(t.mode, n.state) : null, s = ve(e, o, n, !0);
          l && (n.state = l), o.styles = s.styles;
          var c = o.styleClasses, u = s.classes;
          u ? o.styleClasses = u : c && (o.styleClasses = null);
          for (var d = !a || a.length != o.styles.length || c != u && (!c || !u || c.bgClass != u.bgClass || c.textClass != u.textClass), f = 0; !d && f < a.length; ++f) d = a[f] != o.styles[f];
          d && i.push(n.line), o.stateAfter = n.save(), n.nextLine();
        } else o.text.length <= e.options.maxHighlightLength && xe(e, o.text, n), o.stateAfter = n.line % 5 == 0 ? n.save() : null, 
        n.nextLine();
        if (+new Date() > r) return wn(e, e.options.workDelay), !0;
      }), t.highlightFrontier = n.line, t.modeFrontier = Math.max(t.modeFrontier, n.line), 
      i.length && vn(e, function() {
        for (var t = 0; t < i.length; t++) Mr(e, i[t], "text");
      });
    }
  }
  function _n(e) {
    var t = e.display;
    !t.scrollbarsClipped && t.scroller.offsetWidth && (t.nativeBarWidth = t.scroller.offsetWidth - t.scroller.clientWidth, 
    t.heightForcer.style.height = Ft(e) + "px", t.sizer.style.marginBottom = -t.nativeBarWidth + "px", 
    t.sizer.style.borderRightWidth = Ft(e) + "px", t.scrollbarsClipped = !0);
  }
  function Cn(e) {
    if (e.hasFocus()) return null;
    var t = a();
    if (!t || !o(e.display.lineDiv, t)) return null;
    var r = {
      activeElt: t
    };
    if (window.getSelection) {
      var n = window.getSelection();
      n.anchorNode && n.extend && o(e.display.lineDiv, n.anchorNode) && (r.anchorNode = n.anchorNode, 
      r.anchorOffset = n.anchorOffset, r.focusNode = n.focusNode, r.focusOffset = n.focusOffset);
    }
    return r;
  }
  function Sn(e) {
    if (e && e.activeElt && e.activeElt != a() && (e.activeElt.focus(), !/^(INPUT|TEXTAREA)$/.test(e.activeElt.nodeName) && e.anchorNode && o(document.body, e.anchorNode) && o(document.body, e.focusNode))) {
      var t = window.getSelection(), r = document.createRange();
      r.setEnd(e.anchorNode, e.anchorOffset), r.collapse(!1), t.removeAllRanges(), t.addRange(r), 
      t.extend(e.focusNode, e.focusOffset);
    }
  }
  function Tn(e, r) {
    var n = e.display, i = e.doc;
    if (r.editorIsHidden) return Lr(e), !1;
    if (!r.force && r.visible.from >= n.viewFrom && r.visible.to <= n.viewTo && (null == n.updateLineNumbers || n.updateLineNumbers >= n.viewTo) && n.renderedView == n.view && 0 == zr(e)) return !1;
    Dn(e) && (Lr(e), r.dims = xr(e));
    var o = i.first + i.size, a = Math.max(r.visible.from - e.options.viewportMargin, i.first), l = Math.min(o, r.visible.to + e.options.viewportMargin);
    n.viewFrom < a && a - n.viewFrom < 20 && (a = Math.max(i.first, n.viewFrom)), n.viewTo > l && n.viewTo - l < 20 && (l = Math.min(o, n.viewTo)), 
    yl && (a = Qe(e.doc, a), l = Je(e.doc, l));
    var s = a != n.viewFrom || l != n.viewTo || n.lastWrapHeight != r.wrapperHeight || n.lastWrapWidth != r.wrapperWidth;
    Ar(e, a, l), n.viewOffset = rt(J(e.doc, n.viewFrom)), e.display.mover.style.top = n.viewOffset + "px";
    var c = zr(e);
    if (!s && 0 == c && !r.force && n.renderedView == n.view && (null == n.updateLineNumbers || n.updateLineNumbers >= n.viewTo)) return !1;
    var u = Cn(e);
    return c > 4 && (n.lineDiv.style.display = "none"), Nn(e, n.updateLineNumbers, r.dims), 
    c > 4 && (n.lineDiv.style.display = ""), n.renderedView = n.view, Sn(u), t(n.cursorDiv), 
    t(n.selectionDiv), n.gutters.style.height = n.sizer.style.minHeight = 0, s && (n.lastWrapHeight = r.wrapperHeight, 
    n.lastWrapWidth = r.wrapperWidth, wn(e, 400)), n.updateLineNumbers = null, !0;
  }
  function Mn(e, t) {
    for (var r = t.viewport, n = !0; ;n = !1) {
      if (n && e.options.lineWrapping && t.oldDisplayWidth != Rt(e)) n && (t.visible = Ur(e.display, e.doc, r)); else if (r && null != r.top && (r = {
        top: Math.min(e.doc.height + Wt(e.display) - Ht(e), r.top)
      }), t.visible = Ur(e.display, e.doc, r), t.visible.from >= e.display.viewFrom && t.visible.to <= e.display.viewTo) break;
      if (!Tn(e, t)) break;
      jr(e);
      var i = on(e);
      Or(e), an(e, i), zn(e, i), t.force = !1;
    }
    t.signal(e, "update", e), e.display.viewFrom == e.display.reportedViewFrom && e.display.viewTo == e.display.reportedViewTo || (t.signal(e, "viewportChange", e, e.display.viewFrom, e.display.viewTo), 
    e.display.reportedViewFrom = e.display.viewFrom, e.display.reportedViewTo = e.display.viewTo);
  }
  function Ln(e, t) {
    var r = new Al(e, t);
    if (Tn(e, r)) {
      jr(e), Mn(e, r);
      var n = on(e);
      Or(e), an(e, n), zn(e, n), r.finish();
    }
  }
  function Nn(e, r, n) {
    function i(t) {
      var r = t.nextSibling;
      return Ca && Ea && e.display.currentWheelTarget == t ? t.style.display = "none" : t.parentNode.removeChild(t), 
      r;
    }
    for (var o = e.display, a = e.options.lineNumbers, l = o.lineDiv, s = l.firstChild, c = o.view, u = o.viewFrom, d = 0; d < c.length; d++) {
      var p = c[d];
      if (p.hidden) ; else if (p.node && p.node.parentNode == l) {
        for (;s != p.node; ) s = i(s);
        var h = a && null != r && r <= u && p.lineNumber;
        p.changes && (f(p.changes, "gutter") > -1 && (h = !1), kt(e, p, u, n)), h && (t(p.lineNumber), 
        p.lineNumber.appendChild(document.createTextNode(ae(e.options, u)))), s = p.node.nextSibling;
      } else {
        var m = At(e, p, u, n);
        l.insertBefore(m, s);
      }
      u += p.size;
    }
    for (;s; ) s = i(s);
  }
  function An(e) {
    var t = e.gutters.offsetWidth;
    e.sizer.style.marginLeft = t + "px";
  }
  function zn(e, t) {
    e.display.sizer.style.minHeight = t.docHeight + "px", e.display.heightForcer.style.top = t.docHeight + "px", 
    e.display.gutters.style.height = t.docHeight + e.display.barHeight + Ft(e) + "px";
  }
  function On(e) {
    var t = e.display, r = t.view;
    if (t.alignWidgets || t.gutters.firstChild && e.options.fixedGutter) {
      for (var n = wr(t) - t.scroller.scrollLeft + e.doc.scrollLeft, i = t.gutters.offsetWidth, o = n + "px", a = 0; a < r.length; a++) if (!r[a].hidden) {
        e.options.fixedGutter && (r[a].gutter && (r[a].gutter.style.left = o), r[a].gutterBackground && (r[a].gutterBackground.style.left = o));
        var l = r[a].alignable;
        if (l) for (var s = 0; s < l.length; s++) l[s].style.left = o;
      }
      e.options.fixedGutter && (t.gutters.style.left = n + i + "px");
    }
  }
  function Dn(e) {
    if (!e.options.lineNumbers) return !1;
    var t = e.doc, r = ae(e.options, t.first + t.size - 1), i = e.display;
    if (r.length != i.lineNumChars) {
      var o = i.measure.appendChild(n("div", [ n("div", r) ], "CodeMirror-linenumber CodeMirror-gutter-elt")), a = o.firstChild.offsetWidth, l = o.offsetWidth - a;
      return i.lineGutter.style.width = "", i.lineNumInnerWidth = Math.max(a, i.lineGutter.offsetWidth - l) + 1, 
      i.lineNumWidth = i.lineNumInnerWidth + l, i.lineNumChars = i.lineNumInnerWidth ? r.length : -1, 
      i.lineGutter.style.width = i.lineNumWidth + "px", An(e.display), !0;
    }
    return !1;
  }
  function En(e, t) {
    for (var r = [], n = !1, i = 0; i < e.length; i++) {
      var o = e[i], a = null;
      if ("string" != typeof o && (a = o.style, o = o.className), "CodeMirror-linenumbers" == o) {
        if (!t) continue;
        n = !0;
      }
      r.push({
        className: o,
        style: a
      });
    }
    return t && !n && r.push({
      className: "CodeMirror-linenumbers",
      style: null
    }), r;
  }
  function In(e) {
    var r = e.gutters, i = e.gutterSpecs;
    t(r), e.lineGutter = null;
    for (var o = 0; o < i.length; ++o) {
      var a = i[o], l = a.className, s = a.style, c = r.appendChild(n("div", null, "CodeMirror-gutter " + l));
      s && (c.style.cssText = s), "CodeMirror-linenumbers" == l && (e.lineGutter = c, 
      c.style.width = (e.lineNumWidth || 1) + "px");
    }
    r.style.display = i.length ? "" : "none", An(e);
  }
  function Pn(e) {
    In(e.display), Tr(e), On(e);
  }
  function Wn(e, t, r, o) {
    var a = this;
    this.input = r, a.scrollbarFiller = n("div", null, "CodeMirror-scrollbar-filler"), 
    a.scrollbarFiller.setAttribute("cm-not-content", "true"), a.gutterFiller = n("div", null, "CodeMirror-gutter-filler"), 
    a.gutterFiller.setAttribute("cm-not-content", "true"), a.lineDiv = i("div", null, "CodeMirror-code"), 
    a.selectionDiv = n("div", null, null, "position: relative; z-index: 1"), a.cursorDiv = n("div", null, "CodeMirror-cursors"), 
    a.measure = n("div", null, "CodeMirror-measure"), a.lineMeasure = n("div", null, "CodeMirror-measure"), 
    a.lineSpace = i("div", [ a.measure, a.lineMeasure, a.selectionDiv, a.cursorDiv, a.lineDiv ], null, "position: relative; outline: none");
    var l = i("div", [ a.lineSpace ], "CodeMirror-lines");
    a.mover = n("div", [ l ], null, "position: relative"), a.sizer = n("div", [ a.mover ], "CodeMirror-sizer"), 
    a.sizerWidth = null, a.heightForcer = n("div", null, null, "position: absolute; height: " + Va + "px; width: 1px;"), 
    a.gutters = n("div", null, "CodeMirror-gutters"), a.lineGutter = null, a.scroller = n("div", [ a.sizer, a.heightForcer, a.gutters ], "CodeMirror-scroll"), 
    a.scroller.setAttribute("tabIndex", "-1"), a.wrapper = n("div", [ a.scrollbarFiller, a.gutterFiller, a.scroller ], "CodeMirror"), 
    ka && _a < 8 && (a.gutters.style.zIndex = -1, a.scroller.style.paddingRight = 0), 
    Ca || ya && Da || (a.scroller.draggable = !0), e && (e.appendChild ? e.appendChild(a.wrapper) : e(a.wrapper)), 
    a.viewFrom = a.viewTo = t.first, a.reportedViewFrom = a.reportedViewTo = t.first, 
    a.view = [], a.renderedView = null, a.externalMeasured = null, a.viewOffset = 0, 
    a.lastWrapHeight = a.lastWrapWidth = 0, a.updateLineNumbers = null, a.nativeBarWidth = a.barHeight = a.barWidth = 0, 
    a.scrollbarsClipped = !1, a.lineNumWidth = a.lineNumInnerWidth = a.lineNumChars = null, 
    a.alignWidgets = !1, a.cachedCharWidth = a.cachedTextHeight = a.cachedPaddingH = null, 
    a.maxLine = null, a.maxLineLength = 0, a.maxLineChanged = !1, a.wheelDX = a.wheelDY = a.wheelStartX = a.wheelStartY = null, 
    a.shift = !1, a.selForContextMenu = null, a.activeTouch = null, a.gutterSpecs = En(o.gutters, o.lineNumbers), 
    In(a), r.init(a);
  }
  function qn(e) {
    var t = e.wheelDeltaX, r = e.wheelDeltaY;
    return null == t && e.detail && e.axis == e.HORIZONTAL_AXIS && (t = e.detail), null == r && e.detail && e.axis == e.VERTICAL_AXIS ? r = e.detail : null == r && (r = e.wheelDelta), 
    {
      x: t,
      y: r
    };
  }
  function Fn(e) {
    var t = qn(e);
    return t.x *= Ol, t.y *= Ol, t;
  }
  function Rn(e, t) {
    var r = qn(t), n = r.x, i = r.y, o = e.display, a = o.scroller, l = a.scrollWidth > a.clientWidth, s = a.scrollHeight > a.clientHeight;
    if (n && l || i && s) {
      if (i && Ea && Ca) e: for (var c = t.target, u = o.view; c != a; c = c.parentNode) for (var d = 0; d < u.length; d++) if (u[d].node == c) {
        e.display.currentWheelTarget = c;
        break e;
      }
      if (n && !ya && !Ma && null != Ol) return i && s && tn(e, Math.max(0, a.scrollTop + i * Ol)), 
      nn(e, Math.max(0, a.scrollLeft + n * Ol)), (!i || i && s) && P(t), void (o.wheelStartX = null);
      if (i && null != Ol) {
        var f = i * Ol, p = e.doc.scrollTop, h = p + o.wrapper.clientHeight;
        f < 0 ? p = Math.max(0, p + f - 50) : h = Math.min(e.doc.height, h + f + 50), Ln(e, {
          top: p,
          bottom: h
        });
      }
      zl < 20 && (null == o.wheelStartX ? (o.wheelStartX = a.scrollLeft, o.wheelStartY = a.scrollTop, 
      o.wheelDX = n, o.wheelDY = i, setTimeout(function() {
        if (null != o.wheelStartX) {
          var e = a.scrollLeft - o.wheelStartX, t = a.scrollTop - o.wheelStartY, r = t && o.wheelDY && t / o.wheelDY || e && o.wheelDX && e / o.wheelDX;
          o.wheelStartX = o.wheelStartY = null, r && (Ol = (Ol * zl + r) / (zl + 1), ++zl);
        }
      }, 200)) : (o.wheelDX += n, o.wheelDY += i));
    }
  }
  function Hn(e, t, r) {
    var n = e && e.options.selectionsMayTouch, i = t[r];
    t.sort(function(e, t) {
      return se(e.from(), t.from());
    }), r = f(t, i);
    for (var o = 1; o < t.length; o++) {
      var a = t[o], l = t[o - 1], s = se(l.to(), a.from());
      if (n && !a.empty() ? s > 0 : s >= 0) {
        var c = fe(l.from(), a.from()), u = de(l.to(), a.to()), d = l.empty() ? a.from() == a.head : l.from() == l.head;
        o <= r && --r, t.splice(--o, 2, new El(d ? u : c, d ? c : u));
      }
    }
    return new Dl(t, r);
  }
  function jn(e, t) {
    return new Dl([ new El(e, t || e) ], 0);
  }
  function Bn(e) {
    return e.text ? le(e.from.line + e.text.length - 1, m(e.text).length + (1 == e.text.length ? e.from.ch : 0)) : e.to;
  }
  function Un(e, t) {
    if (se(e, t.from) < 0) return e;
    if (se(e, t.to) <= 0) return Bn(t);
    var r = e.line + t.text.length - (t.to.line - t.from.line) - 1, n = e.ch;
    return e.line == t.to.line && (n += Bn(t).ch - t.to.ch), le(r, n);
  }
  function Kn(e, t) {
    for (var r = [], n = 0; n < e.sel.ranges.length; n++) {
      var i = e.sel.ranges[n];
      r.push(new El(Un(i.anchor, t), Un(i.head, t)));
    }
    return Hn(e.cm, r, e.sel.primIndex);
  }
  function $n(e, t, r) {
    return e.line == t.line ? le(r.line, e.ch - t.ch + r.ch) : le(r.line + (e.line - t.line), e.ch);
  }
  function Vn(e, t, r) {
    for (var n = [], i = le(e.first, 0), o = i, a = 0; a < t.length; a++) {
      var l = t[a], s = $n(l.from, i, o), c = $n(Bn(l), i, o);
      if (i = l.to, o = c, "around" == r) {
        var u = e.sel.ranges[a], d = se(u.head, u.anchor) < 0;
        n[a] = new El(d ? c : s, d ? s : c);
      } else n[a] = new El(s, s);
    }
    return new Dl(n, e.sel.primIndex);
  }
  function Gn(e) {
    e.doc.mode = G(e.options, e.doc.modeOption), Xn(e);
  }
  function Xn(e) {
    e.doc.iter(function(e) {
      e.stateAfter && (e.stateAfter = null), e.styles && (e.styles = null);
    }), e.doc.modeFrontier = e.doc.highlightFrontier = e.doc.first, wn(e, 100), e.state.modeGen++, 
    e.curOp && Tr(e);
  }
  function Zn(e, t) {
    return 0 == t.from.ch && 0 == t.to.ch && "" == m(t.text) && (!e.cm || e.cm.options.wholeLineUpdateBefore);
  }
  function Yn(e, t, r, n) {
    function i(e) {
      return r ? r[e] : null;
    }
    function o(e, r, i) {
      ot(e, r, i, n), xt(e, "change", e, t);
    }
    function a(e, t) {
      for (var r = [], o = e; o < t; ++o) r.push(new bl(c[o], i(o), n));
      return r;
    }
    var l = t.from, s = t.to, c = t.text, u = J(e, l.line), d = J(e, s.line), f = m(c), p = i(c.length - 1), h = s.line - l.line;
    if (t.full) e.insert(0, a(0, c.length)), e.remove(c.length, e.size - c.length); else if (Zn(e, t)) {
      var g = a(0, c.length - 1);
      o(d, d.text, p), h && e.remove(l.line, h), g.length && e.insert(l.line, g);
    } else if (u == d) if (1 == c.length) o(u, u.text.slice(0, l.ch) + f + u.text.slice(s.ch), p); else {
      var v = a(1, c.length - 1);
      v.push(new bl(f + u.text.slice(s.ch), p, n)), o(u, u.text.slice(0, l.ch) + c[0], i(0)), 
      e.insert(l.line + 1, v);
    } else if (1 == c.length) o(u, u.text.slice(0, l.ch) + c[0] + d.text.slice(s.ch), i(0)), 
    e.remove(l.line + 1, h); else {
      o(u, u.text.slice(0, l.ch) + c[0], i(0)), o(d, f + d.text.slice(s.ch), p);
      var y = a(1, c.length - 1);
      h > 1 && e.remove(l.line + 1, h - 1), e.insert(l.line + 1, y);
    }
    xt(e, "change", e, t);
  }
  function Qn(e, t, r) {
    function n(e, i, o) {
      if (e.linked) for (var a = 0; a < e.linked.length; ++a) {
        var l = e.linked[a];
        if (l.doc != i) {
          var s = o && l.sharedHist;
          r && !s || (t(l.doc, s), n(l.doc, e, s));
        }
      }
    }
    n(e, null, !0);
  }
  function Jn(e, t) {
    if (t.cm) throw new Error("This document is already in use.");
    e.doc = t, t.cm = e, _r(e), Gn(e), ei(e), e.options.lineWrapping || it(e), e.options.mode = t.modeOption, 
    Tr(e);
  }
  function ei(e) {
    ("rtl" == e.doc.direction ? l : Ha)(e.display.lineDiv, "CodeMirror-rtl");
  }
  function ti(e) {
    vn(e, function() {
      ei(e), Tr(e);
    });
  }
  function ri(e) {
    this.done = [], this.undone = [], this.undoDepth = Infinity, this.lastModTime = this.lastSelTime = 0, 
    this.lastOp = this.lastSelOp = null, this.lastOrigin = this.lastSelOrigin = null, 
    this.generation = this.maxGeneration = e || 1;
  }
  function ni(e, t) {
    var r = {
      from: ue(t.from),
      to: Bn(t),
      text: ee(e, t.from, t.to)
    };
    return ui(e, r, t.from.line, t.to.line + 1), Qn(e, function(e) {
      return ui(e, r, t.from.line, t.to.line + 1);
    }, !0), r;
  }
  function ii(e) {
    for (;e.length; ) {
      if (!m(e).ranges) break;
      e.pop();
    }
  }
  function oi(e, t) {
    return t ? (ii(e.done), m(e.done)) : e.done.length && !m(e.done).ranges ? m(e.done) : e.done.length > 1 && !e.done[e.done.length - 2].ranges ? (e.done.pop(), 
    m(e.done)) : void 0;
  }
  function ai(e, t, r, n) {
    var i = e.history;
    i.undone.length = 0;
    var o, a, l = +new Date();
    if ((i.lastOp == n || i.lastOrigin == t.origin && t.origin && ("+" == t.origin.charAt(0) && i.lastModTime > l - (e.cm ? e.cm.options.historyEventDelay : 500) || "*" == t.origin.charAt(0))) && (o = oi(i, i.lastOp == n))) a = m(o.changes), 
    0 == se(t.from, t.to) && 0 == se(t.from, a.to) ? a.to = Bn(t) : o.changes.push(ni(e, t)); else {
      var s = m(i.done);
      for (s && s.ranges || ci(e.sel, i.done), o = {
        changes: [ ni(e, t) ],
        generation: i.generation
      }, i.done.push(o); i.done.length > i.undoDepth; ) i.done.shift(), i.done[0].ranges || i.done.shift();
    }
    i.done.push(r), i.generation = ++i.maxGeneration, i.lastModTime = i.lastSelTime = l, 
    i.lastOp = i.lastSelOp = n, i.lastOrigin = i.lastSelOrigin = t.origin, a || z(e, "historyAdded");
  }
  function li(e, t, r, n) {
    var i = t.charAt(0);
    return "*" == i || "+" == i && r.ranges.length == n.ranges.length && r.somethingSelected() == n.somethingSelected() && new Date() - e.history.lastSelTime <= (e.cm ? e.cm.options.historyEventDelay : 500);
  }
  function si(e, t, r, n) {
    var i = e.history, o = n && n.origin;
    r == i.lastSelOp || o && i.lastSelOrigin == o && (i.lastModTime == i.lastSelTime && i.lastOrigin == o || li(e, o, m(i.done), t)) ? i.done[i.done.length - 1] = t : ci(t, i.done), 
    i.lastSelTime = +new Date(), i.lastSelOrigin = o, i.lastSelOp = r, n && !1 !== n.clearRedo && ii(i.undone);
  }
  function ci(e, t) {
    var r = m(t);
    r && r.ranges && r.equals(e) || t.push(e);
  }
  function ui(e, t, r, n) {
    var i = t["spans_" + e.id], o = 0;
    e.iter(Math.max(e.first, r), Math.min(e.first + e.size, n), function(r) {
      r.markedSpans && ((i || (i = t["spans_" + e.id] = {}))[o] = r.markedSpans), ++o;
    });
  }
  function di(e) {
    if (!e) return null;
    for (var t, r = 0; r < e.length; ++r) e[r].marker.explicitlyCleared ? t || (t = e.slice(0, r)) : t && t.push(e[r]);
    return t ? t.length ? t : null : e;
  }
  function fi(e, t) {
    var r = t["spans_" + e.id];
    if (!r) return null;
    for (var n = [], i = 0; i < t.text.length; ++i) n.push(di(r[i]));
    return n;
  }
  function pi(e, t) {
    var r = fi(e, t), n = Pe(e, t);
    if (!r) return n;
    if (!n) return r;
    for (var i = 0; i < r.length; ++i) {
      var o = r[i], a = n[i];
      if (o && a) e: for (var l = 0; l < a.length; ++l) {
        for (var s = a[l], c = 0; c < o.length; ++c) if (o[c].marker == s.marker) continue e;
        o.push(s);
      } else a && (r[i] = a);
    }
    return r;
  }
  function hi(e, t, r) {
    for (var n = [], i = 0; i < e.length; ++i) {
      var o = e[i];
      if (o.ranges) n.push(r ? Dl.prototype.deepCopy.call(o) : o); else {
        var a = o.changes, l = [];
        n.push({
          changes: l
        });
        for (var s = 0; s < a.length; ++s) {
          var c = a[s], u = void 0;
          if (l.push({
            from: c.from,
            to: c.to,
            text: c.text
          }), t) for (var d in c) (u = d.match(/^spans_(\d+)$/)) && f(t, Number(u[1])) > -1 && (m(l)[d] = c[d], 
          delete c[d]);
        }
      }
    }
    return n;
  }
  function mi(e, t, r, n) {
    if (n) {
      var i = e.anchor;
      if (r) {
        var o = se(t, i) < 0;
        o != se(r, i) < 0 ? (i = t, t = r) : o != se(t, r) < 0 && (t = r);
      }
      return new El(i, t);
    }
    return new El(r || t, t);
  }
  function gi(e, t, r, n, i) {
    null == i && (i = e.cm && (e.cm.display.shift || e.extend)), ki(e, new Dl([ mi(e.sel.primary(), t, r, i) ], 0), n);
  }
  function vi(e, t, r) {
    for (var n = [], i = e.cm && (e.cm.display.shift || e.extend), o = 0; o < e.sel.ranges.length; o++) n[o] = mi(e.sel.ranges[o], t[o], null, i);
    ki(e, Hn(e.cm, n, e.sel.primIndex), r);
  }
  function yi(e, t, r, n) {
    var i = e.sel.ranges.slice(0);
    i[t] = r, ki(e, Hn(e.cm, i, e.sel.primIndex), n);
  }
  function bi(e, t, r, n) {
    ki(e, jn(t, r), n);
  }
  function xi(e, t, r) {
    var n = {
      ranges: t.ranges,
      update: function(t) {
        this.ranges = [];
        for (var r = 0; r < t.length; r++) this.ranges[r] = new El(he(e, t[r].anchor), he(e, t[r].head));
      },
      origin: r && r.origin
    };
    return z(e, "beforeSelectionChange", e, n), e.cm && z(e.cm, "beforeSelectionChange", e.cm, n), 
    n.ranges != t.ranges ? Hn(e.cm, n.ranges, n.ranges.length - 1) : t;
  }
  function wi(e, t, r) {
    var n = e.history.done, i = m(n);
    i && i.ranges ? (n[n.length - 1] = t, _i(e, t, r)) : ki(e, t, r);
  }
  function ki(e, t, r) {
    _i(e, t, r), si(e, e.sel, e.cm ? e.cm.curOp.id : NaN, r);
  }
  function _i(e, t, r) {
    (E(e, "beforeSelectionChange") || e.cm && E(e.cm, "beforeSelectionChange")) && (t = xi(e, t, r)), 
    Ci(e, Ti(e, t, r && r.bias || (se(t.primary().head, e.sel.primary().head) < 0 ? -1 : 1), !0)), 
    r && !1 === r.scroll || !e.cm || Zr(e.cm);
  }
  function Ci(e, t) {
    t.equals(e.sel) || (e.sel = t, e.cm && (e.cm.curOp.updateInput = 1, e.cm.curOp.selectionChanged = !0, 
    D(e.cm)), xt(e, "cursorActivity", e));
  }
  function Si(e) {
    Ci(e, Ti(e, e.sel, null, !1));
  }
  function Ti(e, t, r, n) {
    for (var i, o = 0; o < t.ranges.length; o++) {
      var a = t.ranges[o], l = t.ranges.length == e.sel.ranges.length && e.sel.ranges[o], s = Li(e, a.anchor, l && l.anchor, r, n), c = Li(e, a.head, l && l.head, r, n);
      (i || s != a.anchor || c != a.head) && (i || (i = t.ranges.slice(0, o)), i[o] = new El(s, c));
    }
    return i ? Hn(e.cm, i, t.primIndex) : t;
  }
  function Mi(e, t, r, n, i) {
    var o = J(e, t.line);
    if (o.markedSpans) for (var a = 0; a < o.markedSpans.length; ++a) {
      var l = o.markedSpans[a], s = l.marker, c = "selectLeft" in s ? !s.selectLeft : s.inclusiveLeft, u = "selectRight" in s ? !s.selectRight : s.inclusiveRight;
      if ((null == l.from || (c ? l.from <= t.ch : l.from < t.ch)) && (null == l.to || (u ? l.to >= t.ch : l.to > t.ch))) {
        if (i && (z(s, "beforeCursorEnter"), s.explicitlyCleared)) {
          if (o.markedSpans) {
            --a;
            continue;
          }
          break;
        }
        if (!s.atomic) continue;
        if (r) {
          var d = s.find(n < 0 ? 1 : -1), f = void 0;
          if ((n < 0 ? u : c) && (d = Ni(e, d, -n, d && d.line == t.line ? o : null)), d && d.line == t.line && (f = se(d, r)) && (n < 0 ? f < 0 : f > 0)) return Mi(e, d, t, n, i);
        }
        var p = s.find(n < 0 ? -1 : 1);
        return (n < 0 ? c : u) && (p = Ni(e, p, n, p.line == t.line ? o : null)), p ? Mi(e, p, t, n, i) : null;
      }
    }
    return t;
  }
  function Li(e, t, r, n, i) {
    var o = n || 1, a = Mi(e, t, r, o, i) || !i && Mi(e, t, r, o, !0) || Mi(e, t, r, -o, i) || !i && Mi(e, t, r, -o, !0);
    return a || (e.cantEdit = !0, le(e.first, 0));
  }
  function Ni(e, t, r, n) {
    return r < 0 && 0 == t.ch ? t.line > e.first ? he(e, le(t.line - 1)) : null : r > 0 && t.ch == (n || J(e, t.line)).text.length ? t.line < e.first + e.size - 1 ? le(t.line + 1, 0) : null : new le(t.line, t.ch + r);
  }
  function Ai(e) {
    e.setSelection(le(e.firstLine(), 0), le(e.lastLine()), Xa);
  }
  function zi(e, t, r) {
    var n = {
      canceled: !1,
      from: t.from,
      to: t.to,
      text: t.text,
      origin: t.origin,
      cancel: function() {
        return n.canceled = !0;
      }
    };
    return r && (n.update = function(t, r, i, o) {
      t && (n.from = he(e, t)), r && (n.to = he(e, r)), i && (n.text = i), o !== undefined && (n.origin = o);
    }), z(e, "beforeChange", e, n), e.cm && z(e.cm, "beforeChange", e.cm, n), n.canceled ? (e.cm && (e.cm.curOp.updateInput = 2), 
    null) : {
      from: n.from,
      to: n.to,
      text: n.text,
      origin: n.origin
    };
  }
  function Oi(e, t, r) {
    if (e.cm) {
      if (!e.cm.curOp) return yn(e.cm, Oi)(e, t, r);
      if (e.cm.state.suppressEdits) return;
    }
    if (!(E(e, "beforeChange") || e.cm && E(e.cm, "beforeChange")) || (t = zi(e, t, !0))) {
      var n = vl && !r && qe(e, t.from, t.to);
      if (n) for (var i = n.length - 1; i >= 0; --i) Di(e, {
        from: n[i].from,
        to: n[i].to,
        text: i ? [ "" ] : t.text,
        origin: t.origin
      }); else Di(e, t);
    }
  }
  function Di(e, t) {
    if (1 != t.text.length || "" != t.text[0] || 0 != se(t.from, t.to)) {
      var r = Kn(e, t);
      ai(e, t, r, e.cm ? e.cm.curOp.id : NaN), Pi(e, t, r, Pe(e, t));
      var n = [];
      Qn(e, function(e, r) {
        r || -1 != f(n, e.history) || (Hi(e.history, t), n.push(e.history)), Pi(e, t, null, Pe(e, t));
      });
    }
  }
  function Ei(e, t, r) {
    var n = e.cm && e.cm.state.suppressEdits;
    if (!n || r) {
      for (var i, o = e.history, a = e.sel, l = "undo" == t ? o.done : o.undone, s = "undo" == t ? o.undone : o.done, c = 0; c < l.length && (i = l[c], 
      r ? !i.ranges || i.equals(e.sel) : i.ranges); c++) ;
      if (c != l.length) {
        for (o.lastOrigin = o.lastSelOrigin = null; ;) {
          if (!(i = l.pop()).ranges) {
            if (n) return void l.push(i);
            break;
          }
          if (ci(i, s), r && !i.equals(e.sel)) return void ki(e, i, {
            clearRedo: !1
          });
          a = i;
        }
        var u = [];
        ci(a, s), s.push({
          changes: u,
          generation: o.generation
        }), o.generation = i.generation || ++o.maxGeneration;
        for (var d = E(e, "beforeChange") || e.cm && E(e.cm, "beforeChange"), p = function(r) {
          var n = i.changes[r];
          if (n.origin = t, d && !zi(e, n, !1)) return l.length = 0, {};
          u.push(ni(e, n));
          var o = r ? Kn(e, n) : m(l);
          Pi(e, n, o, pi(e, n)), !r && e.cm && e.cm.scrollIntoView({
            from: n.from,
            to: Bn(n)
          });
          var a = [];
          Qn(e, function(e, t) {
            t || -1 != f(a, e.history) || (Hi(e.history, n), a.push(e.history)), Pi(e, n, null, pi(e, n));
          });
        }, h = i.changes.length - 1; h >= 0; --h) {
          var g = p(h);
          if (g) return g.v;
        }
      }
    }
  }
  function Ii(e, t) {
    if (0 != t && (e.first += t, e.sel = new Dl(g(e.sel.ranges, function(e) {
      return new El(le(e.anchor.line + t, e.anchor.ch), le(e.head.line + t, e.head.ch));
    }), e.sel.primIndex), e.cm)) {
      Tr(e.cm, e.first, e.first - t, t);
      for (var r = e.cm.display, n = r.viewFrom; n < r.viewTo; n++) Mr(e.cm, n, "gutter");
    }
  }
  function Pi(e, t, r, n) {
    if (e.cm && !e.cm.curOp) return yn(e.cm, Pi)(e, t, r, n);
    if (t.to.line < e.first) Ii(e, t.text.length - 1 - (t.to.line - t.from.line)); else if (!(t.from.line > e.lastLine())) {
      if (t.from.line < e.first) {
        var i = t.text.length - 1 - (e.first - t.from.line);
        Ii(e, i), t = {
          from: le(e.first, 0),
          to: le(t.to.line + i, t.to.ch),
          text: [ m(t.text) ],
          origin: t.origin
        };
      }
      var o = e.lastLine();
      t.to.line > o && (t = {
        from: t.from,
        to: le(o, J(e, o).text.length),
        text: [ t.text[0] ],
        origin: t.origin
      }), t.removed = ee(e, t.from, t.to), r || (r = Kn(e, t)), e.cm ? Wi(e.cm, t, n) : Yn(e, t, n), 
      _i(e, r, Xa), e.cantEdit && Li(e, le(e.firstLine(), 0)) && (e.cantEdit = !1);
    }
  }
  function Wi(e, t, r) {
    var n = e.doc, i = e.display, o = t.from, a = t.to, l = !1, s = o.line;
    e.options.lineWrapping || (s = ne(Xe(J(n, o.line))), n.iter(s, a.line + 1, function(e) {
      if (e == i.maxLine) return l = !0, !0;
    })), n.sel.contains(t.from, t.to) > -1 && D(e), Yn(n, t, r, kr(e)), e.options.lineWrapping || (n.iter(s, o.line + t.text.length, function(e) {
      var t = nt(e);
      t > i.maxLineLength && (i.maxLine = e, i.maxLineLength = t, i.maxLineChanged = !0, 
      l = !1);
    }), l && (e.curOp.updateMaxLine = !0)), Me(n, o.line), wn(e, 400);
    var c = t.text.length - (a.line - o.line) - 1;
    t.full ? Tr(e) : o.line != a.line || 1 != t.text.length || Zn(e.doc, t) ? Tr(e, o.line, a.line + 1, c) : Mr(e, o.line, "text");
    var u = E(e, "changes"), d = E(e, "change");
    if (d || u) {
      var f = {
        from: o,
        to: a,
        text: t.text,
        removed: t.removed,
        origin: t.origin
      };
      d && xt(e, "change", e, f), u && (e.curOp.changeObjs || (e.curOp.changeObjs = [])).push(f);
    }
    e.display.selForContextMenu = null;
  }
  function qi(e, t, r, n, i) {
    var o;
    n || (n = r), se(n, r) < 0 && (r = (o = [ n, r ])[0], n = o[1]), "string" == typeof t && (t = e.splitLines(t)), 
    Oi(e, {
      from: r,
      to: n,
      text: t,
      origin: i
    });
  }
  function Fi(e, t, r, n) {
    r < e.line ? e.line += n : t < e.line && (e.line = t, e.ch = 0);
  }
  function Ri(e, t, r, n) {
    for (var i = 0; i < e.length; ++i) {
      var o = e[i], a = !0;
      if (o.ranges) {
        o.copied || ((o = e[i] = o.deepCopy()).copied = !0);
        for (var l = 0; l < o.ranges.length; l++) Fi(o.ranges[l].anchor, t, r, n), Fi(o.ranges[l].head, t, r, n);
      } else {
        for (var s = 0; s < o.changes.length; ++s) {
          var c = o.changes[s];
          if (r < c.from.line) c.from = le(c.from.line + n, c.from.ch), c.to = le(c.to.line + n, c.to.ch); else if (t <= c.to.line) {
            a = !1;
            break;
          }
        }
        a || (e.splice(0, i + 1), i = 0);
      }
    }
  }
  function Hi(e, t) {
    var r = t.from.line, n = t.to.line, i = t.text.length - (n - r) - 1;
    Ri(e.done, r, n, i), Ri(e.undone, r, n, i);
  }
  function ji(e, t, r, n) {
    var i = t, o = t;
    return "number" == typeof t ? o = J(e, pe(e, t)) : i = ne(t), null == i ? null : (n(o, i) && e.cm && Mr(e.cm, i, r), 
    o);
  }
  function Bi(e) {
    this.lines = e, this.parent = null;
    for (var t = 0, r = 0; r < e.length; ++r) e[r].parent = this, t += e[r].height;
    this.height = t;
  }
  function Ui(e) {
    this.children = e;
    for (var t = 0, r = 0, n = 0; n < e.length; ++n) {
      var i = e[n];
      t += i.chunkSize(), r += i.height, i.parent = this;
    }
    this.size = t, this.height = r, this.parent = null;
  }
  function Ki(e, t, r) {
    rt(t) < (e.curOp && e.curOp.scrollTop || e.doc.scrollTop) && Xr(e, r);
  }
  function $i(e, t, r, n) {
    var i = new Il(e, r, n), o = e.cm;
    return o && i.noHScroll && (o.display.alignWidgets = !0), ji(e, t, "widget", function(t) {
      var r = t.widgets || (t.widgets = []);
      if (null == i.insertAt ? r.push(i) : r.splice(Math.min(r.length - 1, Math.max(0, i.insertAt)), 0, i), 
      i.line = t, o && !et(e, t)) {
        var n = rt(t) < e.scrollTop;
        re(t, t.height + Et(i)), n && Xr(o, i.height), o.curOp.forceUpdate = !0;
      }
      return !0;
    }), o && xt(o, "lineWidgetAdded", o, i, "number" == typeof t ? t : ne(t)), i;
  }
  function Vi(e, t, r, n, o) {
    if (n && n.shared) return Gi(e, t, r, n, o);
    if (e.cm && !e.cm.curOp) return yn(e.cm, Vi)(e, t, r, n, o);
    var a = new Wl(e, o), l = se(t, r);
    if (n && u(n, a, !1), l > 0 || 0 == l && !1 !== a.clearWhenEmpty) return a;
    if (a.replacedWith && (a.collapsed = !0, a.widgetNode = i("span", [ a.replacedWith ], "CodeMirror-widget"), 
    n.handleMouseEvents || a.widgetNode.setAttribute("cm-ignore-events", "true"), n.insertLeft && (a.widgetNode.insertLeft = !0)), 
    a.collapsed) {
      if (Ge(e, t.line, t, r, a) || t.line != r.line && Ge(e, r.line, t, r, a)) throw new Error("Inserting collapsed marker partially overlapping an existing one");
      Ne();
    }
    a.addToHistory && ai(e, {
      from: t,
      to: r,
      origin: "markText"
    }, e.sel, NaN);
    var s, c = t.line, d = e.cm;
    if (e.iter(c, r.line + 1, function(e) {
      d && a.collapsed && !d.options.lineWrapping && Xe(e) == d.display.maxLine && (s = !0), 
      a.collapsed && c != t.line && re(e, 0), De(e, new Ae(a, c == t.line ? t.ch : null, c == r.line ? r.ch : null)), 
      ++c;
    }), a.collapsed && e.iter(t.line, r.line + 1, function(t) {
      et(e, t) && re(t, 0);
    }), a.clearOnEnter && il(a, "beforeCursorEnter", function() {
      return a.clear();
    }), a.readOnly && (Le(), (e.history.done.length || e.history.undone.length) && e.clearHistory()), 
    a.collapsed && (a.id = ++Pl, a.atomic = !0), d) {
      if (s && (d.curOp.updateMaxLine = !0), a.collapsed) Tr(d, t.line, r.line + 1); else if (a.className || a.startStyle || a.endStyle || a.css || a.attributes || a.title) for (var f = t.line; f <= r.line; f++) Mr(d, f, "text");
      a.atomic && Si(d.doc), xt(d, "markerAdded", d, a);
    }
    return a;
  }
  function Gi(e, t, r, n, i) {
    (n = u(n)).shared = !1;
    var o = [ Vi(e, t, r, n, i) ], a = o[0], l = n.widgetNode;
    return Qn(e, function(e) {
      l && (n.widgetNode = l.cloneNode(!0)), o.push(Vi(e, he(e, t), he(e, r), n, i));
      for (var s = 0; s < e.linked.length; ++s) if (e.linked[s].isParent) return;
      a = m(o);
    }), new ql(o, a);
  }
  function Xi(e) {
    return e.findMarks(le(e.first, 0), e.clipPos(le(e.lastLine())), function(e) {
      return e.parent;
    });
  }
  function Zi(e, t) {
    for (var r = 0; r < t.length; r++) {
      var n = t[r], i = n.find(), o = e.clipPos(i.from), a = e.clipPos(i.to);
      if (se(o, a)) {
        var l = Vi(e, o, a, n.primary, n.primary.type);
        n.markers.push(l), l.parent = n;
      }
    }
  }
  function Yi(e) {
    for (var t = function(t) {
      var r = e[t], n = [ r.primary.doc ];
      Qn(r.primary.doc, function(e) {
        return n.push(e);
      });
      for (var i = 0; i < r.markers.length; i++) {
        var o = r.markers[i];
        -1 == f(n, o.doc) && (o.parent = null, r.markers.splice(i--, 1));
      }
    }, r = 0; r < e.length; r++) t(r);
  }
  function Qi(e) {
    var t = this;
    if (to(t), !O(t, e) && !It(t.display, e)) {
      P(e), ka && (Hl = +new Date());
      var r = Cr(t, e, !0), n = e.dataTransfer.files;
      if (r && !t.isReadOnly()) if (n && n.length && window.FileReader && window.File) for (var i = n.length, o = Array(i), a = 0, l = function() {
        ++a == i && yn(t, function() {
          var e = {
            from: r = he(t.doc, r),
            to: r,
            text: t.doc.splitLines(o.filter(function(e) {
              return null != e;
            }).join(t.doc.lineSeparator())),
            origin: "paste"
          };
          Oi(t.doc, e), wi(t.doc, jn(he(t.doc, r), he(t.doc, Bn(e))));
        })();
      }, s = function(e, r) {
        if (t.options.allowDropFileTypes && -1 == f(t.options.allowDropFileTypes, e.type)) l(); else {
          var n = new FileReader();
          n.onerror = function() {
            return l();
          }, n.onload = function() {
            var e = n.result;
            /[\x00-\x08\x0e-\x1f]{2}/.test(e) ? l() : (o[r] = e, l());
          }, n.readAsText(e);
        }
      }, c = 0; c < n.length; c++) s(n[c], c); else {
        if (t.state.draggingText && t.doc.sel.contains(r) > -1) return t.state.draggingText(e), 
        void setTimeout(function() {
          return t.display.input.focus();
        }, 20);
        try {
          var u = e.dataTransfer.getData("Text");
          if (u) {
            var d;
            if (t.state.draggingText && !t.state.draggingText.copy && (d = t.listSelections()), 
            _i(t.doc, jn(r, r)), d) for (var p = 0; p < d.length; ++p) qi(t.doc, "", d[p].anchor, d[p].head, "drag");
            t.replaceSelection(u, "around", "paste"), t.display.input.focus();
          }
        } catch (e) {}
      }
    }
  }
  function Ji(e, t) {
    if (ka && (!e.state.draggingText || +new Date() - Hl < 100)) F(t); else if (!O(e, t) && !It(e.display, t) && (t.dataTransfer.setData("Text", e.getSelection()), 
    t.dataTransfer.effectAllowed = "copyMove", t.dataTransfer.setDragImage && !La)) {
      var r = n("img", null, null, "position: fixed; left: 0; top: 0;");
      r.src = "data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==", 
      Ma && (r.width = r.height = 1, e.display.wrapper.appendChild(r), r._top = r.offsetTop), 
      t.dataTransfer.setDragImage(r, 0, 0), Ma && r.parentNode.removeChild(r);
    }
  }
  function eo(e, t) {
    var i = Cr(e, t);
    if (i) {
      var o = document.createDocumentFragment();
      Er(e, i, o), e.display.dragCursor || (e.display.dragCursor = n("div", null, "CodeMirror-cursors CodeMirror-dragcursors"), 
      e.display.lineSpace.insertBefore(e.display.dragCursor, e.display.cursorDiv)), r(e.display.dragCursor, o);
    }
  }
  function to(e) {
    e.display.dragCursor && (e.display.lineSpace.removeChild(e.display.dragCursor), 
    e.display.dragCursor = null);
  }
  function ro(e) {
    if (document.getElementsByClassName) {
      for (var t = document.getElementsByClassName("CodeMirror"), r = [], n = 0; n < t.length; n++) {
        var i = t[n].CodeMirror;
        i && r.push(i);
      }
      r.length && r[0].operation(function() {
        for (var t = 0; t < r.length; t++) e(r[t]);
      });
    }
  }
  function no() {
    jl || (io(), jl = !0);
  }
  function io() {
    var e;
    il(window, "resize", function() {
      null == e && (e = setTimeout(function() {
        e = null, ro(oo);
      }, 100));
    }), il(window, "blur", function() {
      return ro(Hr);
    });
  }
  function oo(e) {
    var t = e.display;
    t.cachedCharWidth = t.cachedTextHeight = t.cachedPaddingH = null, t.scrollbarsClipped = !1, 
    e.setSize();
  }
  function ao(e) {
    var t, r, n, i, o = e.split(/-(?!$)/);
    e = o[o.length - 1];
    for (var a = 0; a < o.length - 1; a++) {
      var l = o[a];
      if (/^(cmd|meta|m)$/i.test(l)) i = !0; else if (/^a(lt)?$/i.test(l)) t = !0; else if (/^(c|ctrl|control)$/i.test(l)) r = !0; else {
        if (!/^s(hift)?$/i.test(l)) throw new Error("Unrecognized modifier name: " + l);
        n = !0;
      }
    }
    return t && (e = "Alt-" + e), r && (e = "Ctrl-" + e), i && (e = "Cmd-" + e), n && (e = "Shift-" + e), 
    e;
  }
  function lo(e) {
    var t = {};
    for (var r in e) if (e.hasOwnProperty(r)) {
      var n = e[r];
      if (/^(name|fallthrough|(de|at)tach)$/.test(r)) continue;
      if ("..." == n) {
        delete e[r];
        continue;
      }
      for (var i = g(r.split(" "), ao), o = 0; o < i.length; o++) {
        var a = void 0, l = void 0;
        o == i.length - 1 ? (l = i.join(" "), a = n) : (l = i.slice(0, o + 1).join(" "), 
        a = "...");
        var s = t[l];
        if (s) {
          if (s != a) throw new Error("Inconsistent bindings for " + l);
        } else t[l] = a;
      }
      delete e[r];
    }
    for (var c in t) e[c] = t[c];
    return e;
  }
  function so(e, t, r, n) {
    var i = (t = po(t)).call ? t.call(e, n) : t[e];
    if (!1 === i) return "nothing";
    if ("..." === i) return "multi";
    if (null != i && r(i)) return "handled";
    if (t.fallthrough) {
      if ("[object Array]" != Object.prototype.toString.call(t.fallthrough)) return so(e, t.fallthrough, r, n);
      for (var o = 0; o < t.fallthrough.length; o++) {
        var a = so(e, t.fallthrough[o], r, n);
        if (a) return a;
      }
    }
  }
  function co(e) {
    var t = "string" == typeof e ? e : Bl[e.keyCode];
    return "Ctrl" == t || "Alt" == t || "Shift" == t || "Mod" == t;
  }
  function uo(e, t, r) {
    var n = e;
    return t.altKey && "Alt" != n && (e = "Alt-" + e), (Fa ? t.metaKey : t.ctrlKey) && "Ctrl" != n && (e = "Ctrl-" + e), 
    (Fa ? t.ctrlKey : t.metaKey) && "Cmd" != n && (e = "Cmd-" + e), !r && t.shiftKey && "Shift" != n && (e = "Shift-" + e), 
    e;
  }
  function fo(e, t) {
    if (Ma && 34 == e.keyCode && e.char) return !1;
    var r = Bl[e.keyCode];
    return null != r && !e.altGraphKey && (3 == e.keyCode && e.code && (r = e.code), 
    uo(r, e, t));
  }
  function po(e) {
    return "string" == typeof e ? Vl[e] : e;
  }
  function ho(e, t) {
    for (var r = e.doc.sel.ranges, n = [], i = 0; i < r.length; i++) {
      for (var o = t(r[i]); n.length && se(o.from, m(n).to) <= 0; ) {
        var a = n.pop();
        if (se(a.from, o.from) < 0) {
          o.from = a.from;
          break;
        }
      }
      n.push(o);
    }
    vn(e, function() {
      for (var t = n.length - 1; t >= 0; t--) qi(e.doc, "", n[t].from, n[t].to, "+delete");
      Zr(e);
    });
  }
  function mo(e, t, r) {
    var n = C(e.text, t + r, r);
    return n < 0 || n > e.text.length ? null : n;
  }
  function go(e, t, r) {
    var n = mo(e, t.ch, r);
    return null == n ? null : new le(t.line, n, r < 0 ? "after" : "before");
  }
  function vo(e, t, r, n, i) {
    if (e) {
      "rtl" == t.doc.direction && (i = -i);
      var o = L(r, t.doc.direction);
      if (o) {
        var a, l = i < 0 ? m(o) : o[0], s = i < 0 == (1 == l.level) ? "after" : "before";
        if (l.level > 0 || "rtl" == t.doc.direction) {
          var c = Vt(t, r);
          a = i < 0 ? r.text.length - 1 : 0;
          var u = Gt(t, c, a).top;
          a = S(function(e) {
            return Gt(t, c, e).top == u;
          }, i < 0 == (1 == l.level) ? l.from : l.to - 1, a), "before" == s && (a = mo(r, a, 1));
        } else a = i < 0 ? l.to : l.from;
        return new le(n, a, s);
      }
    }
    return new le(n, i < 0 ? r.text.length : 0, i < 0 ? "before" : "after");
  }
  function yo(e, t, r, n) {
    var i = L(t, e.doc.direction);
    if (!i) return go(t, r, n);
    r.ch >= t.text.length ? (r.ch = t.text.length, r.sticky = "before") : r.ch <= 0 && (r.ch = 0, 
    r.sticky = "after");
    var o = M(i, r.ch, r.sticky), a = i[o];
    if ("ltr" == e.doc.direction && a.level % 2 == 0 && (n > 0 ? a.to > r.ch : a.from < r.ch)) return go(t, r, n);
    var l, s = function(e, r) {
      return mo(t, e instanceof le ? e.ch : e, r);
    }, c = function(r) {
      return e.options.lineWrapping ? (l = l || Vt(e, t), pr(e, t, l, r)) : {
        begin: 0,
        end: t.text.length
      };
    }, u = c("before" == r.sticky ? s(r, -1) : r.ch);
    if ("rtl" == e.doc.direction || 1 == a.level) {
      var d = 1 == a.level == n < 0, f = s(r, d ? 1 : -1);
      if (null != f && (d ? f <= a.to && f <= u.end : f >= a.from && f >= u.begin)) {
        var p = d ? "before" : "after";
        return new le(r.line, f, p);
      }
    }
    var h = function(e, t, n) {
      for (var o = function(e, t) {
        return t ? new le(r.line, s(e, 1), "before") : new le(r.line, e, "after");
      }; e >= 0 && e < i.length; e += t) {
        var a = i[e], l = t > 0 == (1 != a.level), c = l ? n.begin : s(n.end, -1);
        if (a.from <= c && c < a.to) return o(c, l);
        if (c = l ? a.from : s(a.to, -1), n.begin <= c && c < n.end) return o(c, l);
      }
    }, m = h(o + n, n, u);
    if (m) return m;
    var g = n > 0 ? u.end : s(u.begin, -1);
    return null == g || n > 0 && g == t.text.length || !(m = h(n > 0 ? 0 : i.length - 1, n, c(g))) ? null : m;
  }
  function bo(e, t) {
    var r = J(e.doc, t), n = Xe(r);
    return n != r && (t = ne(n)), vo(!0, e, n, t, 1);
  }
  function xo(e, t) {
    var r = J(e.doc, t), n = Ze(r);
    return n != r && (t = ne(n)), vo(!0, e, r, t, -1);
  }
  function wo(e, t) {
    var r = bo(e, t.line), n = J(e.doc, r.line), i = L(n, e.doc.direction);
    if (!i || 0 == i[0].level) {
      var o = Math.max(r.ch, n.text.search(/\S/)), a = t.line == r.line && t.ch <= o && t.ch;
      return le(r.line, a ? 0 : o, r.sticky);
    }
    return r;
  }
  function ko(e, t, r) {
    if ("string" == typeof t && !(t = Zl[t])) return !1;
    e.display.input.ensurePolled();
    var n = e.display.shift, i = !1;
    try {
      e.isReadOnly() && (e.state.suppressEdits = !0), r && (e.display.shift = !1), i = t(e) != Ga;
    } finally {
      e.display.shift = n, e.state.suppressEdits = !1;
    }
    return i;
  }
  function _o(e, t, r) {
    for (var n = 0; n < e.state.keyMaps.length; n++) {
      var i = so(t, e.state.keyMaps[n], r, e);
      if (i) return i;
    }
    return e.options.extraKeys && so(t, e.options.extraKeys, r, e) || so(t, e.options.keyMap, r, e);
  }
  function Co(e, t, r, n) {
    var i = e.state.keySeq;
    if (i) {
      if (co(t)) return "handled";
      if (/\'$/.test(t) ? e.state.keySeq = null : Yl.set(50, function() {
        e.state.keySeq == i && (e.state.keySeq = null, e.display.input.reset());
      }), So(e, i + " " + t, r, n)) return !0;
    }
    return So(e, t, r, n);
  }
  function So(e, t, r, n) {
    var i = _o(e, t, n);
    return "multi" == i && (e.state.keySeq = t), "handled" == i && xt(e, "keyHandled", e, t, r), 
    "handled" != i && "multi" != i || (P(r), Wr(e)), !!i;
  }
  function To(e, t) {
    var r = fo(t, !0);
    return !!r && (t.shiftKey && !e.state.keySeq ? Co(e, "Shift-" + r, t, function(t) {
      return ko(e, t, !0);
    }) || Co(e, r, t, function(t) {
      if ("string" == typeof t ? /^go[A-Z]/.test(t) : t.motion) return ko(e, t);
    }) : Co(e, r, t, function(t) {
      return ko(e, t);
    }));
  }
  function Mo(e, t, r) {
    return Co(e, "'" + r + "'", t, function(t) {
      return ko(e, t, !0);
    });
  }
  function Lo(e) {
    var t = this;
    if (!(e.target && e.target != t.display.input.getField() || (t.curOp.focus = a(), 
    O(t, e)))) {
      ka && _a < 11 && 27 == e.keyCode && (e.returnValue = !1);
      var r = e.keyCode;
      t.display.shift = 16 == r || e.shiftKey;
      var n = To(t, e);
      Ma && (Ql = n ? r : null, !n && 88 == r && !sl && (Ea ? e.metaKey : e.ctrlKey) && t.replaceSelection("", null, "cut")), 
      ya && !Ea && !n && 46 == r && e.shiftKey && !e.ctrlKey && document.execCommand && document.execCommand("cut"), 
      18 != r || /\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className) || No(t);
    }
  }
  function No(e) {
    function t(e) {
      18 != e.keyCode && e.altKey || (Ha(r, "CodeMirror-crosshair"), A(document, "keyup", t), 
      A(document, "mouseover", t));
    }
    var r = e.display.lineDiv;
    l(r, "CodeMirror-crosshair"), il(document, "keyup", t), il(document, "mouseover", t);
  }
  function Ao(e) {
    16 == e.keyCode && (this.doc.sel.shift = !1), O(this, e);
  }
  function zo(e) {
    var t = this;
    if (!(e.target && e.target != t.display.input.getField() || It(t.display, e) || O(t, e) || e.ctrlKey && !e.altKey || Ea && e.metaKey)) {
      var r = e.keyCode, n = e.charCode;
      if (Ma && r == Ql) return Ql = null, void P(e);
      if (!Ma || e.which && !(e.which < 10) || !To(t, e)) {
        var i = String.fromCharCode(null == n ? r : n);
        "\b" != i && (Mo(t, e, i) || t.display.input.onKeyPress(e));
      }
    }
  }
  function Oo(e, t) {
    var r = +new Date();
    return Xl && Xl.compare(r, e, t) ? (Gl = Xl = null, "triple") : Gl && Gl.compare(r, e, t) ? (Xl = new es(r, e, t), 
    Gl = null, "double") : (Gl = new es(r, e, t), Xl = null, "single");
  }
  function Do(e) {
    var t = this, r = t.display;
    if (!(O(t, e) || r.activeTouch && r.input.supportsTouch())) if (r.input.ensurePolled(), 
    r.shift = e.shiftKey, It(r, e)) Ca || (r.scroller.draggable = !1, setTimeout(function() {
      return r.scroller.draggable = !0;
    }, 100)); else if (!jo(t, e)) {
      var n = Cr(t, e), i = H(e), o = n ? Oo(n, i) : "single";
      window.focus(), 1 == i && t.state.selectingText && t.state.selectingText(e), n && Eo(t, i, n, o, e) || (1 == i ? n ? Po(t, n, o, e) : R(e) == r.scroller && P(e) : 2 == i ? (n && gi(t.doc, n), 
      setTimeout(function() {
        return r.input.focus();
      }, 20)) : 3 == i && (Ra ? t.display.input.onContextMenu(e) : Fr(t)));
    }
  }
  function Eo(e, t, r, n, i) {
    var o = "Click";
    return "double" == n ? o = "Double" + o : "triple" == n && (o = "Triple" + o), Co(e, uo(o = (1 == t ? "Left" : 2 == t ? "Middle" : "Right") + o, i), i, function(t) {
      if ("string" == typeof t && (t = Zl[t]), !t) return !1;
      var n = !1;
      try {
        e.isReadOnly() && (e.state.suppressEdits = !0), n = t(e, r) != Ga;
      } finally {
        e.state.suppressEdits = !1;
      }
      return n;
    });
  }
  function Io(e, t, r) {
    var n = e.getOption("configureMouse"), i = n ? n(e, t, r) : {};
    if (null == i.unit) {
      var o = Ia ? r.shiftKey && r.metaKey : r.altKey;
      i.unit = o ? "rectangle" : "single" == t ? "char" : "double" == t ? "word" : "line";
    }
    return (null == i.extend || e.doc.extend) && (i.extend = e.doc.extend || r.shiftKey), 
    null == i.addNew && (i.addNew = Ea ? r.metaKey : r.ctrlKey), null == i.moveOnDrag && (i.moveOnDrag = !(Ea ? r.altKey : r.ctrlKey)), 
    i;
  }
  function Po(e, t, r, n) {
    ka ? setTimeout(c(qr, e), 0) : e.curOp.focus = a();
    var i, o = Io(e, r, n), l = e.doc.sel;
    e.options.dragDrop && ol && !e.isReadOnly() && "single" == r && (i = l.contains(t)) > -1 && (se((i = l.ranges[i]).from(), t) < 0 || t.xRel > 0) && (se(i.to(), t) > 0 || t.xRel < 0) ? Wo(e, n, t, o) : Fo(e, n, t, o);
  }
  function Wo(e, t, r, n) {
    var i = e.display, o = !1, a = yn(e, function(t) {
      Ca && (i.scroller.draggable = !1), e.state.draggingText = !1, A(i.wrapper.ownerDocument, "mouseup", a), 
      A(i.wrapper.ownerDocument, "mousemove", l), A(i.scroller, "dragstart", s), A(i.scroller, "drop", a), 
      o || (P(t), n.addNew || gi(e.doc, r, null, null, n.extend), Ca && !La || ka && 9 == _a ? setTimeout(function() {
        i.wrapper.ownerDocument.body.focus({
          preventScroll: !0
        }), i.input.focus();
      }, 20) : i.input.focus());
    }), l = function(e) {
      o = o || Math.abs(t.clientX - e.clientX) + Math.abs(t.clientY - e.clientY) >= 10;
    }, s = function() {
      return o = !0;
    };
    Ca && (i.scroller.draggable = !0), e.state.draggingText = a, a.copy = !n.moveOnDrag, 
    i.scroller.dragDrop && i.scroller.dragDrop(), il(i.wrapper.ownerDocument, "mouseup", a), 
    il(i.wrapper.ownerDocument, "mousemove", l), il(i.scroller, "dragstart", s), il(i.scroller, "drop", a), 
    Fr(e), setTimeout(function() {
      return i.input.focus();
    }, 20);
  }
  function qo(e, t, r) {
    if ("char" == r) return new El(t, t);
    if ("word" == r) return e.findWordAt(t);
    if ("line" == r) return new El(le(t.line, 0), he(e.doc, le(t.line + 1, 0)));
    var n = r(e, t);
    return new El(n.from, n.to);
  }
  function Fo(e, t, r, n) {
    function i(t) {
      if (0 != se(v, t)) if (v = t, "rectangle" == n.unit) {
        for (var i = [], o = e.options.tabSize, a = d(J(c, r.line).text, r.ch, o), l = d(J(c, t.line).text, t.ch, o), s = Math.min(a, l), m = Math.max(a, l), g = Math.min(r.line, t.line), y = Math.min(e.lastLine(), Math.max(r.line, t.line)); g <= y; g++) {
          var b = J(c, g).text, x = p(b, s, o);
          s == m ? i.push(new El(le(g, x), le(g, x))) : b.length > x && i.push(new El(le(g, x), le(g, p(b, m, o))));
        }
        i.length || i.push(new El(r, r)), ki(c, Hn(e, h.ranges.slice(0, f).concat(i), f), {
          origin: "*mouse",
          scroll: !1
        }), e.scrollIntoView(t);
      } else {
        var w, k = u, _ = qo(e, t, n.unit), C = k.anchor;
        se(_.anchor, C) > 0 ? (w = _.head, C = fe(k.from(), _.anchor)) : (w = _.anchor, 
        C = de(k.to(), _.head));
        var S = h.ranges.slice(0);
        S[f] = Ro(e, new El(he(c, C), w)), ki(c, Hn(e, S, f), Za);
      }
    }
    function o(t) {
      var r = ++b, l = Cr(e, t, !0, "rectangle" == n.unit);
      if (l) if (0 != se(l, v)) {
        e.curOp.focus = a(), i(l);
        var u = Ur(s, c);
        (l.line >= u.to || l.line < u.from) && setTimeout(yn(e, function() {
          b == r && o(t);
        }), 150);
      } else {
        var d = t.clientY < y.top ? -20 : t.clientY > y.bottom ? 20 : 0;
        d && setTimeout(yn(e, function() {
          b == r && (s.scroller.scrollTop += d, o(t));
        }), 50);
      }
    }
    function l(t) {
      e.state.selectingText = !1, b = Infinity, t && (P(t), s.input.focus()), A(s.wrapper.ownerDocument, "mousemove", x), 
      A(s.wrapper.ownerDocument, "mouseup", w), c.history.lastSelOrigin = null;
    }
    var s = e.display, c = e.doc;
    P(t);
    var u, f, h = c.sel, m = h.ranges;
    if (n.addNew && !n.extend ? (f = c.sel.contains(r), u = f > -1 ? m[f] : new El(r, r)) : (u = c.sel.primary(), 
    f = c.sel.primIndex), "rectangle" == n.unit) n.addNew || (u = new El(r, r)), r = Cr(e, t, !0, !0), 
    f = -1; else {
      var g = qo(e, r, n.unit);
      u = n.extend ? mi(u, g.anchor, g.head, n.extend) : g;
    }
    n.addNew ? -1 == f ? (f = m.length, ki(c, Hn(e, m.concat([ u ]), f), {
      scroll: !1,
      origin: "*mouse"
    })) : m.length > 1 && m[f].empty() && "char" == n.unit && !n.extend ? (ki(c, Hn(e, m.slice(0, f).concat(m.slice(f + 1)), 0), {
      scroll: !1,
      origin: "*mouse"
    }), h = c.sel) : yi(c, f, u, Za) : (f = 0, ki(c, new Dl([ u ], 0), Za), h = c.sel);
    var v = r, y = s.wrapper.getBoundingClientRect(), b = 0, x = yn(e, function(e) {
      0 !== e.buttons && H(e) ? o(e) : l(e);
    }), w = yn(e, l);
    e.state.selectingText = w, il(s.wrapper.ownerDocument, "mousemove", x), il(s.wrapper.ownerDocument, "mouseup", w);
  }
  function Ro(e, t) {
    var r = t.anchor, n = t.head, i = J(e.doc, r.line);
    if (0 == se(r, n) && r.sticky == n.sticky) return t;
    var o = L(i);
    if (!o) return t;
    var a = M(o, r.ch, r.sticky), l = o[a];
    if (l.from != r.ch && l.to != r.ch) return t;
    var s, c = a + (l.from == r.ch == (1 != l.level) ? 0 : 1);
    if (0 == c || c == o.length) return t;
    if (n.line != r.line) s = (n.line - r.line) * ("ltr" == e.doc.direction ? 1 : -1) > 0; else {
      var u = M(o, n.ch, n.sticky), d = u - a || (n.ch - r.ch) * (1 == l.level ? -1 : 1);
      s = u == c - 1 || u == c ? d < 0 : d > 0;
    }
    var f = o[c + (s ? -1 : 0)], p = s == (1 == f.level), h = p ? f.from : f.to, m = p ? "after" : "before";
    return r.ch == h && r.sticky == m ? t : new El(new le(r.line, h, m), n);
  }
  function Ho(e, t, r, n) {
    var i, o;
    if (t.touches) i = t.touches[0].clientX, o = t.touches[0].clientY; else try {
      i = t.clientX, o = t.clientY;
    } catch (t) {
      return !1;
    }
    if (i >= Math.floor(e.display.gutters.getBoundingClientRect().right)) return !1;
    n && P(t);
    var a = e.display, l = a.lineDiv.getBoundingClientRect();
    if (o > l.bottom || !E(e, r)) return q(t);
    o -= l.top - a.viewOffset;
    for (var s = 0; s < e.display.gutterSpecs.length; ++s) {
      var c = a.gutters.childNodes[s];
      if (c && c.getBoundingClientRect().right >= i) return z(e, r, e, ie(e.doc, o), e.display.gutterSpecs[s].className, t), 
      q(t);
    }
  }
  function jo(e, t) {
    return Ho(e, t, "gutterClick", !0);
  }
  function Bo(e, t) {
    It(e.display, t) || Uo(e, t) || O(e, t, "contextmenu") || Ra || e.display.input.onContextMenu(t);
  }
  function Uo(e, t) {
    return !!E(e, "gutterContextMenu") && Ho(e, t, "gutterContextMenu", !1);
  }
  function Ko(e) {
    e.display.wrapper.className = e.display.wrapper.className.replace(/\s*cm-s-\S+/g, "") + e.options.theme.replace(/(^|\s)\s*/g, " cm-s-"), 
    tr(e);
  }
  function $o(e) {
    function t(t, n, i, o) {
      e.defaults[t] = n, i && (r[t] = o ? function(e, t, r) {
        r != ts && i(e, t, r);
      } : i);
    }
    var r = e.optionHandlers;
    e.defineOption = t, e.Init = ts, t("value", "", function(e, t) {
      return e.setValue(t);
    }, !0), t("mode", null, function(e, t) {
      e.doc.modeOption = t, Gn(e);
    }, !0), t("indentUnit", 2, Gn, !0), t("indentWithTabs", !1), t("smartIndent", !0), 
    t("tabSize", 4, function(e) {
      Xn(e), tr(e), Tr(e);
    }, !0), t("lineSeparator", null, function(e, t) {
      if (e.doc.lineSep = t, t) {
        var r = [], n = e.doc.first;
        e.doc.iter(function(e) {
          for (var i = 0; ;) {
            var o = e.text.indexOf(t, i);
            if (-1 == o) break;
            i = o + t.length, r.push(le(n, o));
          }
          n++;
        });
        for (var i = r.length - 1; i >= 0; i--) qi(e.doc, t, r[i], le(r[i].line, r[i].ch + t.length));
      }
    }), t("specialChars", /[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g, function(e, t, r) {
      e.state.specialChars = new RegExp(t.source + (t.test("\t") ? "" : "|\t"), "g"), 
      r != ts && e.refresh();
    }), t("specialCharPlaceholder", ct, function(e) {
      return e.refresh();
    }, !0), t("electricChars", !0), t("inputStyle", Da ? "contenteditable" : "textarea", function() {
      throw new Error("inputStyle can not (yet) be changed in a running editor");
    }, !0), t("spellcheck", !1, function(e, t) {
      return e.getInputField().spellcheck = t;
    }, !0), t("autocorrect", !1, function(e, t) {
      return e.getInputField().autocorrect = t;
    }, !0), t("autocapitalize", !1, function(e, t) {
      return e.getInputField().autocapitalize = t;
    }, !0), t("rtlMoveVisually", !Pa), t("wholeLineUpdateBefore", !0), t("theme", "default", function(e) {
      Ko(e), Pn(e);
    }, !0), t("keyMap", "default", function(e, t, r) {
      var n = po(t), i = r != ts && po(r);
      i && i.detach && i.detach(e, n), n.attach && n.attach(e, i || null);
    }), t("extraKeys", null), t("configureMouse", null), t("lineWrapping", !1, Go, !0), 
    t("gutters", [], function(e, t) {
      e.display.gutterSpecs = En(t, e.options.lineNumbers), Pn(e);
    }, !0), t("fixedGutter", !0, function(e, t) {
      e.display.gutters.style.left = t ? wr(e.display) + "px" : "0", e.refresh();
    }, !0), t("coverGutterNextToScrollbar", !1, function(e) {
      return an(e);
    }, !0), t("scrollbarStyle", "native", function(e) {
      sn(e), an(e), e.display.scrollbars.setScrollTop(e.doc.scrollTop), e.display.scrollbars.setScrollLeft(e.doc.scrollLeft);
    }, !0), t("lineNumbers", !1, function(e, t) {
      e.display.gutterSpecs = En(e.options.gutters, t), Pn(e);
    }, !0), t("firstLineNumber", 1, Pn, !0), t("lineNumberFormatter", function(e) {
      return e;
    }, Pn, !0), t("showCursorWhenSelecting", !1, Or, !0), t("resetSelectionOnContextMenu", !0), 
    t("lineWiseCopyCut", !0), t("pasteLinesPerSelection", !0), t("selectionsMayTouch", !1), 
    t("readOnly", !1, function(e, t) {
      "nocursor" == t && (Hr(e), e.display.input.blur()), e.display.input.readOnlyChanged(t);
    }), t("screenReaderLabel", null, function(e, t) {
      t = "" === t ? null : t, e.display.input.screenReaderLabelChanged(t);
    }), t("disableInput", !1, function(e, t) {
      t || e.display.input.reset();
    }, !0), t("dragDrop", !0, Vo), t("allowDropFileTypes", null), t("cursorBlinkRate", 530), 
    t("cursorScrollMargin", 0), t("cursorHeight", 1, Or, !0), t("singleCursorHeightPerLine", !0, Or, !0), 
    t("workTime", 100), t("workDelay", 100), t("flattenSpans", !0, Xn, !0), t("addModeClass", !1, Xn, !0), 
    t("pollInterval", 100), t("undoDepth", 200, function(e, t) {
      return e.doc.history.undoDepth = t;
    }), t("historyEventDelay", 1250), t("viewportMargin", 10, function(e) {
      return e.refresh();
    }, !0), t("maxHighlightLength", 1e4, Xn, !0), t("moveInputWithCursor", !0, function(e, t) {
      t || e.display.input.resetPosition();
    }), t("tabindex", null, function(e, t) {
      return e.display.input.getField().tabIndex = t || "";
    }), t("autofocus", null), t("direction", "ltr", function(e, t) {
      return e.doc.setDirection(t);
    }, !0), t("phrases", null);
  }
  function Vo(e, t, r) {
    if (!t != !(r && r != ts)) {
      var n = e.display.dragFunctions, i = t ? il : A;
      i(e.display.scroller, "dragstart", n.start), i(e.display.scroller, "dragenter", n.enter), 
      i(e.display.scroller, "dragover", n.over), i(e.display.scroller, "dragleave", n.leave), 
      i(e.display.scroller, "drop", n.drop);
    }
  }
  function Go(e) {
    e.options.lineWrapping ? (l(e.display.wrapper, "CodeMirror-wrap"), e.display.sizer.style.minWidth = "", 
    e.display.sizerWidth = null) : (Ha(e.display.wrapper, "CodeMirror-wrap"), it(e)), 
    _r(e), Tr(e), tr(e), setTimeout(function() {
      return an(e);
    }, 100);
  }
  function Xo(e, t) {
    var r = this;
    if (!(this instanceof Xo)) return new Xo(e, t);
    this.options = t = t ? u(t) : {}, u(rs, t, !1);
    var n = t.value;
    "string" == typeof n ? n = new Rl(n, t.mode, null, t.lineSeparator, t.direction) : t.mode && (n.modeOption = t.mode), 
    this.doc = n;
    var i = new Xo.inputStyles[t.inputStyle](this), o = this.display = new Wn(e, n, i, t);
    for (var a in o.wrapper.CodeMirror = this, Ko(this), t.lineWrapping && (this.display.wrapper.className += " CodeMirror-wrap"), 
    sn(this), this.state = {
      keyMaps: [],
      overlays: [],
      modeGen: 0,
      overwrite: !1,
      delayingBlurEvent: !1,
      focused: !1,
      suppressEdits: !1,
      pasteIncoming: -1,
      cutIncoming: -1,
      selectingText: !1,
      draggingText: !1,
      highlight: new Ba(),
      keySeq: null,
      specialChars: null
    }, t.autofocus && !Da && o.input.focus(), ka && _a < 11 && setTimeout(function() {
      return r.display.input.reset(!0);
    }, 20), Zo(this), no(), cn(this), this.curOp.forceUpdate = !0, Jn(this, n), t.autofocus && !Da || this.hasFocus() ? setTimeout(c(Rr, this), 20) : Hr(this), 
    ns) ns.hasOwnProperty(a) && ns[a](this, t[a], ts);
    Dn(this), t.finishInit && t.finishInit(this);
    for (var l = 0; l < is.length; ++l) is[l](this);
    un(this), Ca && t.lineWrapping && "optimizelegibility" == getComputedStyle(o.lineDiv).textRendering && (o.lineDiv.style.textRendering = "auto");
  }
  function Zo(e) {
    function t() {
      i.activeTouch && (o = setTimeout(function() {
        return i.activeTouch = null;
      }, 1e3), (a = i.activeTouch).end = +new Date());
    }
    function r(e) {
      if (1 != e.touches.length) return !1;
      var t = e.touches[0];
      return t.radiusX <= 1 && t.radiusY <= 1;
    }
    function n(e, t) {
      if (null == t.left) return !0;
      var r = t.left - e.left, n = t.top - e.top;
      return r * r + n * n > 400;
    }
    var i = e.display;
    il(i.scroller, "mousedown", yn(e, Do)), il(i.scroller, "dblclick", ka && _a < 11 ? yn(e, function(t) {
      if (!O(e, t)) {
        var r = Cr(e, t);
        if (r && !jo(e, t) && !It(e.display, t)) {
          P(t);
          var n = e.findWordAt(r);
          gi(e.doc, n.anchor, n.head);
        }
      }
    }) : function(t) {
      return O(e, t) || P(t);
    }), il(i.scroller, "contextmenu", function(t) {
      return Bo(e, t);
    }), il(i.input.getField(), "contextmenu", function(t) {
      i.scroller.contains(t.target) || Bo(e, t);
    });
    var o, a = {
      end: 0
    };
    il(i.scroller, "touchstart", function(t) {
      if (!O(e, t) && !r(t) && !jo(e, t)) {
        i.input.ensurePolled(), clearTimeout(o);
        var n = +new Date();
        i.activeTouch = {
          start: n,
          moved: !1,
          prev: n - a.end <= 300 ? a : null
        }, 1 == t.touches.length && (i.activeTouch.left = t.touches[0].pageX, i.activeTouch.top = t.touches[0].pageY);
      }
    }), il(i.scroller, "touchmove", function() {
      i.activeTouch && (i.activeTouch.moved = !0);
    }), il(i.scroller, "touchend", function(r) {
      var o = i.activeTouch;
      if (o && !It(i, r) && null != o.left && !o.moved && new Date() - o.start < 300) {
        var a, l = e.coordsChar(i.activeTouch, "page");
        a = !o.prev || n(o, o.prev) ? new El(l, l) : !o.prev.prev || n(o, o.prev.prev) ? e.findWordAt(l) : new El(le(l.line, 0), he(e.doc, le(l.line + 1, 0))), 
        e.setSelection(a.anchor, a.head), e.focus(), P(r);
      }
      t();
    }), il(i.scroller, "touchcancel", t), il(i.scroller, "scroll", function() {
      i.scroller.clientHeight && (tn(e, i.scroller.scrollTop), nn(e, i.scroller.scrollLeft, !0), 
      z(e, "scroll", e));
    }), il(i.scroller, "mousewheel", function(t) {
      return Rn(e, t);
    }), il(i.scroller, "DOMMouseScroll", function(t) {
      return Rn(e, t);
    }), il(i.wrapper, "scroll", function() {
      return i.wrapper.scrollTop = i.wrapper.scrollLeft = 0;
    }), i.dragFunctions = {
      enter: function(t) {
        O(e, t) || F(t);
      },
      over: function(t) {
        O(e, t) || (eo(e, t), F(t));
      },
      start: function(t) {
        return Ji(e, t);
      },
      drop: yn(e, Qi),
      leave: function(t) {
        O(e, t) || to(e);
      }
    };
    var l = i.input.getField();
    il(l, "keyup", function(t) {
      return Ao.call(e, t);
    }), il(l, "keydown", yn(e, Lo)), il(l, "keypress", yn(e, zo)), il(l, "focus", function(t) {
      return Rr(e, t);
    }), il(l, "blur", function(t) {
      return Hr(e, t);
    });
  }
  function Yo(e, t, r, n) {
    var i, o = e.doc;
    null == r && (r = "add"), "smart" == r && (o.mode.indent ? i = be(e, t).state : r = "prev");
    var a = e.options.tabSize, l = J(o, t), s = d(l.text, null, a);
    l.stateAfter && (l.stateAfter = null);
    var c, u = l.text.match(/^\s*/)[0];
    if (n || /\S/.test(l.text)) {
      if ("smart" == r && ((c = o.mode.indent(i, l.text.slice(u.length), l.text)) == Ga || c > 150)) {
        if (!n) return;
        r = "prev";
      }
    } else c = 0, r = "not";
    "prev" == r ? c = t > o.first ? d(J(o, t - 1).text, null, a) : 0 : "add" == r ? c = s + e.options.indentUnit : "subtract" == r ? c = s - e.options.indentUnit : "number" == typeof r && (c = s + r), 
    c = Math.max(0, c);
    var f = "", p = 0;
    if (e.options.indentWithTabs) for (var m = Math.floor(c / a); m; --m) p += a, f += "\t";
    if (p < c && (f += h(c - p)), f != u) return qi(o, f, le(t, 0), le(t, u.length), "+input"), 
    l.stateAfter = null, !0;
    for (var g = 0; g < o.sel.ranges.length; g++) {
      var v = o.sel.ranges[g];
      if (v.head.line == t && v.head.ch < u.length) {
        var y = le(t, u.length);
        yi(o, g, new El(y, y));
        break;
      }
    }
  }
  function Qo(e) {
    os = e;
  }
  function Jo(e, t, r, n, i) {
    var o = e.doc;
    e.display.shift = !1, n || (n = o.sel);
    var a = +new Date() - 200, l = "paste" == i || e.state.pasteIncoming > a, s = al(t), c = null;
    if (l && n.ranges.length > 1) if (os && os.text.join("\n") == t) {
      if (n.ranges.length % os.text.length == 0) {
        c = [];
        for (var u = 0; u < os.text.length; u++) c.push(o.splitLines(os.text[u]));
      }
    } else s.length == n.ranges.length && e.options.pasteLinesPerSelection && (c = g(s, function(e) {
      return [ e ];
    }));
    for (var d = e.curOp.updateInput, f = n.ranges.length - 1; f >= 0; f--) {
      var p = n.ranges[f], h = p.from(), v = p.to();
      p.empty() && (r && r > 0 ? h = le(h.line, h.ch - r) : e.state.overwrite && !l ? v = le(v.line, Math.min(J(o, v.line).text.length, v.ch + m(s).length)) : l && os && os.lineWise && os.text.join("\n") == t && (h = v = le(h.line, 0)));
      var y = {
        from: h,
        to: v,
        text: c ? c[f % c.length] : s,
        origin: i || (l ? "paste" : e.state.cutIncoming > a ? "cut" : "+input")
      };
      Oi(e.doc, y), xt(e, "inputRead", e, y);
    }
    t && !l && ta(e, t), Zr(e), e.curOp.updateInput < 2 && (e.curOp.updateInput = d), 
    e.curOp.typing = !0, e.state.pasteIncoming = e.state.cutIncoming = -1;
  }
  function ea(e, t) {
    var r = e.clipboardData && e.clipboardData.getData("Text");
    if (r) return e.preventDefault(), t.isReadOnly() || t.options.disableInput || vn(t, function() {
      return Jo(t, r, 0, null, "paste");
    }), !0;
  }
  function ta(e, t) {
    if (e.options.electricChars && e.options.smartIndent) for (var r = e.doc.sel, n = r.ranges.length - 1; n >= 0; n--) {
      var i = r.ranges[n];
      if (!(i.head.ch > 100 || n && r.ranges[n - 1].head.line == i.head.line)) {
        var o = e.getModeAt(i.head), a = !1;
        if (o.electricChars) {
          for (var l = 0; l < o.electricChars.length; l++) if (t.indexOf(o.electricChars.charAt(l)) > -1) {
            a = Yo(e, i.head.line, "smart");
            break;
          }
        } else o.electricInput && o.electricInput.test(J(e.doc, i.head.line).text.slice(0, i.head.ch)) && (a = Yo(e, i.head.line, "smart"));
        a && xt(e, "electricInput", e, i.head.line);
      }
    }
  }
  function ra(e) {
    for (var t = [], r = [], n = 0; n < e.doc.sel.ranges.length; n++) {
      var i = e.doc.sel.ranges[n].head.line, o = {
        anchor: le(i, 0),
        head: le(i + 1, 0)
      };
      r.push(o), t.push(e.getRange(o.anchor, o.head));
    }
    return {
      text: t,
      ranges: r
    };
  }
  function na(e, t, r, n) {
    e.setAttribute("autocorrect", r ? "" : "off"), e.setAttribute("autocapitalize", n ? "" : "off"), 
    e.setAttribute("spellcheck", !!t);
  }
  function ia() {
    var e = n("textarea", null, null, "position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"), t = n("div", [ e ], null, "overflow: hidden; position: relative; width: 3px; height: 0px;");
    return Ca ? e.style.width = "1000px" : e.setAttribute("wrap", "off"), za && (e.style.border = "1px solid black"), 
    na(e), t;
  }
  function oa(e) {
    var t = e.optionHandlers, r = e.helpers = {};
    e.prototype = {
      constructor: e,
      focus: function() {
        window.focus(), this.display.input.focus();
      },
      setOption: function(e, r) {
        var n = this.options, i = n[e];
        n[e] == r && "mode" != e || (n[e] = r, t.hasOwnProperty(e) && yn(this, t[e])(this, r, i), 
        z(this, "optionChange", this, e));
      },
      getOption: function(e) {
        return this.options[e];
      },
      getDoc: function() {
        return this.doc;
      },
      addKeyMap: function(e, t) {
        this.state.keyMaps[t ? "push" : "unshift"](po(e));
      },
      removeKeyMap: function(e) {
        for (var t = this.state.keyMaps, r = 0; r < t.length; ++r) if (t[r] == e || t[r].name == e) return t.splice(r, 1), 
        !0;
      },
      addOverlay: bn(function(t, r) {
        var n = t.token ? t : e.getMode(this.options, t);
        if (n.startState) throw new Error("Overlays may not be stateful.");
        v(this.state.overlays, {
          mode: n,
          modeSpec: t,
          opaque: r && r.opaque,
          priority: r && r.priority || 0
        }, function(e) {
          return e.priority;
        }), this.state.modeGen++, Tr(this);
      }),
      removeOverlay: bn(function(e) {
        for (var t = this.state.overlays, r = 0; r < t.length; ++r) {
          var n = t[r].modeSpec;
          if (n == e || "string" == typeof e && n.name == e) return t.splice(r, 1), this.state.modeGen++, 
          void Tr(this);
        }
      }),
      indentLine: bn(function(e, t, r) {
        "string" != typeof t && "number" != typeof t && (t = null == t ? this.options.smartIndent ? "smart" : "prev" : t ? "add" : "subtract"), 
        oe(this.doc, e) && Yo(this, e, t, r);
      }),
      indentSelection: bn(function(e) {
        for (var t = this.doc.sel.ranges, r = -1, n = 0; n < t.length; n++) {
          var i = t[n];
          if (i.empty()) i.head.line > r && (Yo(this, i.head.line, e, !0), r = i.head.line, 
          n == this.doc.sel.primIndex && Zr(this)); else {
            var o = i.from(), a = i.to(), l = Math.max(r, o.line);
            r = Math.min(this.lastLine(), a.line - (a.ch ? 0 : 1)) + 1;
            for (var s = l; s < r; ++s) Yo(this, s, e);
            var c = this.doc.sel.ranges;
            0 == o.ch && t.length == c.length && c[n].from().ch > 0 && yi(this.doc, n, new El(o, c[n].to()), Xa);
          }
        }
      }),
      getTokenAt: function(e, t) {
        return _e(this, e, t);
      },
      getLineTokens: function(e, t) {
        return _e(this, le(e), t, !0);
      },
      getTokenTypeAt: function(e) {
        e = he(this.doc, e);
        var t, r = ye(this, J(this.doc, e.line)), n = 0, i = (r.length - 1) / 2, o = e.ch;
        if (0 == o) t = r[2]; else for (;;) {
          var a = n + i >> 1;
          if ((a ? r[2 * a - 1] : 0) >= o) i = a; else {
            if (!(r[2 * a + 1] < o)) {
              t = r[2 * a + 2];
              break;
            }
            n = a + 1;
          }
        }
        var l = t ? t.indexOf("overlay ") : -1;
        return l < 0 ? t : 0 == l ? null : t.slice(0, l - 1);
      },
      getModeAt: function(t) {
        var r = this.doc.mode;
        return r.innerMode ? e.innerMode(r, this.getTokenAt(t).state).mode : r;
      },
      getHelper: function(e, t) {
        return this.getHelpers(e, t)[0];
      },
      getHelpers: function(e, t) {
        var n = [];
        if (!r.hasOwnProperty(t)) return n;
        var i = r[t], o = this.getModeAt(e);
        if ("string" == typeof o[t]) i[o[t]] && n.push(i[o[t]]); else if (o[t]) for (var a = 0; a < o[t].length; a++) {
          var l = i[o[t][a]];
          l && n.push(l);
        } else o.helperType && i[o.helperType] ? n.push(i[o.helperType]) : i[o.name] && n.push(i[o.name]);
        for (var s = 0; s < i._global.length; s++) {
          var c = i._global[s];
          c.pred(o, this) && -1 == f(n, c.val) && n.push(c.val);
        }
        return n;
      },
      getStateAfter: function(e, t) {
        var r = this.doc;
        return be(this, (e = pe(r, null == e ? r.first + r.size - 1 : e)) + 1, t).state;
      },
      cursorCoords: function(e, t) {
        var r = this.doc.sel.primary();
        return sr(this, null == e ? r.head : "object" == typeof e ? he(this.doc, e) : e ? r.from() : r.to(), t || "page");
      },
      charCoords: function(e, t) {
        return lr(this, he(this.doc, e), t || "page");
      },
      coordsChar: function(e, t) {
        return dr(this, (e = ar(this, e, t || "page")).left, e.top);
      },
      lineAtHeight: function(e, t) {
        return e = ar(this, {
          top: e,
          left: 0
        }, t || "page").top, ie(this.doc, e + this.display.viewOffset);
      },
      heightAtLine: function(e, t, r) {
        var n, i = !1;
        if ("number" == typeof e) {
          var o = this.doc.first + this.doc.size - 1;
          e < this.doc.first ? e = this.doc.first : e > o && (e = o, i = !0), n = J(this.doc, e);
        } else n = e;
        return or(this, n, {
          top: 0,
          left: 0
        }, t || "page", r || i).top + (i ? this.doc.height - rt(n) : 0);
      },
      defaultTextHeight: function() {
        return yr(this.display);
      },
      defaultCharWidth: function() {
        return br(this.display);
      },
      getViewport: function() {
        return {
          from: this.display.viewFrom,
          to: this.display.viewTo
        };
      },
      addWidget: function(e, t, r, n, i) {
        var o = this.display, a = (e = sr(this, he(this.doc, e))).bottom, l = e.left;
        if (t.style.position = "absolute", t.setAttribute("cm-ignore-events", "true"), this.display.input.setUneditable(t), 
        o.sizer.appendChild(t), "over" == n) a = e.top; else if ("above" == n || "near" == n) {
          var s = Math.max(o.wrapper.clientHeight, this.doc.height), c = Math.max(o.sizer.clientWidth, o.lineSpace.clientWidth);
          ("above" == n || e.bottom + t.offsetHeight > s) && e.top > t.offsetHeight ? a = e.top - t.offsetHeight : e.bottom + t.offsetHeight <= s && (a = e.bottom), 
          l + t.offsetWidth > c && (l = c - t.offsetWidth);
        }
        t.style.top = a + "px", t.style.left = t.style.right = "", "right" == i ? (l = o.sizer.clientWidth - t.offsetWidth, 
        t.style.right = "0px") : ("left" == i ? l = 0 : "middle" == i && (l = (o.sizer.clientWidth - t.offsetWidth) / 2), 
        t.style.left = l + "px"), r && Vr(this, {
          left: l,
          top: a,
          right: l + t.offsetWidth,
          bottom: a + t.offsetHeight
        });
      },
      triggerOnKeyDown: bn(Lo),
      triggerOnKeyPress: bn(zo),
      triggerOnKeyUp: Ao,
      triggerOnMouseDown: bn(Do),
      execCommand: function(e) {
        if (Zl.hasOwnProperty(e)) return Zl[e].call(null, this);
      },
      triggerElectric: bn(function(e) {
        ta(this, e);
      }),
      findPosH: function(e, t, r, n) {
        var i = 1;
        t < 0 && (i = -1, t = -t);
        for (var o = he(this.doc, e), a = 0; a < t && !(o = aa(this.doc, o, i, r, n)).hitSide; ++a) ;
        return o;
      },
      moveH: bn(function(e, t) {
        var r = this;
        this.extendSelectionsBy(function(n) {
          return r.display.shift || r.doc.extend || n.empty() ? aa(r.doc, n.head, e, t, r.options.rtlMoveVisually) : e < 0 ? n.from() : n.to();
        }, Ya);
      }),
      deleteH: bn(function(e, t) {
        var r = this.doc.sel, n = this.doc;
        r.somethingSelected() ? n.replaceSelection("", null, "+delete") : ho(this, function(r) {
          var i = aa(n, r.head, e, t, !1);
          return e < 0 ? {
            from: i,
            to: r.head
          } : {
            from: r.head,
            to: i
          };
        });
      }),
      findPosV: function(e, t, r, n) {
        var i = 1, o = n;
        t < 0 && (i = -1, t = -t);
        for (var a = he(this.doc, e), l = 0; l < t; ++l) {
          var s = sr(this, a, "div");
          if (null == o ? o = s.left : s.left = o, (a = la(this, s, i, r)).hitSide) break;
        }
        return a;
      },
      moveV: bn(function(e, t) {
        var r = this, n = this.doc, i = [], o = !this.display.shift && !n.extend && n.sel.somethingSelected();
        if (n.extendSelectionsBy(function(a) {
          if (o) return e < 0 ? a.from() : a.to();
          var l = sr(r, a.head, "div");
          null != a.goalColumn && (l.left = a.goalColumn), i.push(l.left);
          var s = la(r, l, e, t);
          return "page" == t && a == n.sel.primary() && Xr(r, lr(r, s, "div").top - l.top), 
          s;
        }, Ya), i.length) for (var a = 0; a < n.sel.ranges.length; a++) n.sel.ranges[a].goalColumn = i[a];
      }),
      findWordAt: function(e) {
        var t = J(this.doc, e.line).text, r = e.ch, n = e.ch;
        if (t) {
          var i = this.getHelper(e, "wordChars");
          "before" != e.sticky && n != t.length || !r ? ++n : --r;
          for (var o = t.charAt(r), a = w(o, i) ? function(e) {
            return w(e, i);
          } : /\s/.test(o) ? function(e) {
            return /\s/.test(e);
          } : function(e) {
            return !/\s/.test(e) && !w(e);
          }; r > 0 && a(t.charAt(r - 1)); ) --r;
          for (;n < t.length && a(t.charAt(n)); ) ++n;
        }
        return new El(le(e.line, r), le(e.line, n));
      },
      toggleOverwrite: function(e) {
        null != e && e == this.state.overwrite || ((this.state.overwrite = !this.state.overwrite) ? l(this.display.cursorDiv, "CodeMirror-overwrite") : Ha(this.display.cursorDiv, "CodeMirror-overwrite"), 
        z(this, "overwriteToggle", this, this.state.overwrite));
      },
      hasFocus: function() {
        return this.display.input.getField() == a();
      },
      isReadOnly: function() {
        return !(!this.options.readOnly && !this.doc.cantEdit);
      },
      scrollTo: bn(function(e, t) {
        Yr(this, e, t);
      }),
      getScrollInfo: function() {
        var e = this.display.scroller;
        return {
          left: e.scrollLeft,
          top: e.scrollTop,
          height: e.scrollHeight - Ft(this) - this.display.barHeight,
          width: e.scrollWidth - Ft(this) - this.display.barWidth,
          clientHeight: Ht(this),
          clientWidth: Rt(this)
        };
      },
      scrollIntoView: bn(function(e, t) {
        null == e ? (e = {
          from: this.doc.sel.primary().head,
          to: null
        }, null == t && (t = this.options.cursorScrollMargin)) : "number" == typeof e ? e = {
          from: le(e, 0),
          to: null
        } : null == e.from && (e = {
          from: e,
          to: null
        }), e.to || (e.to = e.from), e.margin = t || 0, null != e.from.line ? Qr(this, e) : en(this, e.from, e.to, e.margin);
      }),
      setSize: bn(function(e, t) {
        var r = this, n = function(e) {
          return "number" == typeof e || /^\d+$/.test(String(e)) ? e + "px" : e;
        };
        null != e && (this.display.wrapper.style.width = n(e)), null != t && (this.display.wrapper.style.height = n(t)), 
        this.options.lineWrapping && er(this);
        var i = this.display.viewFrom;
        this.doc.iter(i, this.display.viewTo, function(e) {
          if (e.widgets) for (var t = 0; t < e.widgets.length; t++) if (e.widgets[t].noHScroll) {
            Mr(r, i, "widget");
            break;
          }
          ++i;
        }), this.curOp.forceUpdate = !0, z(this, "refresh", this);
      }),
      operation: function(e) {
        return vn(this, e);
      },
      startOperation: function() {
        return cn(this);
      },
      endOperation: function() {
        return un(this);
      },
      refresh: bn(function() {
        var e = this.display.cachedTextHeight;
        Tr(this), this.curOp.forceUpdate = !0, tr(this), Yr(this, this.doc.scrollLeft, this.doc.scrollTop), 
        An(this.display), (null == e || Math.abs(e - yr(this.display)) > .5 || this.options.lineWrapping) && _r(this), 
        z(this, "refresh", this);
      }),
      swapDoc: bn(function(e) {
        var t = this.doc;
        return t.cm = null, this.state.selectingText && this.state.selectingText(), Jn(this, e), 
        tr(this), this.display.input.reset(), Yr(this, e.scrollLeft, e.scrollTop), this.curOp.forceScroll = !0, 
        xt(this, "swapDoc", this, t), t;
      }),
      phrase: function(e) {
        var t = this.options.phrases;
        return t && Object.prototype.hasOwnProperty.call(t, e) ? t[e] : e;
      },
      getInputField: function() {
        return this.display.input.getField();
      },
      getWrapperElement: function() {
        return this.display.wrapper;
      },
      getScrollerElement: function() {
        return this.display.scroller;
      },
      getGutterElement: function() {
        return this.display.gutters;
      }
    }, I(e), e.registerHelper = function(t, n, i) {
      r.hasOwnProperty(t) || (r[t] = e[t] = {
        _global: []
      }), r[t][n] = i;
    }, e.registerGlobalHelper = function(t, n, i, o) {
      e.registerHelper(t, n, o), r[t]._global.push({
        pred: i,
        val: o
      });
    };
  }
  function aa(e, t, r, n, i) {
    function o() {
      var r = t.line + u;
      return !(r < e.first || r >= e.first + e.size) && (t = new le(r, t.ch, t.sticky), 
      c = J(e, r));
    }
    function a(n) {
      var a;
      if (null == (a = i ? yo(e.cm, c, t, r) : go(c, t, r))) {
        if (n || !o()) return !1;
        t = vo(i, e.cm, c, t.line, u);
      } else t = a;
      return !0;
    }
    var l = t, s = r, c = J(e, t.line), u = i && "rtl" == e.direction ? -r : r;
    if ("char" == n) a(); else if ("column" == n) a(!0); else if ("word" == n || "group" == n) for (var d = null, f = "group" == n, p = e.cm && e.cm.getHelper(t, "wordChars"), h = !0; !(r < 0) || a(!h); h = !1) {
      var m = c.text.charAt(t.ch) || "\n", g = w(m, p) ? "w" : f && "\n" == m ? "n" : !f || /\s/.test(m) ? null : "p";
      if (!f || h || g || (g = "s"), d && d != g) {
        r < 0 && (r = 1, a(), t.sticky = "after");
        break;
      }
      if (g && (d = g), r > 0 && !a(!h)) break;
    }
    var v = Li(e, t, l, s, !0);
    return ce(l, v) && (v.hitSide = !0), v;
  }
  function la(e, t, r, n) {
    var i, o, a = e.doc, l = t.left;
    if ("page" == n) {
      var s = Math.min(e.display.wrapper.clientHeight, window.innerHeight || document.documentElement.clientHeight), c = Math.max(s - .5 * yr(e.display), 3);
      i = (r > 0 ? t.bottom : t.top) + r * c;
    } else "line" == n && (i = r > 0 ? t.bottom + 3 : t.top - 3);
    for (;(o = dr(e, l, i)).outside; ) {
      if (r < 0 ? i <= 0 : i >= a.height) {
        o.hitSide = !0;
        break;
      }
      i += 5 * r;
    }
    return o;
  }
  function sa(e, t) {
    var r = $t(e, t.line);
    if (!r || r.hidden) return null;
    var n = J(e.doc, t.line), i = Bt(r, n, t.line), o = L(n, e.doc.direction), a = "left";
    o && (a = M(o, t.ch) % 2 ? "right" : "left");
    var l = Xt(i.map, t.ch, a);
    return l.offset = "right" == l.collapse ? l.end : l.start, l;
  }
  function ca(e) {
    for (var t = e; t; t = t.parentNode) if (/CodeMirror-gutter-wrapper/.test(t.className)) return !0;
    return !1;
  }
  function ua(e, t) {
    return t && (e.bad = !0), e;
  }
  function da(e, t, r, n, i) {
    function o(e) {
      return function(t) {
        return t.id == e;
      };
    }
    function a() {
      u && (c += d, f && (c += d), u = f = !1);
    }
    function l(e) {
      e && (a(), c += e);
    }
    function s(t) {
      if (1 == t.nodeType) {
        var r = t.getAttribute("cm-text");
        if (r) return void l(r);
        var c, p = t.getAttribute("cm-marker");
        if (p) {
          var h = e.findMarks(le(n, 0), le(i + 1, 0), o(+p));
          return void (h.length && (c = h[0].find(0)) && l(ee(e.doc, c.from, c.to).join(d)));
        }
        if ("false" == t.getAttribute("contenteditable")) return;
        var m = /^(pre|div|p|li|table|br)$/i.test(t.nodeName);
        if (!/^br$/i.test(t.nodeName) && 0 == t.textContent.length) return;
        m && a();
        for (var g = 0; g < t.childNodes.length; g++) s(t.childNodes[g]);
        /^(pre|p)$/i.test(t.nodeName) && (f = !0), m && (u = !0);
      } else 3 == t.nodeType && l(t.nodeValue.replace(/\u200b/g, "").replace(/\u00a0/g, " "));
    }
    for (var c = "", u = !1, d = e.doc.lineSeparator(), f = !1; s(t), t != r; ) t = t.nextSibling, 
    f = !1;
    return c;
  }
  function fa(e, t, r) {
    var n;
    if (t == e.display.lineDiv) {
      if (!(n = e.display.lineDiv.childNodes[r])) return ua(e.clipPos(le(e.display.viewTo - 1)), !0);
      t = null, r = 0;
    } else for (n = t; ;n = n.parentNode) {
      if (!n || n == e.display.lineDiv) return null;
      if (n.parentNode && n.parentNode == e.display.lineDiv) break;
    }
    for (var i = 0; i < e.display.view.length; i++) {
      var o = e.display.view[i];
      if (o.node == n) return pa(o, t, r);
    }
  }
  function pa(e, t, r) {
    function n(t, r, n) {
      for (var i = -1; i < (d ? d.length : 0); i++) for (var o = i < 0 ? u.map : d[i], a = 0; a < o.length; a += 3) {
        var l = o[a + 2];
        if (l == t || l == r) {
          var s = ne(i < 0 ? e.line : e.rest[i]), c = o[a] + n;
          return (n < 0 || l != t) && (c = o[a + (n ? 1 : 0)]), le(s, c);
        }
      }
    }
    var i = e.text.firstChild, a = !1;
    if (!t || !o(i, t)) return ua(le(ne(e.line), 0), !0);
    if (t == i && (a = !0, t = i.childNodes[r], r = 0, !t)) {
      var l = e.rest ? m(e.rest) : e.line;
      return ua(le(ne(l), l.text.length), a);
    }
    var s = 3 == t.nodeType ? t : null, c = t;
    for (s || 1 != t.childNodes.length || 3 != t.firstChild.nodeType || (s = t.firstChild, 
    r && (r = s.nodeValue.length)); c.parentNode != i; ) c = c.parentNode;
    var u = e.measure, d = u.maps, f = n(s, c, r);
    if (f) return ua(f, a);
    for (var p = c.nextSibling, h = s ? s.nodeValue.length - r : 0; p; p = p.nextSibling) {
      if (f = n(p, p.firstChild, 0)) return ua(le(f.line, f.ch - h), a);
      h += p.textContent.length;
    }
    for (var g = c.previousSibling, v = r; g; g = g.previousSibling) {
      if (f = n(g, g.firstChild, -1)) return ua(le(f.line, f.ch + v), a);
      v += g.textContent.length;
    }
  }
  function ha(e, t) {
    function r() {
      e.value = s.getValue();
    }
    if ((t = t ? u(t) : {}).value = e.value, !t.tabindex && e.tabIndex && (t.tabindex = e.tabIndex), 
    !t.placeholder && e.placeholder && (t.placeholder = e.placeholder), null == t.autofocus) {
      var n = a();
      t.autofocus = n == e || null != e.getAttribute("autofocus") && n == document.body;
    }
    var i;
    if (e.form && (il(e.form, "submit", r), !t.leaveSubmitMethodAlone)) {
      var o = e.form;
      i = o.submit;
      try {
        var l = o.submit = function() {
          r(), o.submit = i, o.submit(), o.submit = l;
        };
      } catch ($a) {}
    }
    t.finishInit = function(n) {
      n.save = r, n.getTextArea = function() {
        return e;
      }, n.toTextArea = function() {
        n.toTextArea = isNaN, r(), e.parentNode.removeChild(n.getWrapperElement()), e.style.display = "", 
        e.form && (A(e.form, "submit", r), t.leaveSubmitMethodAlone || "function" != typeof e.form.submit || (e.form.submit = i));
      };
    }, e.style.display = "none";
    var s = Xo(function(t) {
      return e.parentNode.insertBefore(t, e.nextSibling);
    }, t);
    return s;
  }
  function ma(e) {
    e.off = A, e.on = il, e.wheelEventPixels = Fn, e.Doc = Rl, e.splitLines = al, e.countColumn = d, 
    e.findColumn = p, e.isWordChar = x, e.Pass = Ga, e.signal = z, e.Line = bl, e.changeEnd = Bn, 
    e.scrollbarModel = Ll, e.Pos = le, e.cmpPos = se, e.modes = ul, e.mimeModes = dl, 
    e.resolveMode = V, e.getMode = G, e.modeExtensions = fl, e.extendMode = X, e.copyState = Z, 
    e.startState = Q, e.innerMode = Y, e.commands = Zl, e.keyMap = Vl, e.keyName = fo, 
    e.isModifierKey = co, e.lookupKey = so, e.normalizeKeyMap = lo, e.StringStream = pl, 
    e.SharedTextMarker = ql, e.TextMarker = Wl, e.LineWidget = Il, e.e_preventDefault = P, 
    e.e_stopPropagation = W, e.e_stop = F, e.addClass = l, e.contains = o, e.rmClass = Ha, 
    e.keyNames = Bl;
  }
  var ga = navigator.userAgent, va = navigator.platform, ya = /gecko\/\d/i.test(ga), ba = /MSIE \d/.test(ga), xa = /Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ga), wa = /Edge\/(\d+)/.exec(ga), ka = ba || xa || wa, _a = ka && (ba ? document.documentMode || 6 : +(wa || xa)[1]), Ca = !wa && /WebKit\//.test(ga), Sa = Ca && /Qt\/\d+\.\d+/.test(ga), Ta = !wa && /Chrome\//.test(ga), Ma = /Opera\//.test(ga), La = /Apple Computer/.test(navigator.vendor), Na = /Mac OS X 1\d\D([8-9]|\d\d)\D/.test(ga), Aa = /PhantomJS/.test(ga), za = !wa && /AppleWebKit/.test(ga) && /Mobile\/\w+/.test(ga), Oa = /Android/.test(ga), Da = za || Oa || /webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(ga), Ea = za || /Mac/.test(va), Ia = /\bCrOS\b/.test(ga), Pa = /win/i.test(va), Wa = Ma && ga.match(/Version\/(\d*\.\d*)/);
  Wa && (Wa = Number(Wa[1])), Wa && Wa >= 15 && (Ma = !1, Ca = !0);
  var qa, Fa = Ea && (Sa || Ma && (null == Wa || Wa < 12.11)), Ra = ya || ka && _a >= 9, Ha = function(t, r) {
    var n = t.className, i = e(r).exec(n);
    if (i) {
      var o = n.slice(i.index + i[0].length);
      t.className = n.slice(0, i.index) + (o ? i[1] + o : "");
    }
  };
  qa = document.createRange ? function(e, t, r, n) {
    var i = document.createRange();
    return i.setEnd(n || e, r), i.setStart(e, t), i;
  } : function(e, t, r) {
    var n = document.body.createTextRange();
    try {
      n.moveToElementText(e.parentNode);
    } catch ($a) {
      return n;
    }
    return n.collapse(!0), n.moveEnd("character", r), n.moveStart("character", t), n;
  };
  var ja = function(e) {
    e.select();
  };
  za ? ja = function(e) {
    e.selectionStart = 0, e.selectionEnd = e.value.length;
  } : ka && (ja = function(e) {
    try {
      e.select();
    } catch (t) {}
  });
  var Ba = function() {
    this.id = null, this.f = null, this.time = 0, this.handler = c(this.onTimeout, this);
  };
  Ba.prototype.onTimeout = function(e) {
    e.id = 0, e.time <= +new Date() ? e.f() : setTimeout(e.handler, e.time - +new Date());
  }, Ba.prototype.set = function(e, t) {
    this.f = t;
    var r = +new Date() + e;
    (!this.id || r < this.time) && (clearTimeout(this.id), this.id = setTimeout(this.handler, e), 
    this.time = r);
  };
  var Ua, Ka, $a, Va = 50, Ga = {
    toString: function() {
      return "CodeMirror.Pass";
    }
  }, Xa = {
    scroll: !1
  }, Za = {
    origin: "*mouse"
  }, Ya = {
    origin: "+move"
  }, Qa = [ "" ], Ja = /[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/, el = /[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/, tl = null, rl = function() {
    function e(e) {
      return e <= 247 ? r.charAt(e) : 1424 <= e && e <= 1524 ? "R" : 1536 <= e && e <= 1785 ? n.charAt(e - 1536) : 1774 <= e && e <= 2220 ? "r" : 8192 <= e && e <= 8203 ? "w" : 8204 == e ? "b" : "L";
    }
    function t(e, t, r) {
      this.level = e, this.from = t, this.to = r;
    }
    var r = "bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN", n = "nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111", i = /[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/, o = /[stwN]/, a = /[LRr]/, l = /[Lb1n]/, s = /[1n]/;
    return function(r, n) {
      var c = "ltr" == n ? "L" : "R";
      if (0 == r.length || "ltr" == n && !i.test(r)) return !1;
      for (var u = r.length, d = [], f = 0; f < u; ++f) d.push(e(r.charCodeAt(f)));
      for (var p = 0, h = c; p < u; ++p) {
        var g = d[p];
        "m" == g ? d[p] = h : h = g;
      }
      for (var v = 0, y = c; v < u; ++v) {
        var b = d[v];
        "1" == b && "r" == y ? d[v] = "n" : a.test(b) && (y = b, "r" == b && (d[v] = "R"));
      }
      for (var x = 1, w = d[0]; x < u - 1; ++x) {
        var k = d[x];
        "+" == k && "1" == w && "1" == d[x + 1] ? d[x] = "1" : "," != k || w != d[x + 1] || "1" != w && "n" != w || (d[x] = w), 
        w = k;
      }
      for (var _ = 0; _ < u; ++_) {
        var C = d[_];
        if ("," == C) d[_] = "N"; else if ("%" == C) {
          var S = void 0;
          for (S = _ + 1; S < u && "%" == d[S]; ++S) ;
          for (var T = _ && "!" == d[_ - 1] || S < u && "1" == d[S] ? "1" : "N", M = _; M < S; ++M) d[M] = T;
          _ = S - 1;
        }
      }
      for (var L = 0, N = c; L < u; ++L) {
        var A = d[L];
        "L" == N && "1" == A ? d[L] = "L" : a.test(A) && (N = A);
      }
      for (var z = 0; z < u; ++z) if (o.test(d[z])) {
        var O = void 0;
        for (O = z + 1; O < u && o.test(d[O]); ++O) ;
        for (var D = "L" == (z ? d[z - 1] : c), E = D == ("L" == (O < u ? d[O] : c)) ? D ? "L" : "R" : c, I = z; I < O; ++I) d[I] = E;
        z = O - 1;
      }
      for (var P, W = [], q = 0; q < u; ) if (l.test(d[q])) {
        var F = q;
        for (++q; q < u && l.test(d[q]); ++q) ;
        W.push(new t(0, F, q));
      } else {
        var R = q, H = W.length, j = "rtl" == n ? 1 : 0;
        for (++q; q < u && "L" != d[q]; ++q) ;
        for (var B = R; B < q; ) if (s.test(d[B])) {
          R < B && (W.splice(H, 0, new t(1, R, B)), H += j);
          var U = B;
          for (++B; B < q && s.test(d[B]); ++B) ;
          W.splice(H, 0, new t(2, U, B)), H += j, R = B;
        } else ++B;
        R < q && W.splice(H, 0, new t(1, R, q));
      }
      return "ltr" == n && (1 == W[0].level && (P = r.match(/^\s+/)) && (W[0].from = P[0].length, 
      W.unshift(new t(0, 0, P[0].length))), 1 == m(W).level && (P = r.match(/\s+$/)) && (m(W).to -= P[0].length, 
      W.push(new t(0, u - P[0].length, u)))), "rtl" == n ? W.reverse() : W;
    };
  }(), nl = [], il = function(e, t, r) {
    if (e.addEventListener) e.addEventListener(t, r, !1); else if (e.attachEvent) e.attachEvent("on" + t, r); else {
      var n = e._handlers || (e._handlers = {});
      n[t] = (n[t] || nl).concat(r);
    }
  }, ol = function() {
    if (ka && _a < 9) return !1;
    var e = n("div");
    return "draggable" in e || "dragDrop" in e;
  }(), al = 3 != "\n\nb".split(/\n/).length ? function(e) {
    for (var t = 0, r = [], n = e.length; t <= n; ) {
      var i = e.indexOf("\n", t);
      -1 == i && (i = e.length);
      var o = e.slice(t, "\r" == e.charAt(i - 1) ? i - 1 : i), a = o.indexOf("\r");
      -1 != a ? (r.push(o.slice(0, a)), t += a + 1) : (r.push(o), t = i + 1);
    }
    return r;
  } : function(e) {
    return e.split(/\r\n?|\n/);
  }, ll = window.getSelection ? function(e) {
    try {
      return e.selectionStart != e.selectionEnd;
    } catch ($a) {
      return !1;
    }
  } : function(e) {
    var t;
    try {
      t = e.ownerDocument.selection.createRange();
    } catch ($a) {}
    return !(!t || t.parentElement() != e) && 0 != t.compareEndPoints("StartToEnd", t);
  }, sl = "oncopy" in ($a = n("div")) || ($a.setAttribute("oncopy", "return;"), "function" == typeof $a.oncopy), cl = null, ul = {}, dl = {}, fl = {}, pl = function(e, t, r) {
    this.pos = this.start = 0, this.string = e, this.tabSize = t || 8, this.lastColumnPos = this.lastColumnValue = 0, 
    this.lineStart = 0, this.lineOracle = r;
  };
  pl.prototype.eol = function() {
    return this.pos >= this.string.length;
  }, pl.prototype.sol = function() {
    return this.pos == this.lineStart;
  }, pl.prototype.peek = function() {
    return this.string.charAt(this.pos) || undefined;
  }, pl.prototype.next = function() {
    if (this.pos < this.string.length) return this.string.charAt(this.pos++);
  }, pl.prototype.eat = function(e) {
    var t = this.string.charAt(this.pos);
    if ("string" == typeof e ? t == e : t && (e.test ? e.test(t) : e(t))) return ++this.pos, 
    t;
  }, pl.prototype.eatWhile = function(e) {
    for (var t = this.pos; this.eat(e); ) ;
    return this.pos > t;
  }, pl.prototype.eatSpace = function() {
    for (var e = this.pos; /[\s\u00a0]/.test(this.string.charAt(this.pos)); ) ++this.pos;
    return this.pos > e;
  }, pl.prototype.skipToEnd = function() {
    this.pos = this.string.length;
  }, pl.prototype.skipTo = function(e) {
    var t = this.string.indexOf(e, this.pos);
    if (t > -1) return this.pos = t, !0;
  }, pl.prototype.backUp = function(e) {
    this.pos -= e;
  }, pl.prototype.column = function() {
    return this.lastColumnPos < this.start && (this.lastColumnValue = d(this.string, this.start, this.tabSize, this.lastColumnPos, this.lastColumnValue), 
    this.lastColumnPos = this.start), this.lastColumnValue - (this.lineStart ? d(this.string, this.lineStart, this.tabSize) : 0);
  }, pl.prototype.indentation = function() {
    return d(this.string, null, this.tabSize) - (this.lineStart ? d(this.string, this.lineStart, this.tabSize) : 0);
  }, pl.prototype.match = function(e, t, r) {
    if ("string" != typeof e) {
      var n = this.string.slice(this.pos).match(e);
      return n && n.index > 0 ? null : (n && !1 !== t && (this.pos += n[0].length), n);
    }
    var i = function(e) {
      return r ? e.toLowerCase() : e;
    };
    if (i(this.string.substr(this.pos, e.length)) == i(e)) return !1 !== t && (this.pos += e.length), 
    !0;
  }, pl.prototype.current = function() {
    return this.string.slice(this.start, this.pos);
  }, pl.prototype.hideFirstChars = function(e, t) {
    this.lineStart += e;
    try {
      return t();
    } finally {
      this.lineStart -= e;
    }
  }, pl.prototype.lookAhead = function(e) {
    var t = this.lineOracle;
    return t && t.lookAhead(e);
  }, pl.prototype.baseToken = function() {
    var e = this.lineOracle;
    return e && e.baseToken(this.pos);
  };
  var hl = function(e, t) {
    this.state = e, this.lookAhead = t;
  }, ml = function(e, t, r, n) {
    this.state = t, this.doc = e, this.line = r, this.maxLookAhead = n || 0, this.baseTokens = null, 
    this.baseTokenPos = 1;
  };
  ml.prototype.lookAhead = function(e) {
    var t = this.doc.getLine(this.line + e);
    return null != t && e > this.maxLookAhead && (this.maxLookAhead = e), t;
  }, ml.prototype.baseToken = function(e) {
    if (!this.baseTokens) return null;
    for (;this.baseTokens[this.baseTokenPos] <= e; ) this.baseTokenPos += 2;
    var t = this.baseTokens[this.baseTokenPos + 1];
    return {
      type: t && t.replace(/( |^)overlay .*/, ""),
      size: this.baseTokens[this.baseTokenPos] - e
    };
  }, ml.prototype.nextLine = function() {
    this.line++, this.maxLookAhead > 0 && this.maxLookAhead--;
  }, ml.fromSaved = function(e, t, r) {
    return t instanceof hl ? new ml(e, Z(e.mode, t.state), r, t.lookAhead) : new ml(e, Z(e.mode, t), r);
  }, ml.prototype.save = function(e) {
    var t = !1 !== e ? Z(this.doc.mode, this.state) : this.state;
    return this.maxLookAhead > 0 ? new hl(t, this.maxLookAhead) : t;
  };
  var gl = function(e, t, r) {
    this.start = e.start, this.end = e.pos, this.string = e.current(), this.type = t || null, 
    this.state = r;
  }, vl = !1, yl = !1, bl = function(e, t, r) {
    this.text = e, Re(this, t), this.height = r ? r(this) : 1;
  };
  bl.prototype.lineNo = function() {
    return ne(this);
  }, I(bl);
  var xl, wl = {}, kl = {}, _l = null, Cl = null, Sl = {
    left: 0,
    right: 0,
    top: 0,
    bottom: 0
  }, Tl = function(e, t, r) {
    this.cm = r;
    var i = this.vert = n("div", [ n("div", null, null, "min-width: 1px") ], "CodeMirror-vscrollbar"), o = this.horiz = n("div", [ n("div", null, null, "height: 100%; min-height: 1px") ], "CodeMirror-hscrollbar");
    i.tabIndex = o.tabIndex = -1, e(i), e(o), il(i, "scroll", function() {
      i.clientHeight && t(i.scrollTop, "vertical");
    }), il(o, "scroll", function() {
      o.clientWidth && t(o.scrollLeft, "horizontal");
    }), this.checkedZeroWidth = !1, ka && _a < 8 && (this.horiz.style.minHeight = this.vert.style.minWidth = "18px");
  };
  Tl.prototype.update = function(e) {
    var t = e.scrollWidth > e.clientWidth + 1, r = e.scrollHeight > e.clientHeight + 1, n = e.nativeBarWidth;
    if (r) {
      this.vert.style.display = "block", this.vert.style.bottom = t ? n + "px" : "0";
      var i = e.viewHeight - (t ? n : 0);
      this.vert.firstChild.style.height = Math.max(0, e.scrollHeight - e.clientHeight + i) + "px";
    } else this.vert.style.display = "", this.vert.firstChild.style.height = "0";
    if (t) {
      this.horiz.style.display = "block", this.horiz.style.right = r ? n + "px" : "0", 
      this.horiz.style.left = e.barLeft + "px";
      var o = e.viewWidth - e.barLeft - (r ? n : 0);
      this.horiz.firstChild.style.width = Math.max(0, e.scrollWidth - e.clientWidth + o) + "px";
    } else this.horiz.style.display = "", this.horiz.firstChild.style.width = "0";
    return !this.checkedZeroWidth && e.clientHeight > 0 && (0 == n && this.zeroWidthHack(), 
    this.checkedZeroWidth = !0), {
      right: r ? n : 0,
      bottom: t ? n : 0
    };
  }, Tl.prototype.setScrollLeft = function(e) {
    this.horiz.scrollLeft != e && (this.horiz.scrollLeft = e), this.disableHoriz && this.enableZeroWidthBar(this.horiz, this.disableHoriz, "horiz");
  }, Tl.prototype.setScrollTop = function(e) {
    this.vert.scrollTop != e && (this.vert.scrollTop = e), this.disableVert && this.enableZeroWidthBar(this.vert, this.disableVert, "vert");
  }, Tl.prototype.zeroWidthHack = function() {
    var e = Ea && !Na ? "12px" : "18px";
    this.horiz.style.height = this.vert.style.width = e, this.horiz.style.pointerEvents = this.vert.style.pointerEvents = "none", 
    this.disableHoriz = new Ba(), this.disableVert = new Ba();
  }, Tl.prototype.enableZeroWidthBar = function(e, t, r) {
    function n() {
      var i = e.getBoundingClientRect();
      ("vert" == r ? document.elementFromPoint(i.right - 1, (i.top + i.bottom) / 2) : document.elementFromPoint((i.right + i.left) / 2, i.bottom - 1)) != e ? e.style.pointerEvents = "none" : t.set(1e3, n);
    }
    e.style.pointerEvents = "auto", t.set(1e3, n);
  }, Tl.prototype.clear = function() {
    var e = this.horiz.parentNode;
    e.removeChild(this.horiz), e.removeChild(this.vert);
  };
  var Ml = function() {};
  Ml.prototype.update = function() {
    return {
      bottom: 0,
      right: 0
    };
  }, Ml.prototype.setScrollLeft = function() {}, Ml.prototype.setScrollTop = function() {}, 
  Ml.prototype.clear = function() {};
  var Ll = {
    native: Tl,
    "null": Ml
  }, Nl = 0, Al = function(e, t, r) {
    var n = e.display;
    this.viewport = t, this.visible = Ur(n, e.doc, t), this.editorIsHidden = !n.wrapper.offsetWidth, 
    this.wrapperHeight = n.wrapper.clientHeight, this.wrapperWidth = n.wrapper.clientWidth, 
    this.oldDisplayWidth = Rt(e), this.force = r, this.dims = xr(e), this.events = [];
  };
  Al.prototype.signal = function(e, t) {
    E(e, t) && this.events.push(arguments);
  }, Al.prototype.finish = function() {
    for (var e = 0; e < this.events.length; e++) z.apply(null, this.events[e]);
  };
  var zl = 0, Ol = null;
  ka ? Ol = -.53 : ya ? Ol = 15 : Ta ? Ol = -.7 : La && (Ol = -1 / 3);
  var Dl = function(e, t) {
    this.ranges = e, this.primIndex = t;
  };
  Dl.prototype.primary = function() {
    return this.ranges[this.primIndex];
  }, Dl.prototype.equals = function(e) {
    if (e == this) return !0;
    if (e.primIndex != this.primIndex || e.ranges.length != this.ranges.length) return !1;
    for (var t = 0; t < this.ranges.length; t++) {
      var r = this.ranges[t], n = e.ranges[t];
      if (!ce(r.anchor, n.anchor) || !ce(r.head, n.head)) return !1;
    }
    return !0;
  }, Dl.prototype.deepCopy = function() {
    for (var e = [], t = 0; t < this.ranges.length; t++) e[t] = new El(ue(this.ranges[t].anchor), ue(this.ranges[t].head));
    return new Dl(e, this.primIndex);
  }, Dl.prototype.somethingSelected = function() {
    for (var e = 0; e < this.ranges.length; e++) if (!this.ranges[e].empty()) return !0;
    return !1;
  }, Dl.prototype.contains = function(e, t) {
    t || (t = e);
    for (var r = 0; r < this.ranges.length; r++) {
      var n = this.ranges[r];
      if (se(t, n.from()) >= 0 && se(e, n.to()) <= 0) return r;
    }
    return -1;
  };
  var El = function(e, t) {
    this.anchor = e, this.head = t;
  };
  El.prototype.from = function() {
    return fe(this.anchor, this.head);
  }, El.prototype.to = function() {
    return de(this.anchor, this.head);
  }, El.prototype.empty = function() {
    return this.head.line == this.anchor.line && this.head.ch == this.anchor.ch;
  }, Bi.prototype = {
    chunkSize: function() {
      return this.lines.length;
    },
    removeInner: function(e, t) {
      for (var r = e, n = e + t; r < n; ++r) {
        var i = this.lines[r];
        this.height -= i.height, at(i), xt(i, "delete");
      }
      this.lines.splice(e, t);
    },
    collapse: function(e) {
      e.push.apply(e, this.lines);
    },
    insertInner: function(e, t, r) {
      this.height += r, this.lines = this.lines.slice(0, e).concat(t).concat(this.lines.slice(e));
      for (var n = 0; n < t.length; ++n) t[n].parent = this;
    },
    iterN: function(e, t, r) {
      for (var n = e + t; e < n; ++e) if (r(this.lines[e])) return !0;
    }
  }, Ui.prototype = {
    chunkSize: function() {
      return this.size;
    },
    removeInner: function(e, t) {
      this.size -= t;
      for (var r = 0; r < this.children.length; ++r) {
        var n = this.children[r], i = n.chunkSize();
        if (e < i) {
          var o = Math.min(t, i - e), a = n.height;
          if (n.removeInner(e, o), this.height -= a - n.height, i == o && (this.children.splice(r--, 1), 
          n.parent = null), 0 == (t -= o)) break;
          e = 0;
        } else e -= i;
      }
      if (this.size - t < 25 && (this.children.length > 1 || !(this.children[0] instanceof Bi))) {
        var l = [];
        this.collapse(l), this.children = [ new Bi(l) ], this.children[0].parent = this;
      }
    },
    collapse: function(e) {
      for (var t = 0; t < this.children.length; ++t) this.children[t].collapse(e);
    },
    insertInner: function(e, t, r) {
      this.size += t.length, this.height += r;
      for (var n = 0; n < this.children.length; ++n) {
        var i = this.children[n], o = i.chunkSize();
        if (e <= o) {
          if (i.insertInner(e, t, r), i.lines && i.lines.length > 50) {
            for (var a = i.lines.length % 25 + 25, l = a; l < i.lines.length; ) {
              var s = new Bi(i.lines.slice(l, l += 25));
              i.height -= s.height, this.children.splice(++n, 0, s), s.parent = this;
            }
            i.lines = i.lines.slice(0, a), this.maybeSpill();
          }
          break;
        }
        e -= o;
      }
    },
    maybeSpill: function() {
      if (!(this.children.length <= 10)) {
        var e = this;
        do {
          var t = new Ui(e.children.splice(e.children.length - 5, 5));
          if (e.parent) {
            e.size -= t.size, e.height -= t.height;
            var r = f(e.parent.children, e);
            e.parent.children.splice(r + 1, 0, t);
          } else {
            var n = new Ui(e.children);
            n.parent = e, e.children = [ n, t ], e = n;
          }
          t.parent = e.parent;
        } while (e.children.length > 10);
        e.parent.maybeSpill();
      }
    },
    iterN: function(e, t, r) {
      for (var n = 0; n < this.children.length; ++n) {
        var i = this.children[n], o = i.chunkSize();
        if (e < o) {
          var a = Math.min(t, o - e);
          if (i.iterN(e, a, r)) return !0;
          if (0 == (t -= a)) break;
          e = 0;
        } else e -= o;
      }
    }
  };
  var Il = function(e, t, r) {
    if (r) for (var n in r) r.hasOwnProperty(n) && (this[n] = r[n]);
    this.doc = e, this.node = t;
  };
  Il.prototype.clear = function() {
    var e = this.doc.cm, t = this.line.widgets, r = this.line, n = ne(r);
    if (null != n && t) {
      for (var i = 0; i < t.length; ++i) t[i] == this && t.splice(i--, 1);
      t.length || (r.widgets = null);
      var o = Et(this);
      re(r, Math.max(0, r.height - o)), e && (vn(e, function() {
        Ki(e, r, -o), Mr(e, n, "widget");
      }), xt(e, "lineWidgetCleared", e, this, n));
    }
  }, Il.prototype.changed = function() {
    var e = this, t = this.height, r = this.doc.cm, n = this.line;
    this.height = null;
    var i = Et(this) - t;
    i && (et(this.doc, n) || re(n, n.height + i), r && vn(r, function() {
      r.curOp.forceUpdate = !0, Ki(r, n, i), xt(r, "lineWidgetChanged", r, e, ne(n));
    }));
  }, I(Il);
  var Pl = 0, Wl = function(e, t) {
    this.lines = [], this.type = t, this.doc = e, this.id = ++Pl;
  };
  Wl.prototype.clear = function() {
    if (!this.explicitlyCleared) {
      var e = this.doc.cm, t = e && !e.curOp;
      if (t && cn(e), E(this, "clear")) {
        var r = this.find();
        r && xt(this, "clear", r.from, r.to);
      }
      for (var n = null, i = null, o = 0; o < this.lines.length; ++o) {
        var a = this.lines[o], l = ze(a.markedSpans, this);
        e && !this.collapsed ? Mr(e, ne(a), "text") : e && (null != l.to && (i = ne(a)), 
        null != l.from && (n = ne(a))), a.markedSpans = Oe(a.markedSpans, l), null == l.from && this.collapsed && !et(this.doc, a) && e && re(a, yr(e.display));
      }
      if (e && this.collapsed && !e.options.lineWrapping) for (var s = 0; s < this.lines.length; ++s) {
        var c = Xe(this.lines[s]), u = nt(c);
        u > e.display.maxLineLength && (e.display.maxLine = c, e.display.maxLineLength = u, 
        e.display.maxLineChanged = !0);
      }
      null != n && e && this.collapsed && Tr(e, n, i + 1), this.lines.length = 0, this.explicitlyCleared = !0, 
      this.atomic && this.doc.cantEdit && (this.doc.cantEdit = !1, e && Si(e.doc)), e && xt(e, "markerCleared", e, this, n, i), 
      t && un(e), this.parent && this.parent.clear();
    }
  }, Wl.prototype.find = function(e, t) {
    var r, n;
    null == e && "bookmark" == this.type && (e = 1);
    for (var i = 0; i < this.lines.length; ++i) {
      var o = this.lines[i], a = ze(o.markedSpans, this);
      if (null != a.from && (r = le(t ? o : ne(o), a.from), -1 == e)) return r;
      if (null != a.to && (n = le(t ? o : ne(o), a.to), 1 == e)) return n;
    }
    return r && {
      from: r,
      to: n
    };
  }, Wl.prototype.changed = function() {
    var e = this, t = this.find(-1, !0), r = this, n = this.doc.cm;
    t && n && vn(n, function() {
      var i = t.line, o = ne(t.line), a = $t(n, o);
      if (a && (Jt(a), n.curOp.selectionChanged = n.curOp.forceUpdate = !0), n.curOp.updateMaxLine = !0, 
      !et(r.doc, i) && null != r.height) {
        var l = r.height;
        r.height = null;
        var s = Et(r) - l;
        s && re(i, i.height + s);
      }
      xt(n, "markerChanged", n, e);
    });
  }, Wl.prototype.attachLine = function(e) {
    if (!this.lines.length && this.doc.cm) {
      var t = this.doc.cm.curOp;
      t.maybeHiddenMarkers && -1 != f(t.maybeHiddenMarkers, this) || (t.maybeUnhiddenMarkers || (t.maybeUnhiddenMarkers = [])).push(this);
    }
    this.lines.push(e);
  }, Wl.prototype.detachLine = function(e) {
    if (this.lines.splice(f(this.lines, e), 1), !this.lines.length && this.doc.cm) {
      var t = this.doc.cm.curOp;
      (t.maybeHiddenMarkers || (t.maybeHiddenMarkers = [])).push(this);
    }
  }, I(Wl);
  var ql = function(e, t) {
    this.markers = e, this.primary = t;
    for (var r = 0; r < e.length; ++r) e[r].parent = this;
  };
  ql.prototype.clear = function() {
    if (!this.explicitlyCleared) {
      this.explicitlyCleared = !0;
      for (var e = 0; e < this.markers.length; ++e) this.markers[e].clear();
      xt(this, "clear");
    }
  }, ql.prototype.find = function(e, t) {
    return this.primary.find(e, t);
  }, I(ql);
  var Fl = 0, Rl = function(e, t, r, n, i) {
    if (!(this instanceof Rl)) return new Rl(e, t, r, n, i);
    null == r && (r = 0), Ui.call(this, [ new Bi([ new bl("", null) ]) ]), this.first = r, 
    this.scrollTop = this.scrollLeft = 0, this.cantEdit = !1, this.cleanGeneration = 1, 
    this.modeFrontier = this.highlightFrontier = r;
    var o = le(r, 0);
    this.sel = jn(o), this.history = new ri(null), this.id = ++Fl, this.modeOption = t, 
    this.lineSep = n, this.direction = "rtl" == i ? "rtl" : "ltr", this.extend = !1, 
    "string" == typeof e && (e = this.splitLines(e)), Yn(this, {
      from: o,
      to: o,
      text: e
    }), ki(this, jn(o), Xa);
  };
  Rl.prototype = b(Ui.prototype, {
    constructor: Rl,
    iter: function(e, t, r) {
      r ? this.iterN(e - this.first, t - e, r) : this.iterN(this.first, this.first + this.size, e);
    },
    insert: function(e, t) {
      for (var r = 0, n = 0; n < t.length; ++n) r += t[n].height;
      this.insertInner(e - this.first, t, r);
    },
    remove: function(e, t) {
      this.removeInner(e - this.first, t);
    },
    getValue: function(e) {
      var t = te(this, this.first, this.first + this.size);
      return !1 === e ? t : t.join(e || this.lineSeparator());
    },
    setValue: xn(function(e) {
      var t = le(this.first, 0), r = this.first + this.size - 1;
      Oi(this, {
        from: t,
        to: le(r, J(this, r).text.length),
        text: this.splitLines(e),
        origin: "setValue",
        full: !0
      }, !0), this.cm && Yr(this.cm, 0, 0), ki(this, jn(t), Xa);
    }),
    replaceRange: function(e, t, r, n) {
      qi(this, e, t = he(this, t), r = r ? he(this, r) : t, n);
    },
    getRange: function(e, t, r) {
      var n = ee(this, he(this, e), he(this, t));
      return !1 === r ? n : n.join(r || this.lineSeparator());
    },
    getLine: function(e) {
      var t = this.getLineHandle(e);
      return t && t.text;
    },
    getLineHandle: function(e) {
      if (oe(this, e)) return J(this, e);
    },
    getLineNumber: function(e) {
      return ne(e);
    },
    getLineHandleVisualStart: function(e) {
      return "number" == typeof e && (e = J(this, e)), Xe(e);
    },
    lineCount: function() {
      return this.size;
    },
    firstLine: function() {
      return this.first;
    },
    lastLine: function() {
      return this.first + this.size - 1;
    },
    clipPos: function(e) {
      return he(this, e);
    },
    getCursor: function(e) {
      var t = this.sel.primary();
      return null == e || "head" == e ? t.head : "anchor" == e ? t.anchor : "end" == e || "to" == e || !1 === e ? t.to() : t.from();
    },
    listSelections: function() {
      return this.sel.ranges;
    },
    somethingSelected: function() {
      return this.sel.somethingSelected();
    },
    setCursor: xn(function(e, t, r) {
      bi(this, he(this, "number" == typeof e ? le(e, t || 0) : e), null, r);
    }),
    setSelection: xn(function(e, t, r) {
      bi(this, he(this, e), he(this, t || e), r);
    }),
    extendSelection: xn(function(e, t, r) {
      gi(this, he(this, e), t && he(this, t), r);
    }),
    extendSelections: xn(function(e, t) {
      vi(this, ge(this, e), t);
    }),
    extendSelectionsBy: xn(function(e, t) {
      vi(this, ge(this, g(this.sel.ranges, e)), t);
    }),
    setSelections: xn(function(e, t, r) {
      if (e.length) {
        for (var n = [], i = 0; i < e.length; i++) n[i] = new El(he(this, e[i].anchor), he(this, e[i].head));
        null == t && (t = Math.min(e.length - 1, this.sel.primIndex)), ki(this, Hn(this.cm, n, t), r);
      }
    }),
    addSelection: xn(function(e, t, r) {
      var n = this.sel.ranges.slice(0);
      n.push(new El(he(this, e), he(this, t || e))), ki(this, Hn(this.cm, n, n.length - 1), r);
    }),
    getSelection: function(e) {
      for (var t, r = this.sel.ranges, n = 0; n < r.length; n++) {
        var i = ee(this, r[n].from(), r[n].to());
        t = t ? t.concat(i) : i;
      }
      return !1 === e ? t : t.join(e || this.lineSeparator());
    },
    getSelections: function(e) {
      for (var t = [], r = this.sel.ranges, n = 0; n < r.length; n++) {
        var i = ee(this, r[n].from(), r[n].to());
        !1 !== e && (i = i.join(e || this.lineSeparator())), t[n] = i;
      }
      return t;
    },
    replaceSelection: function(e, t, r) {
      for (var n = [], i = 0; i < this.sel.ranges.length; i++) n[i] = e;
      this.replaceSelections(n, t, r || "+input");
    },
    replaceSelections: xn(function(e, t, r) {
      for (var n = [], i = this.sel, o = 0; o < i.ranges.length; o++) {
        var a = i.ranges[o];
        n[o] = {
          from: a.from(),
          to: a.to(),
          text: this.splitLines(e[o]),
          origin: r
        };
      }
      for (var l = t && "end" != t && Vn(this, n, t), s = n.length - 1; s >= 0; s--) Oi(this, n[s]);
      l ? wi(this, l) : this.cm && Zr(this.cm);
    }),
    undo: xn(function() {
      Ei(this, "undo");
    }),
    redo: xn(function() {
      Ei(this, "redo");
    }),
    undoSelection: xn(function() {
      Ei(this, "undo", !0);
    }),
    redoSelection: xn(function() {
      Ei(this, "redo", !0);
    }),
    setExtending: function(e) {
      this.extend = e;
    },
    getExtending: function() {
      return this.extend;
    },
    historySize: function() {
      for (var e = this.history, t = 0, r = 0, n = 0; n < e.done.length; n++) e.done[n].ranges || ++t;
      for (var i = 0; i < e.undone.length; i++) e.undone[i].ranges || ++r;
      return {
        undo: t,
        redo: r
      };
    },
    clearHistory: function() {
      var e = this;
      this.history = new ri(this.history.maxGeneration), Qn(this, function(t) {
        return t.history = e.history;
      }, !0);
    },
    markClean: function() {
      this.cleanGeneration = this.changeGeneration(!0);
    },
    changeGeneration: function(e) {
      return e && (this.history.lastOp = this.history.lastSelOp = this.history.lastOrigin = null), 
      this.history.generation;
    },
    isClean: function(e) {
      return this.history.generation == (e || this.cleanGeneration);
    },
    getHistory: function() {
      return {
        done: hi(this.history.done),
        undone: hi(this.history.undone)
      };
    },
    setHistory: function(e) {
      var t = this.history = new ri(this.history.maxGeneration);
      t.done = hi(e.done.slice(0), null, !0), t.undone = hi(e.undone.slice(0), null, !0);
    },
    setGutterMarker: xn(function(e, t, r) {
      return ji(this, e, "gutter", function(e) {
        var n = e.gutterMarkers || (e.gutterMarkers = {});
        return n[t] = r, !r && k(n) && (e.gutterMarkers = null), !0;
      });
    }),
    clearGutter: xn(function(e) {
      var t = this;
      this.iter(function(r) {
        r.gutterMarkers && r.gutterMarkers[e] && ji(t, r, "gutter", function() {
          return r.gutterMarkers[e] = null, k(r.gutterMarkers) && (r.gutterMarkers = null), 
          !0;
        });
      });
    }),
    lineInfo: function(e) {
      var t;
      if ("number" == typeof e) {
        if (!oe(this, e)) return null;
        if (t = e, !(e = J(this, e))) return null;
      } else if (null == (t = ne(e))) return null;
      return {
        line: t,
        handle: e,
        text: e.text,
        gutterMarkers: e.gutterMarkers,
        textClass: e.textClass,
        bgClass: e.bgClass,
        wrapClass: e.wrapClass,
        widgets: e.widgets
      };
    },
    addLineClass: xn(function(t, r, n) {
      return ji(this, t, "gutter" == r ? "gutter" : "class", function(t) {
        var i = "text" == r ? "textClass" : "background" == r ? "bgClass" : "gutter" == r ? "gutterClass" : "wrapClass";
        if (t[i]) {
          if (e(n).test(t[i])) return !1;
          t[i] += " " + n;
        } else t[i] = n;
        return !0;
      });
    }),
    removeLineClass: xn(function(t, r, n) {
      return ji(this, t, "gutter" == r ? "gutter" : "class", function(t) {
        var i = "text" == r ? "textClass" : "background" == r ? "bgClass" : "gutter" == r ? "gutterClass" : "wrapClass", o = t[i];
        if (!o) return !1;
        if (null == n) t[i] = null; else {
          var a = o.match(e(n));
          if (!a) return !1;
          var l = a.index + a[0].length;
          t[i] = o.slice(0, a.index) + (a.index && l != o.length ? " " : "") + o.slice(l) || null;
        }
        return !0;
      });
    }),
    addLineWidget: xn(function(e, t, r) {
      return $i(this, e, t, r);
    }),
    removeLineWidget: function(e) {
      e.clear();
    },
    markText: function(e, t, r) {
      return Vi(this, he(this, e), he(this, t), r, r && r.type || "range");
    },
    setBookmark: function(e, t) {
      var r = {
        replacedWith: t && (null == t.nodeType ? t.widget : t),
        insertLeft: t && t.insertLeft,
        clearWhenEmpty: !1,
        shared: t && t.shared,
        handleMouseEvents: t && t.handleMouseEvents
      };
      return Vi(this, e = he(this, e), e, r, "bookmark");
    },
    findMarksAt: function(e) {
      var t = [], r = J(this, (e = he(this, e)).line).markedSpans;
      if (r) for (var n = 0; n < r.length; ++n) {
        var i = r[n];
        (null == i.from || i.from <= e.ch) && (null == i.to || i.to >= e.ch) && t.push(i.marker.parent || i.marker);
      }
      return t;
    },
    findMarks: function(e, t, r) {
      e = he(this, e), t = he(this, t);
      var n = [], i = e.line;
      return this.iter(e.line, t.line + 1, function(o) {
        var a = o.markedSpans;
        if (a) for (var l = 0; l < a.length; l++) {
          var s = a[l];
          null != s.to && i == e.line && e.ch >= s.to || null == s.from && i != e.line || null != s.from && i == t.line && s.from >= t.ch || r && !r(s.marker) || n.push(s.marker.parent || s.marker);
        }
        ++i;
      }), n;
    },
    getAllMarks: function() {
      var e = [];
      return this.iter(function(t) {
        var r = t.markedSpans;
        if (r) for (var n = 0; n < r.length; ++n) null != r[n].from && e.push(r[n].marker);
      }), e;
    },
    posFromIndex: function(e) {
      var t, r = this.first, n = this.lineSeparator().length;
      return this.iter(function(i) {
        var o = i.text.length + n;
        if (o > e) return t = e, !0;
        e -= o, ++r;
      }), he(this, le(r, t));
    },
    indexFromPos: function(e) {
      var t = (e = he(this, e)).ch;
      if (e.line < this.first || e.ch < 0) return 0;
      var r = this.lineSeparator().length;
      return this.iter(this.first, e.line, function(e) {
        t += e.text.length + r;
      }), t;
    },
    copy: function(e) {
      var t = new Rl(te(this, this.first, this.first + this.size), this.modeOption, this.first, this.lineSep, this.direction);
      return t.scrollTop = this.scrollTop, t.scrollLeft = this.scrollLeft, t.sel = this.sel, 
      t.extend = !1, e && (t.history.undoDepth = this.history.undoDepth, t.setHistory(this.getHistory())), 
      t;
    },
    linkedDoc: function(e) {
      e || (e = {});
      var t = this.first, r = this.first + this.size;
      null != e.from && e.from > t && (t = e.from), null != e.to && e.to < r && (r = e.to);
      var n = new Rl(te(this, t, r), e.mode || this.modeOption, t, this.lineSep, this.direction);
      return e.sharedHist && (n.history = this.history), (this.linked || (this.linked = [])).push({
        doc: n,
        sharedHist: e.sharedHist
      }), n.linked = [ {
        doc: this,
        isParent: !0,
        sharedHist: e.sharedHist
      } ], Zi(n, Xi(this)), n;
    },
    unlinkDoc: function(e) {
      if (e instanceof Xo && (e = e.doc), this.linked) for (var t = 0; t < this.linked.length; ++t) {
        if (this.linked[t].doc == e) {
          this.linked.splice(t, 1), e.unlinkDoc(this), Yi(Xi(this));
          break;
        }
      }
      if (e.history == this.history) {
        var r = [ e.id ];
        Qn(e, function(e) {
          return r.push(e.id);
        }, !0), e.history = new ri(null), e.history.done = hi(this.history.done, r), e.history.undone = hi(this.history.undone, r);
      }
    },
    iterLinkedDocs: function(e) {
      Qn(this, e);
    },
    getMode: function() {
      return this.mode;
    },
    getEditor: function() {
      return this.cm;
    },
    splitLines: function(e) {
      return this.lineSep ? e.split(this.lineSep) : al(e);
    },
    lineSeparator: function() {
      return this.lineSep || "\n";
    },
    setDirection: xn(function(e) {
      "rtl" != e && (e = "ltr"), e != this.direction && (this.direction = e, this.iter(function(e) {
        return e.order = null;
      }), this.cm && ti(this.cm));
    })
  }), Rl.prototype.eachLine = Rl.prototype.iter;
  for (var Hl = 0, jl = !1, Bl = {
    3: "Pause",
    8: "Backspace",
    9: "Tab",
    13: "Enter",
    16: "Shift",
    17: "Ctrl",
    18: "Alt",
    19: "Pause",
    20: "CapsLock",
    27: "Esc",
    32: "Space",
    33: "PageUp",
    34: "PageDown",
    35: "End",
    36: "Home",
    37: "Left",
    38: "Up",
    39: "Right",
    40: "Down",
    44: "PrintScrn",
    45: "Insert",
    46: "Delete",
    59: ";",
    61: "=",
    91: "Mod",
    92: "Mod",
    93: "Mod",
    106: "*",
    107: "=",
    109: "-",
    110: ".",
    111: "/",
    145: "ScrollLock",
    173: "-",
    186: ";",
    187: "=",
    188: ",",
    189: "-",
    190: ".",
    191: "/",
    192: "`",
    219: "[",
    220: "\\",
    221: "]",
    222: "'",
    63232: "Up",
    63233: "Down",
    63234: "Left",
    63235: "Right",
    63272: "Delete",
    63273: "Home",
    63275: "End",
    63276: "PageUp",
    63277: "PageDown",
    63302: "Insert"
  }, Ul = 0; Ul < 10; Ul++) Bl[Ul + 48] = Bl[Ul + 96] = String(Ul);
  for (var Kl = 65; Kl <= 90; Kl++) Bl[Kl] = String.fromCharCode(Kl);
  for (var $l = 1; $l <= 12; $l++) Bl[$l + 111] = Bl[$l + 63235] = "F" + $l;
  var Vl = {
    basic: {
      Left: "goCharLeft",
      Right: "goCharRight",
      Up: "goLineUp",
      Down: "goLineDown",
      End: "goLineEnd",
      Home: "goLineStartSmart",
      PageUp: "goPageUp",
      PageDown: "goPageDown",
      Delete: "delCharAfter",
      Backspace: "delCharBefore",
      "Shift-Backspace": "delCharBefore",
      Tab: "defaultTab",
      "Shift-Tab": "indentAuto",
      Enter: "newlineAndIndent",
      Insert: "toggleOverwrite",
      Esc: "singleSelection"
    },
    pcDefault: {
      "Ctrl-A": "selectAll",
      "Ctrl-D": "deleteLine",
      "Ctrl-Z": "undo",
      "Shift-Ctrl-Z": "redo",
      "Ctrl-Y": "redo",
      "Ctrl-Home": "goDocStart",
      "Ctrl-End": "goDocEnd",
      "Ctrl-Up": "goLineUp",
      "Ctrl-Down": "goLineDown",
      "Ctrl-Left": "goGroupLeft",
      "Ctrl-Right": "goGroupRight",
      "Alt-Left": "goLineStart",
      "Alt-Right": "goLineEnd",
      "Ctrl-Backspace": "delGroupBefore",
      "Ctrl-Delete": "delGroupAfter",
      "Ctrl-S": "save",
      "Ctrl-F": "find",
      "Ctrl-G": "findNext",
      "Shift-Ctrl-G": "findPrev",
      "Shift-Ctrl-F": "replace",
      "Shift-Ctrl-R": "replaceAll",
      "Ctrl-[": "indentLess",
      "Ctrl-]": "indentMore",
      "Ctrl-U": "undoSelection",
      "Shift-Ctrl-U": "redoSelection",
      "Alt-U": "redoSelection",
      fallthrough: "basic"
    },
    emacsy: {
      "Ctrl-F": "goCharRight",
      "Ctrl-B": "goCharLeft",
      "Ctrl-P": "goLineUp",
      "Ctrl-N": "goLineDown",
      "Alt-F": "goWordRight",
      "Alt-B": "goWordLeft",
      "Ctrl-A": "goLineStart",
      "Ctrl-E": "goLineEnd",
      "Ctrl-V": "goPageDown",
      "Shift-Ctrl-V": "goPageUp",
      "Ctrl-D": "delCharAfter",
      "Ctrl-H": "delCharBefore",
      "Alt-D": "delWordAfter",
      "Alt-Backspace": "delWordBefore",
      "Ctrl-K": "killLine",
      "Ctrl-T": "transposeChars",
      "Ctrl-O": "openLine"
    },
    macDefault: {
      "Cmd-A": "selectAll",
      "Cmd-D": "deleteLine",
      "Cmd-Z": "undo",
      "Shift-Cmd-Z": "redo",
      "Cmd-Y": "redo",
      "Cmd-Home": "goDocStart",
      "Cmd-Up": "goDocStart",
      "Cmd-End": "goDocEnd",
      "Cmd-Down": "goDocEnd",
      "Alt-Left": "goGroupLeft",
      "Alt-Right": "goGroupRight",
      "Cmd-Left": "goLineLeft",
      "Cmd-Right": "goLineRight",
      "Alt-Backspace": "delGroupBefore",
      "Ctrl-Alt-Backspace": "delGroupAfter",
      "Alt-Delete": "delGroupAfter",
      "Cmd-S": "save",
      "Cmd-F": "find",
      "Cmd-G": "findNext",
      "Shift-Cmd-G": "findPrev",
      "Cmd-Alt-F": "replace",
      "Shift-Cmd-Alt-F": "replaceAll",
      "Cmd-[": "indentLess",
      "Cmd-]": "indentMore",
      "Cmd-Backspace": "delWrappedLineLeft",
      "Cmd-Delete": "delWrappedLineRight",
      "Cmd-U": "undoSelection",
      "Shift-Cmd-U": "redoSelection",
      "Ctrl-Up": "goDocStart",
      "Ctrl-Down": "goDocEnd",
      fallthrough: [ "basic", "emacsy" ]
    }
  };
  Vl["default"] = Ea ? Vl.macDefault : Vl.pcDefault;
  var Gl, Xl, Zl = {
    selectAll: Ai,
    singleSelection: function(e) {
      return e.setSelection(e.getCursor("anchor"), e.getCursor("head"), Xa);
    },
    killLine: function(e) {
      return ho(e, function(t) {
        if (t.empty()) {
          var r = J(e.doc, t.head.line).text.length;
          return t.head.ch == r && t.head.line < e.lastLine() ? {
            from: t.head,
            to: le(t.head.line + 1, 0)
          } : {
            from: t.head,
            to: le(t.head.line, r)
          };
        }
        return {
          from: t.from(),
          to: t.to()
        };
      });
    },
    deleteLine: function(e) {
      return ho(e, function(t) {
        return {
          from: le(t.from().line, 0),
          to: he(e.doc, le(t.to().line + 1, 0))
        };
      });
    },
    delLineLeft: function(e) {
      return ho(e, function(e) {
        return {
          from: le(e.from().line, 0),
          to: e.from()
        };
      });
    },
    delWrappedLineLeft: function(e) {
      return ho(e, function(t) {
        var r = e.charCoords(t.head, "div").top + 5;
        return {
          from: e.coordsChar({
            left: 0,
            top: r
          }, "div"),
          to: t.from()
        };
      });
    },
    delWrappedLineRight: function(e) {
      return ho(e, function(t) {
        var r = e.charCoords(t.head, "div").top + 5, n = e.coordsChar({
          left: e.display.lineDiv.offsetWidth + 100,
          top: r
        }, "div");
        return {
          from: t.from(),
          to: n
        };
      });
    },
    undo: function(e) {
      return e.undo();
    },
    redo: function(e) {
      return e.redo();
    },
    undoSelection: function(e) {
      return e.undoSelection();
    },
    redoSelection: function(e) {
      return e.redoSelection();
    },
    goDocStart: function(e) {
      return e.extendSelection(le(e.firstLine(), 0));
    },
    goDocEnd: function(e) {
      return e.extendSelection(le(e.lastLine()));
    },
    goLineStart: function(e) {
      return e.extendSelectionsBy(function(t) {
        return bo(e, t.head.line);
      }, {
        origin: "+move",
        bias: 1
      });
    },
    goLineStartSmart: function(e) {
      return e.extendSelectionsBy(function(t) {
        return wo(e, t.head);
      }, {
        origin: "+move",
        bias: 1
      });
    },
    goLineEnd: function(e) {
      return e.extendSelectionsBy(function(t) {
        return xo(e, t.head.line);
      }, {
        origin: "+move",
        bias: -1
      });
    },
    goLineRight: function(e) {
      return e.extendSelectionsBy(function(t) {
        var r = e.cursorCoords(t.head, "div").top + 5;
        return e.coordsChar({
          left: e.display.lineDiv.offsetWidth + 100,
          top: r
        }, "div");
      }, Ya);
    },
    goLineLeft: function(e) {
      return e.extendSelectionsBy(function(t) {
        var r = e.cursorCoords(t.head, "div").top + 5;
        return e.coordsChar({
          left: 0,
          top: r
        }, "div");
      }, Ya);
    },
    goLineLeftSmart: function(e) {
      return e.extendSelectionsBy(function(t) {
        var r = e.cursorCoords(t.head, "div").top + 5, n = e.coordsChar({
          left: 0,
          top: r
        }, "div");
        return n.ch < e.getLine(n.line).search(/\S/) ? wo(e, t.head) : n;
      }, Ya);
    },
    goLineUp: function(e) {
      return e.moveV(-1, "line");
    },
    goLineDown: function(e) {
      return e.moveV(1, "line");
    },
    goPageUp: function(e) {
      return e.moveV(-1, "page");
    },
    goPageDown: function(e) {
      return e.moveV(1, "page");
    },
    goCharLeft: function(e) {
      return e.moveH(-1, "char");
    },
    goCharRight: function(e) {
      return e.moveH(1, "char");
    },
    goColumnLeft: function(e) {
      return e.moveH(-1, "column");
    },
    goColumnRight: function(e) {
      return e.moveH(1, "column");
    },
    goWordLeft: function(e) {
      return e.moveH(-1, "word");
    },
    goGroupRight: function(e) {
      return e.moveH(1, "group");
    },
    goGroupLeft: function(e) {
      return e.moveH(-1, "group");
    },
    goWordRight: function(e) {
      return e.moveH(1, "word");
    },
    delCharBefore: function(e) {
      return e.deleteH(-1, "char");
    },
    delCharAfter: function(e) {
      return e.deleteH(1, "char");
    },
    delWordBefore: function(e) {
      return e.deleteH(-1, "word");
    },
    delWordAfter: function(e) {
      return e.deleteH(1, "word");
    },
    delGroupBefore: function(e) {
      return e.deleteH(-1, "group");
    },
    delGroupAfter: function(e) {
      return e.deleteH(1, "group");
    },
    indentAuto: function(e) {
      return e.indentSelection("smart");
    },
    indentMore: function(e) {
      return e.indentSelection("add");
    },
    indentLess: function(e) {
      return e.indentSelection("subtract");
    },
    insertTab: function(e) {
      return e.replaceSelection("\t");
    },
    insertSoftTab: function(e) {
      for (var t = [], r = e.listSelections(), n = e.options.tabSize, i = 0; i < r.length; i++) {
        var o = r[i].from(), a = d(e.getLine(o.line), o.ch, n);
        t.push(h(n - a % n));
      }
      e.replaceSelections(t);
    },
    defaultTab: function(e) {
      e.somethingSelected() ? e.indentSelection("add") : e.execCommand("insertTab");
    },
    transposeChars: function(e) {
      return vn(e, function() {
        for (var t = e.listSelections(), r = [], n = 0; n < t.length; n++) if (t[n].empty()) {
          var i = t[n].head, o = J(e.doc, i.line).text;
          if (o) if (i.ch == o.length && (i = new le(i.line, i.ch - 1)), i.ch > 0) i = new le(i.line, i.ch + 1), 
          e.replaceRange(o.charAt(i.ch - 1) + o.charAt(i.ch - 2), le(i.line, i.ch - 2), i, "+transpose"); else if (i.line > e.doc.first) {
            var a = J(e.doc, i.line - 1).text;
            a && (i = new le(i.line, 1), e.replaceRange(o.charAt(0) + e.doc.lineSeparator() + a.charAt(a.length - 1), le(i.line - 1, a.length - 1), i, "+transpose"));
          }
          r.push(new El(i, i));
        }
        e.setSelections(r);
      });
    },
    newlineAndIndent: function(e) {
      return vn(e, function() {
        for (var t = e.listSelections(), r = t.length - 1; r >= 0; r--) e.replaceRange(e.doc.lineSeparator(), t[r].anchor, t[r].head, "+input");
        t = e.listSelections();
        for (var n = 0; n < t.length; n++) e.indentLine(t[n].from().line, null, !0);
        Zr(e);
      });
    },
    openLine: function(e) {
      return e.replaceSelection("\n", "start");
    },
    toggleOverwrite: function(e) {
      return e.toggleOverwrite();
    }
  }, Yl = new Ba(), Ql = null, Jl = 400, es = function(e, t, r) {
    this.time = e, this.pos = t, this.button = r;
  };
  es.prototype.compare = function(e, t, r) {
    return this.time + Jl > e && 0 == se(t, this.pos) && r == this.button;
  };
  var ts = {
    toString: function() {
      return "CodeMirror.Init";
    }
  }, rs = {}, ns = {};
  Xo.defaults = rs, Xo.optionHandlers = ns;
  var is = [];
  Xo.defineInitHook = function(e) {
    return is.push(e);
  };
  var os = null, as = function(e) {
    this.cm = e, this.lastAnchorNode = this.lastAnchorOffset = this.lastFocusNode = this.lastFocusOffset = null, 
    this.polling = new Ba(), this.composing = null, this.gracePeriod = !1, this.readDOMTimeout = null;
  };
  as.prototype.init = function(e) {
    function t(e) {
      for (var t = e.target; t; t = t.parentNode) {
        if (t == a) return !0;
        if (/\bCodeMirror-(?:line)?widget\b/.test(t.className)) break;
      }
      return !1;
    }
    function r(e) {
      if (t(e) && !O(o, e)) {
        if (o.somethingSelected()) Qo({
          lineWise: !1,
          text: o.getSelections()
        }), "cut" == e.type && o.replaceSelection("", null, "cut"); else {
          if (!o.options.lineWiseCopyCut) return;
          var r = ra(o);
          Qo({
            lineWise: !0,
            text: r.text
          }), "cut" == e.type && o.operation(function() {
            o.setSelections(r.ranges, 0, Xa), o.replaceSelection("", null, "cut");
          });
        }
        if (e.clipboardData) {
          e.clipboardData.clearData();
          var n = os.text.join("\n");
          if (e.clipboardData.setData("Text", n), e.clipboardData.getData("Text") == n) return void e.preventDefault();
        }
        var l = ia(), s = l.firstChild;
        o.display.lineSpace.insertBefore(l, o.display.lineSpace.firstChild), s.value = os.text.join("\n");
        var c = document.activeElement;
        ja(s), setTimeout(function() {
          o.display.lineSpace.removeChild(l), c.focus(), c == a && i.showPrimarySelection();
        }, 50);
      }
    }
    var n = this, i = this, o = i.cm, a = i.div = e.lineDiv;
    na(a, o.options.spellcheck, o.options.autocorrect, o.options.autocapitalize), il(a, "paste", function(e) {
      !t(e) || O(o, e) || ea(e, o) || _a <= 11 && setTimeout(yn(o, function() {
        return n.updateFromDOM();
      }), 20);
    }), il(a, "compositionstart", function(e) {
      n.composing = {
        data: e.data,
        done: !1
      };
    }), il(a, "compositionupdate", function(e) {
      n.composing || (n.composing = {
        data: e.data,
        done: !1
      });
    }), il(a, "compositionend", function(e) {
      n.composing && (e.data != n.composing.data && n.readFromDOMSoon(), n.composing.done = !0);
    }), il(a, "touchstart", function() {
      return i.forceCompositionEnd();
    }), il(a, "input", function() {
      n.composing || n.readFromDOMSoon();
    }), il(a, "copy", r), il(a, "cut", r);
  }, as.prototype.screenReaderLabelChanged = function(e) {
    e ? this.div.setAttribute("aria-label", e) : this.div.removeAttribute("aria-label");
  }, as.prototype.prepareSelection = function() {
    var e = Dr(this.cm, !1);
    return e.focus = document.activeElement == this.div, e;
  }, as.prototype.showSelection = function(e, t) {
    e && this.cm.display.view.length && ((e.focus || t) && this.showPrimarySelection(), 
    this.showMultipleSelections(e));
  }, as.prototype.getSelection = function() {
    return this.cm.display.wrapper.ownerDocument.getSelection();
  }, as.prototype.showPrimarySelection = function() {
    var e = this.getSelection(), t = this.cm, r = t.doc.sel.primary(), n = r.from(), i = r.to();
    if (t.display.viewTo == t.display.viewFrom || n.line >= t.display.viewTo || i.line < t.display.viewFrom) e.removeAllRanges(); else {
      var o = fa(t, e.anchorNode, e.anchorOffset), a = fa(t, e.focusNode, e.focusOffset);
      if (!o || o.bad || !a || a.bad || 0 != se(fe(o, a), n) || 0 != se(de(o, a), i)) {
        var l = t.display.view, s = n.line >= t.display.viewFrom && sa(t, n) || {
          node: l[0].measure.map[2],
          offset: 0
        }, c = i.line < t.display.viewTo && sa(t, i);
        if (!c) {
          var u = l[l.length - 1].measure, d = u.maps ? u.maps[u.maps.length - 1] : u.map;
          c = {
            node: d[d.length - 1],
            offset: d[d.length - 2] - d[d.length - 3]
          };
        }
        if (s && c) {
          var f, p = e.rangeCount && e.getRangeAt(0);
          try {
            f = qa(s.node, s.offset, c.offset, c.node);
          } catch ($a) {}
          f && (!ya && t.state.focused ? (e.collapse(s.node, s.offset), f.collapsed || (e.removeAllRanges(), 
          e.addRange(f))) : (e.removeAllRanges(), e.addRange(f)), p && null == e.anchorNode ? e.addRange(p) : ya && this.startGracePeriod()), 
          this.rememberSelection();
        } else e.removeAllRanges();
      }
    }
  }, as.prototype.startGracePeriod = function() {
    var e = this;
    clearTimeout(this.gracePeriod), this.gracePeriod = setTimeout(function() {
      e.gracePeriod = !1, e.selectionChanged() && e.cm.operation(function() {
        return e.cm.curOp.selectionChanged = !0;
      });
    }, 20);
  }, as.prototype.showMultipleSelections = function(e) {
    r(this.cm.display.cursorDiv, e.cursors), r(this.cm.display.selectionDiv, e.selection);
  }, as.prototype.rememberSelection = function() {
    var e = this.getSelection();
    this.lastAnchorNode = e.anchorNode, this.lastAnchorOffset = e.anchorOffset, this.lastFocusNode = e.focusNode, 
    this.lastFocusOffset = e.focusOffset;
  }, as.prototype.selectionInEditor = function() {
    var e = this.getSelection();
    if (!e.rangeCount) return !1;
    var t = e.getRangeAt(0).commonAncestorContainer;
    return o(this.div, t);
  }, as.prototype.focus = function() {
    "nocursor" != this.cm.options.readOnly && (this.selectionInEditor() && document.activeElement == this.div || this.showSelection(this.prepareSelection(), !0), 
    this.div.focus());
  }, as.prototype.blur = function() {
    this.div.blur();
  }, as.prototype.getField = function() {
    return this.div;
  }, as.prototype.supportsTouch = function() {
    return !0;
  }, as.prototype.receivedFocus = function() {
    function e() {
      t.cm.state.focused && (t.pollSelection(), t.polling.set(t.cm.options.pollInterval, e));
    }
    var t = this;
    this.selectionInEditor() ? this.pollSelection() : vn(this.cm, function() {
      return t.cm.curOp.selectionChanged = !0;
    }), this.polling.set(this.cm.options.pollInterval, e);
  }, as.prototype.selectionChanged = function() {
    var e = this.getSelection();
    return e.anchorNode != this.lastAnchorNode || e.anchorOffset != this.lastAnchorOffset || e.focusNode != this.lastFocusNode || e.focusOffset != this.lastFocusOffset;
  }, as.prototype.pollSelection = function() {
    if (null == this.readDOMTimeout && !this.gracePeriod && this.selectionChanged()) {
      var e = this.getSelection(), t = this.cm;
      if (Oa && Ta && this.cm.display.gutterSpecs.length && ca(e.anchorNode)) return this.cm.triggerOnKeyDown({
        type: "keydown",
        keyCode: 8,
        preventDefault: Math.abs
      }), this.blur(), void this.focus();
      if (!this.composing) {
        this.rememberSelection();
        var r = fa(t, e.anchorNode, e.anchorOffset), n = fa(t, e.focusNode, e.focusOffset);
        r && n && vn(t, function() {
          ki(t.doc, jn(r, n), Xa), (r.bad || n.bad) && (t.curOp.selectionChanged = !0);
        });
      }
    }
  }, as.prototype.pollContent = function() {
    null != this.readDOMTimeout && (clearTimeout(this.readDOMTimeout), this.readDOMTimeout = null);
    var e, t, r, n = this.cm, i = n.display, o = n.doc.sel.primary(), a = o.from(), l = o.to();
    if (0 == a.ch && a.line > n.firstLine() && (a = le(a.line - 1, J(n.doc, a.line - 1).length)), 
    l.ch == J(n.doc, l.line).text.length && l.line < n.lastLine() && (l = le(l.line + 1, 0)), 
    a.line < i.viewFrom || l.line > i.viewTo - 1) return !1;
    a.line == i.viewFrom || 0 == (e = Sr(n, a.line)) ? (t = ne(i.view[0].line), r = i.view[0].node) : (t = ne(i.view[e].line), 
    r = i.view[e - 1].node.nextSibling);
    var s, c, u = Sr(n, l.line);
    if (u == i.view.length - 1 ? (s = i.viewTo - 1, c = i.lineDiv.lastChild) : (s = ne(i.view[u + 1].line) - 1, 
    c = i.view[u + 1].node.previousSibling), !r) return !1;
    for (var d = n.doc.splitLines(da(n, r, c, t, s)), f = ee(n.doc, le(t, 0), le(s, J(n.doc, s).text.length)); d.length > 1 && f.length > 1; ) if (m(d) == m(f)) d.pop(), 
    f.pop(), s--; else {
      if (d[0] != f[0]) break;
      d.shift(), f.shift(), t++;
    }
    for (var p = 0, h = 0, g = d[0], v = f[0], y = Math.min(g.length, v.length); p < y && g.charCodeAt(p) == v.charCodeAt(p); ) ++p;
    for (var b = m(d), x = m(f), w = Math.min(b.length - (1 == d.length ? p : 0), x.length - (1 == f.length ? p : 0)); h < w && b.charCodeAt(b.length - h - 1) == x.charCodeAt(x.length - h - 1); ) ++h;
    if (1 == d.length && 1 == f.length && t == a.line) for (;p && p > a.ch && b.charCodeAt(b.length - h - 1) == x.charCodeAt(x.length - h - 1); ) p--, 
    h++;
    d[d.length - 1] = b.slice(0, b.length - h).replace(/^\u200b+/, ""), d[0] = d[0].slice(p).replace(/\u200b+$/, "");
    var k = le(t, p), _ = le(s, f.length ? m(f).length - h : 0);
    return d.length > 1 || d[0] || se(k, _) ? (qi(n.doc, d, k, _, "+input"), !0) : void 0;
  }, as.prototype.ensurePolled = function() {
    this.forceCompositionEnd();
  }, as.prototype.reset = function() {
    this.forceCompositionEnd();
  }, as.prototype.forceCompositionEnd = function() {
    this.composing && (clearTimeout(this.readDOMTimeout), this.composing = null, this.updateFromDOM(), 
    this.div.blur(), this.div.focus());
  }, as.prototype.readFromDOMSoon = function() {
    var e = this;
    null == this.readDOMTimeout && (this.readDOMTimeout = setTimeout(function() {
      if (e.readDOMTimeout = null, e.composing) {
        if (!e.composing.done) return;
        e.composing = null;
      }
      e.updateFromDOM();
    }, 80));
  }, as.prototype.updateFromDOM = function() {
    var e = this;
    !this.cm.isReadOnly() && this.pollContent() || vn(this.cm, function() {
      return Tr(e.cm);
    });
  }, as.prototype.setUneditable = function(e) {
    e.contentEditable = "false";
  }, as.prototype.onKeyPress = function(e) {
    0 == e.charCode || this.composing || (e.preventDefault(), this.cm.isReadOnly() || yn(this.cm, Jo)(this.cm, String.fromCharCode(null == e.charCode ? e.keyCode : e.charCode), 0));
  }, as.prototype.readOnlyChanged = function(e) {
    this.div.contentEditable = String("nocursor" != e);
  }, as.prototype.onContextMenu = function() {}, as.prototype.resetPosition = function() {}, 
  as.prototype.needsContentAttribute = !0;
  var ls = function(e) {
    this.cm = e, this.prevInput = "", this.pollingFast = !1, this.polling = new Ba(), 
    this.hasSelection = !1, this.composing = null;
  };
  ls.prototype.init = function(e) {
    function t(e) {
      if (!O(i, e)) {
        if (i.somethingSelected()) Qo({
          lineWise: !1,
          text: i.getSelections()
        }); else {
          if (!i.options.lineWiseCopyCut) return;
          var t = ra(i);
          Qo({
            lineWise: !0,
            text: t.text
          }), "cut" == e.type ? i.setSelections(t.ranges, null, Xa) : (n.prevInput = "", o.value = t.text.join("\n"), 
          ja(o));
        }
        "cut" == e.type && (i.state.cutIncoming = +new Date());
      }
    }
    var r = this, n = this, i = this.cm;
    this.createField(e);
    var o = this.textarea;
    e.wrapper.insertBefore(this.wrapper, e.wrapper.firstChild), za && (o.style.width = "0px"), 
    il(o, "input", function() {
      ka && _a >= 9 && r.hasSelection && (r.hasSelection = null), n.poll();
    }), il(o, "paste", function(e) {
      O(i, e) || ea(e, i) || (i.state.pasteIncoming = +new Date(), n.fastPoll());
    }), il(o, "cut", t), il(o, "copy", t), il(e.scroller, "paste", function(t) {
      if (!It(e, t) && !O(i, t)) {
        if (!o.dispatchEvent) return i.state.pasteIncoming = +new Date(), void n.focus();
        var r = new Event("paste");
        r.clipboardData = t.clipboardData, o.dispatchEvent(r);
      }
    }), il(e.lineSpace, "selectstart", function(t) {
      It(e, t) || P(t);
    }), il(o, "compositionstart", function() {
      var e = i.getCursor("from");
      n.composing && n.composing.range.clear(), n.composing = {
        start: e,
        range: i.markText(e, i.getCursor("to"), {
          className: "CodeMirror-composing"
        })
      };
    }), il(o, "compositionend", function() {
      n.composing && (n.poll(), n.composing.range.clear(), n.composing = null);
    });
  }, ls.prototype.createField = function() {
    this.wrapper = ia(), this.textarea = this.wrapper.firstChild;
  }, ls.prototype.screenReaderLabelChanged = function(e) {
    e ? this.textarea.setAttribute("aria-label", e) : this.textarea.removeAttribute("aria-label");
  }, ls.prototype.prepareSelection = function() {
    var e = this.cm, t = e.display, r = e.doc, n = Dr(e);
    if (e.options.moveInputWithCursor) {
      var i = sr(e, r.sel.primary().head, "div"), o = t.wrapper.getBoundingClientRect(), a = t.lineDiv.getBoundingClientRect();
      n.teTop = Math.max(0, Math.min(t.wrapper.clientHeight - 10, i.top + a.top - o.top)), 
      n.teLeft = Math.max(0, Math.min(t.wrapper.clientWidth - 10, i.left + a.left - o.left));
    }
    return n;
  }, ls.prototype.showSelection = function(e) {
    var t = this.cm.display;
    r(t.cursorDiv, e.cursors), r(t.selectionDiv, e.selection), null != e.teTop && (this.wrapper.style.top = e.teTop + "px", 
    this.wrapper.style.left = e.teLeft + "px");
  }, ls.prototype.reset = function(e) {
    if (!this.contextMenuPending && !this.composing) {
      var t = this.cm;
      if (t.somethingSelected()) {
        this.prevInput = "";
        var r = t.getSelection();
        this.textarea.value = r, t.state.focused && ja(this.textarea), ka && _a >= 9 && (this.hasSelection = r);
      } else e || (this.prevInput = this.textarea.value = "", ka && _a >= 9 && (this.hasSelection = null));
    }
  }, ls.prototype.getField = function() {
    return this.textarea;
  }, ls.prototype.supportsTouch = function() {
    return !1;
  }, ls.prototype.focus = function() {
    if ("nocursor" != this.cm.options.readOnly && (!Da || a() != this.textarea)) try {
      this.textarea.focus();
    } catch ($a) {}
  }, ls.prototype.blur = function() {
    this.textarea.blur();
  }, ls.prototype.resetPosition = function() {
    this.wrapper.style.top = this.wrapper.style.left = 0;
  }, ls.prototype.receivedFocus = function() {
    this.slowPoll();
  }, ls.prototype.slowPoll = function() {
    var e = this;
    this.pollingFast || this.polling.set(this.cm.options.pollInterval, function() {
      e.poll(), e.cm.state.focused && e.slowPoll();
    });
  }, ls.prototype.fastPoll = function() {
    function e() {
      r.poll() || t ? (r.pollingFast = !1, r.slowPoll()) : (t = !0, r.polling.set(60, e));
    }
    var t = !1, r = this;
    r.pollingFast = !0, r.polling.set(20, e);
  }, ls.prototype.poll = function() {
    var e = this, t = this.cm, r = this.textarea, n = this.prevInput;
    if (this.contextMenuPending || !t.state.focused || ll(r) && !n && !this.composing || t.isReadOnly() || t.options.disableInput || t.state.keySeq) return !1;
    var i = r.value;
    if (i == n && !t.somethingSelected()) return !1;
    if (ka && _a >= 9 && this.hasSelection === i || Ea && /[\uf700-\uf7ff]/.test(i)) return t.display.input.reset(), 
    !1;
    if (t.doc.sel == t.display.selForContextMenu) {
      var o = i.charCodeAt(0);
      if (8203 != o || n || (n = "\u200b"), 8666 == o) return this.reset(), this.cm.execCommand("undo");
    }
    for (var a = 0, l = Math.min(n.length, i.length); a < l && n.charCodeAt(a) == i.charCodeAt(a); ) ++a;
    return vn(t, function() {
      Jo(t, i.slice(a), n.length - a, null, e.composing ? "*compose" : null), i.length > 1e3 || i.indexOf("\n") > -1 ? r.value = e.prevInput = "" : e.prevInput = i, 
      e.composing && (e.composing.range.clear(), e.composing.range = t.markText(e.composing.start, t.getCursor("to"), {
        className: "CodeMirror-composing"
      }));
    }), !0;
  }, ls.prototype.ensurePolled = function() {
    this.pollingFast && this.poll() && (this.pollingFast = !1);
  }, ls.prototype.onKeyPress = function() {
    ka && _a >= 9 && (this.hasSelection = null), this.fastPoll();
  }, ls.prototype.onContextMenu = function(e) {
    function t() {
      if (null != a.selectionStart) {
        var e = i.somethingSelected(), t = "\u200b" + (e ? a.value : "");
        a.value = "\u21da", a.value = t, n.prevInput = e ? "" : "\u200b", a.selectionStart = 1, 
        a.selectionEnd = t.length, o.selForContextMenu = i.doc.sel;
      }
    }
    function r() {
      if (n.contextMenuPending == r && (n.contextMenuPending = !1, n.wrapper.style.cssText = d, 
      a.style.cssText = u, ka && _a < 9 && o.scrollbars.setScrollTop(o.scroller.scrollTop = s), 
      null != a.selectionStart)) {
        (!ka || ka && _a < 9) && t();
        var e = 0, l = function() {
          o.selForContextMenu == i.doc.sel && 0 == a.selectionStart && a.selectionEnd > 0 && "\u200b" == n.prevInput ? yn(i, Ai)(i) : e++ < 10 ? o.detectingSelectAll = setTimeout(l, 500) : (o.selForContextMenu = null, 
          o.input.reset());
        };
        o.detectingSelectAll = setTimeout(l, 200);
      }
    }
    var n = this, i = n.cm, o = i.display, a = n.textarea;
    n.contextMenuPending && n.contextMenuPending();
    var l = Cr(i, e), s = o.scroller.scrollTop;
    if (l && !Ma) {
      i.options.resetSelectionOnContextMenu && -1 == i.doc.sel.contains(l) && yn(i, ki)(i.doc, jn(l), Xa);
      var c, u = a.style.cssText, d = n.wrapper.style.cssText, f = n.wrapper.offsetParent.getBoundingClientRect();
      if (n.wrapper.style.cssText = "position: static", a.style.cssText = "position: absolute; width: 30px; height: 30px;\n      top: " + (e.clientY - f.top - 5) + "px; left: " + (e.clientX - f.left - 5) + "px;\n      z-index: 1000; background: " + (ka ? "rgba(255, 255, 255, .05)" : "transparent") + ";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);", 
      Ca && (c = window.scrollY), o.input.focus(), Ca && window.scrollTo(null, c), o.input.reset(), 
      i.somethingSelected() || (a.value = n.prevInput = " "), n.contextMenuPending = r, 
      o.selForContextMenu = i.doc.sel, clearTimeout(o.detectingSelectAll), ka && _a >= 9 && t(), 
      Ra) {
        F(e);
        var p = function() {
          A(window, "mouseup", p), setTimeout(r, 20);
        };
        il(window, "mouseup", p);
      } else setTimeout(r, 50);
    }
  }, ls.prototype.readOnlyChanged = function(e) {
    e || this.reset(), this.textarea.disabled = "nocursor" == e;
  }, ls.prototype.setUneditable = function() {}, ls.prototype.needsContentAttribute = !1, 
  $o(Xo), oa(Xo);
  var ss = "iter insert remove copy getEditor constructor".split(" ");
  for (var cs in Rl.prototype) Rl.prototype.hasOwnProperty(cs) && f(ss, cs) < 0 && (Xo.prototype[cs] = function(e) {
    return function() {
      return e.apply(this.doc, arguments);
    };
  }(Rl.prototype[cs]));
  return I(Rl), Xo.inputStyles = {
    textarea: ls,
    contenteditable: as
  }, Xo.defineMode = function(e) {
    Xo.defaults.mode || "null" == e || (Xo.defaults.mode = e), K.apply(this, arguments);
  }, Xo.defineMIME = $, Xo.defineMode("null", function() {
    return {
      token: function(e) {
        return e.skipToEnd();
      }
    };
  }), Xo.defineMIME("text/plain", "null"), Xo.defineExtension = function(e, t) {
    Xo.prototype[e] = t;
  }, Xo.defineDocExtension = function(e, t) {
    Rl.prototype[e] = t;
  }, Xo.fromTextArea = ha, ma(Xo), Xo.version = "5.54.0", Xo;
}), function(e) {
  "object" == typeof exports && "object" == typeof module ? e(require("../../lib/codemirror")) : "function" == typeof define && define.amd ? define([ "../../lib/codemirror" ], e) : e(CodeMirror);
}(function(e) {
  "use strict";
  e.multiplexingMode = function(t) {
    function r(e, t, r, n) {
      if ("string" == typeof t) {
        var i = e.indexOf(t, r);
        return n && i > -1 ? i + t.length : i;
      }
      var o = t.exec(r ? e.slice(r) : e);
      return o ? o.index + r + (n ? o[0].length : 0) : -1;
    }
    var n = Array.prototype.slice.call(arguments, 1);
    return {
      startState: function() {
        return {
          outer: e.startState(t),
          innerActive: null,
          inner: null
        };
      },
      copyState: function(r) {
        return {
          outer: e.copyState(t, r.outer),
          innerActive: r.innerActive,
          inner: r.innerActive && e.copyState(r.innerActive.mode, r.inner)
        };
      },
      token: function(i, o) {
        if (o.innerActive) {
          var a = o.innerActive;
          c = i.string;
          if (!a.close && i.sol()) return o.innerActive = o.inner = null, this.token(i, o);
          if ((d = a.close ? r(c, a.close, i.pos, a.parseDelimiters) : -1) == i.pos && !a.parseDelimiters) return i.match(a.close), 
          o.innerActive = o.inner = null, a.delimStyle && a.delimStyle + " " + a.delimStyle + "-close";
          d > -1 && (i.string = c.slice(0, d));
          var l = a.mode.token(i, o.inner);
          return d > -1 && (i.string = c), d == i.pos && a.parseDelimiters && (o.innerActive = o.inner = null), 
          a.innerStyle && (l = l ? l + " " + a.innerStyle : a.innerStyle), l;
        }
        for (var s = Infinity, c = i.string, u = 0; u < n.length; ++u) {
          var d, f = n[u];
          if ((d = r(c, f.open, i.pos)) == i.pos) {
            f.parseDelimiters || i.match(f.open), o.innerActive = f;
            var p = 0;
            if (t.indent) {
              var h = t.indent(o.outer, "", "");
              h !== e.Pass && (p = h);
            }
            return o.inner = e.startState(f.mode, p), f.delimStyle && f.delimStyle + " " + f.delimStyle + "-open";
          }
          -1 != d && d < s && (s = d);
        }
        s != Infinity && (i.string = c.slice(0, s));
        var m = t.token(i, o.outer);
        return s != Infinity && (i.string = c), m;
      },
      indent: function(r, n, i) {
        var o = r.innerActive ? r.innerActive.mode : t;
        return o.indent ? o.indent(r.innerActive ? r.inner : r.outer, n, i) : e.Pass;
      },
      blankLine: function(r) {
        var i = r.innerActive ? r.innerActive.mode : t;
        if (i.blankLine && i.blankLine(r.innerActive ? r.inner : r.outer), r.innerActive) "\n" === r.innerActive.close && (r.innerActive = r.inner = null); else for (var o = 0; o < n.length; ++o) {
          var a = n[o];
          "\n" === a.open && (r.innerActive = a, r.inner = e.startState(a.mode, i.indent ? i.indent(r.outer, "", "") : 0));
        }
      },
      electricChars: t.electricChars,
      innerMode: function(e) {
        return e.inner ? {
          state: e.inner,
          mode: e.innerActive.mode
        } : {
          state: e.outer,
          mode: t
        };
      }
    };
  };
}), function(e) {
  "object" == typeof exports && "object" == typeof module ? e(require("../../lib/codemirror")) : "function" == typeof define && define.amd ? define([ "../../lib/codemirror" ], e) : e(CodeMirror);
}(function(e) {
  "use strict";
  function t(e, t, r, n, i, o) {
    this.indented = e, this.column = t, this.type = r, this.info = n, this.align = i, 
    this.prev = o;
  }
  function r(e, r, n, i) {
    var o = e.indented;
    return e.context && "statement" == e.context.type && "statement" != n && (o = e.context.indented), 
    e.context = new t(o, r, n, i, null, e.context);
  }
  function n(e) {
    var t = e.context.type;
    return ")" != t && "]" != t && "}" != t || (e.indented = e.context.indented), e.context = e.context.prev;
  }
  function i(e, t, r) {
    return "variable" == t.prevToken || "type" == t.prevToken || (!!/\S(?:[^- ]>|[*\]])\s*$|\*$/.test(e.string.slice(0, r)) || (!(!t.typeAtEndOfLine || e.column() != e.indentation()) || void 0));
  }
  function o(e) {
    for (;;) {
      if (!e || "top" == e.type) return !0;
      if ("}" == e.type && "namespace" != e.prev.info) return !1;
      e = e.prev;
    }
  }
  function a(e) {
    for (var t = {}, r = e.split(" "), n = 0; n < r.length; ++n) t[r[n]] = !0;
    return t;
  }
  function l(e, t) {
    return "function" == typeof e ? e(t) : e.propertyIsEnumerable(t);
  }
  function s(e) {
    return l(M, e) || /.+_t$/.test(e);
  }
  function c(e) {
    return s(e) || l(L, e);
  }
  function u(e, t) {
    if (!t.startOfLine) return !1;
    for (var r, n = null; r = e.peek(); ) {
      if ("\\" == r && e.match(/^.$/)) {
        n = u;
        break;
      }
      if ("/" == r && e.match(/^\/[\/\*]/, !1)) break;
      e.next();
    }
    return t.tokenize = n, "meta";
  }
  function d(e, t) {
    return "type" == t.prevToken && "type";
  }
  function f(e) {
    return !(!e || e.length < 2) && ("_" == e[0] && ("_" == e[1] || e[1] !== e[1].toLowerCase()));
  }
  function p(e) {
    return e.eatWhile(/[\w\.']/), "number";
  }
  function h(e, t) {
    if (e.backUp(1), e.match(/(R|u8R|uR|UR|LR)/)) {
      var r = e.match(/"([^\s\\()]{0,16})\(/);
      return !!r && (t.cpp11RawStringDelim = r[1], t.tokenize = v, v(e, t));
    }
    return e.match(/(u8|u|U|L)/) ? !!e.match(/["']/, !1) && "string" : (e.next(), !1);
  }
  function m(e) {
    var t = /(\w+)::~?(\w+)$/.exec(e);
    return t && t[1] == t[2];
  }
  function g(e, t) {
    for (var r; null != (r = e.next()); ) if ('"' == r && !e.eat('"')) {
      t.tokenize = null;
      break;
    }
    return "string";
  }
  function v(e, t) {
    var r = t.cpp11RawStringDelim.replace(/[^\w\s]/g, "\\$&");
    return e.match(new RegExp(".*?\\)" + r + '"')) ? t.tokenize = null : e.skipToEnd(), 
    "string";
  }
  function y(t, r) {
    function n(e) {
      if (e) for (var t in e) e.hasOwnProperty(t) && i.push(t);
    }
    "string" == typeof t && (t = [ t ]);
    var i = [];
    n(r.keywords), n(r.types), n(r.builtin), n(r.atoms), i.length && (r.helperType = t[0], 
    e.registerHelper("hintWords", t[0], i));
    for (var o = 0; o < t.length; ++o) e.defineMIME(t[o], r);
  }
  function b(e, t) {
    for (var r = !1; !e.eol(); ) {
      if (!r && e.match('"""')) {
        t.tokenize = null;
        break;
      }
      r = "\\" == e.next() && !r;
    }
    return "string";
  }
  function x(e) {
    return function(t, r) {
      for (var n; n = t.next(); ) {
        if ("*" == n && t.eat("/")) {
          if (1 == e) {
            r.tokenize = null;
            break;
          }
          return r.tokenize = x(e - 1), r.tokenize(t, r);
        }
        if ("/" == n && t.eat("*")) return r.tokenize = x(e + 1), r.tokenize(t, r);
      }
      return "comment";
    };
  }
  function w(e) {
    return function(t, r) {
      for (var n, i = !1, o = !1; !t.eol(); ) {
        if (!e && !i && t.match('"')) {
          o = !0;
          break;
        }
        if (e && t.match('"""')) {
          o = !0;
          break;
        }
        n = t.next(), !i && "$" == n && t.match("{") && t.skipTo("}"), i = !i && "\\" == n && !e;
      }
      return !o && e || (r.tokenize = null), "string";
    };
  }
  function k(e) {
    return function(t, r) {
      for (var n, i = !1, o = !1; !t.eol(); ) {
        if (!i && t.match('"') && ("single" == e || t.match('""'))) {
          o = !0;
          break;
        }
        if (!i && t.match("``")) {
          z = k(e), o = !0;
          break;
        }
        n = t.next(), i = "single" == e && !i && "\\" == n;
      }
      return o && (r.tokenize = null), "string";
    };
  }
  e.defineMode("clike", function(a, s) {
    function c(e, t) {
      var r = e.next();
      if (C[r]) {
        var n = C[r](e, t);
        if (!1 !== n) return n;
      }
      if ('"' == r || "'" == r) return t.tokenize = u(r), t.tokenize(e, t);
      if (N.test(r)) return p = r, null;
      if (A.test(r)) {
        if (e.backUp(1), e.match(z)) return "number";
        e.next();
      }
      if ("/" == r) {
        if (e.eat("*")) return t.tokenize = d, d(e, t);
        if (e.eat("/")) return e.skipToEnd(), "comment";
      }
      if (O.test(r)) {
        for (;!e.match(/^\/[\/*]/, !1) && e.eat(O); ) ;
        return "operator";
      }
      if (e.eatWhile(D), L) for (;e.match(L); ) e.eatWhile(D);
      var i = e.current();
      return l(y, i) ? (l(w, i) && (p = "newstatement"), l(k, i) && (h = !0), "keyword") : l(b, i) ? "type" : l(x, i) || E && E(i) ? (l(w, i) && (p = "newstatement"), 
      "builtin") : l(_, i) ? "atom" : "variable";
    }
    function u(e) {
      return function(t, r) {
        for (var n, i = !1, o = !1; null != (n = t.next()); ) {
          if (n == e && !i) {
            o = !0;
            break;
          }
          i = !i && "\\" == n;
        }
        return (o || !i && !S) && (r.tokenize = null), "string";
      };
    }
    function d(e, t) {
      for (var r, n = !1; r = e.next(); ) {
        if ("/" == r && n) {
          t.tokenize = null;
          break;
        }
        n = "*" == r;
      }
      return "comment";
    }
    function f(e, t) {
      s.typeFirstDefinitions && e.eol() && o(t.context) && (t.typeAtEndOfLine = i(e, t, e.pos));
    }
    var p, h, m = a.indentUnit, g = s.statementIndentUnit || m, v = s.dontAlignCalls, y = s.keywords || {}, b = s.types || {}, x = s.builtin || {}, w = s.blockKeywords || {}, k = s.defKeywords || {}, _ = s.atoms || {}, C = s.hooks || {}, S = s.multiLineStrings, T = !1 !== s.indentStatements, M = !1 !== s.indentSwitch, L = s.namespaceSeparator, N = s.isPunctuationChar || /[\[\]{}\(\),;\:\.]/, A = s.numberStart || /[\d\.]/, z = s.number || /^(?:0x[a-f\d]+|0b[01]+|(?:\d+\.?\d*|\.\d+)(?:e[-+]?\d+)?)(u|ll?|l|f)?/i, O = s.isOperatorChar || /[+\-*&%=<>!?|\/]/, D = s.isIdentifierChar || /[\w\$_\xa1-\uffff]/, E = s.isReservedIdentifier || !1;
    return {
      startState: function(e) {
        return {
          tokenize: null,
          context: new t((e || 0) - m, 0, "top", null, !1),
          indented: 0,
          startOfLine: !0,
          prevToken: null
        };
      },
      token: function(e, t) {
        var a = t.context;
        if (e.sol() && (null == a.align && (a.align = !1), t.indented = e.indentation(), 
        t.startOfLine = !0), e.eatSpace()) return f(e, t), null;
        p = h = null;
        var l = (t.tokenize || c)(e, t);
        if ("comment" == l || "meta" == l) return l;
        if (null == a.align && (a.align = !0), ";" == p || ":" == p || "," == p && e.match(/^\s*(?:\/\/.*)?$/, !1)) for (;"statement" == t.context.type; ) n(t); else if ("{" == p) r(t, e.column(), "}"); else if ("[" == p) r(t, e.column(), "]"); else if ("(" == p) r(t, e.column(), ")"); else if ("}" == p) {
          for (;"statement" == a.type; ) a = n(t);
          for ("}" == a.type && (a = n(t)); "statement" == a.type; ) a = n(t);
        } else p == a.type ? n(t) : T && (("}" == a.type || "top" == a.type) && ";" != p || "statement" == a.type && "newstatement" == p) && r(t, e.column(), "statement", e.current());
        if ("variable" == l && ("def" == t.prevToken || s.typeFirstDefinitions && i(e, t, e.start) && o(t.context) && e.match(/^\s*\(/, !1)) && (l = "def"), 
        C.token) {
          var u = C.token(e, t, l);
          u !== undefined && (l = u);
        }
        return "def" == l && !1 === s.styleDefs && (l = "variable"), t.startOfLine = !1, 
        t.prevToken = h ? "def" : l || p, f(e, t), l;
      },
      indent: function(t, r) {
        if (t.tokenize != c && null != t.tokenize || t.typeAtEndOfLine) return e.Pass;
        var n = t.context, i = r && r.charAt(0), o = i == n.type;
        if ("statement" == n.type && "}" == i && (n = n.prev), s.dontIndentStatements) for (;"statement" == n.type && s.dontIndentStatements.test(n.info); ) n = n.prev;
        if (C.indent) {
          var a = C.indent(t, n, r, m);
          if ("number" == typeof a) return a;
        }
        var l = n.prev && "switch" == n.prev.info;
        if (s.allmanIndentation && /[{(]/.test(i)) {
          for (;"top" != n.type && "}" != n.type; ) n = n.prev;
          return n.indented;
        }
        return "statement" == n.type ? n.indented + ("{" == i ? 0 : g) : !n.align || v && ")" == n.type ? ")" != n.type || o ? n.indented + (o ? 0 : m) + (o || !l || /^(?:case|default)\b/.test(r) ? 0 : m) : n.indented + g : n.column + (o ? 0 : 1);
      },
      electricInput: M ? /^\s*(?:case .*?:|default:|\{\}?|\})$/ : /^\s*[{}]$/,
      blockCommentStart: "/*",
      blockCommentEnd: "*/",
      blockCommentContinue: " * ",
      lineComment: "//",
      fold: "brace"
    };
  });
  var _ = "auto if break case register continue return default do sizeof static else struct switch extern typedef union for goto while enum const volatile inline restrict asm fortran", C = "alignas alignof and and_eq audit axiom bitand bitor catch class compl concept constexpr const_cast decltype delete dynamic_cast explicit export final friend import module mutable namespace new noexcept not not_eq operator or or_eq override private protected public reinterpret_cast requires static_assert static_cast template this thread_local throw try typeid typename using virtual xor xor_eq", S = "bycopy byref in inout oneway out self super atomic nonatomic retain copy readwrite readonly strong weak assign typeof nullable nonnull null_resettable _cmd @interface @implementation @end @protocol @encode @property @synthesize @dynamic @class @public @package @private @protected @required @optional @try @catch @finally @import @selector @encode @defs @synchronized @autoreleasepool @compatibility_alias @available", T = "FOUNDATION_EXPORT FOUNDATION_EXTERN NS_INLINE NS_FORMAT_FUNCTION  NS_RETURNS_RETAINEDNS_ERROR_ENUM NS_RETURNS_NOT_RETAINED NS_RETURNS_INNER_POINTER NS_DESIGNATED_INITIALIZER NS_ENUM NS_OPTIONS NS_REQUIRES_NIL_TERMINATION NS_ASSUME_NONNULL_BEGIN NS_ASSUME_NONNULL_END NS_SWIFT_NAME NS_REFINED_FOR_SWIFT", M = a("int long char short double float unsigned signed void bool"), L = a("SEL instancetype id Class Protocol BOOL"), N = "case do else for if switch while struct enum union", A = "struct enum union";
  y([ "text/x-csrc", "text/x-c", "text/x-chdr" ], {
    name: "clike",
    keywords: a(_),
    types: s,
    blockKeywords: a(N),
    defKeywords: a(A),
    typeFirstDefinitions: !0,
    atoms: a("NULL true false"),
    isReservedIdentifier: f,
    hooks: {
      "#": u,
      "*": d
    },
    modeProps: {
      fold: [ "brace", "include" ]
    }
  }), y([ "text/x-c++src", "text/x-c++hdr" ], {
    name: "clike",
    keywords: a(_ + " " + C),
    types: s,
    blockKeywords: a(N + " class try catch"),
    defKeywords: a(A + " class namespace"),
    typeFirstDefinitions: !0,
    atoms: a("true false NULL nullptr"),
    dontIndentStatements: /^template$/,
    isIdentifierChar: /[\w\$_~\xa1-\uffff]/,
    isReservedIdentifier: f,
    hooks: {
      "#": u,
      "*": d,
      u: h,
      U: h,
      L: h,
      R: h,
      0: p,
      1: p,
      2: p,
      3: p,
      4: p,
      5: p,
      6: p,
      7: p,
      8: p,
      9: p,
      token: function(e, t, r) {
        if ("variable" == r && "(" == e.peek() && (";" == t.prevToken || null == t.prevToken || "}" == t.prevToken) && m(e.current())) return "def";
      }
    },
    namespaceSeparator: "::",
    modeProps: {
      fold: [ "brace", "include" ]
    }
  }), y("text/x-java", {
    name: "clike",
    keywords: a("abstract assert break case catch class const continue default do else enum extends final finally for goto if implements import instanceof interface native new package private protected public return static strictfp super switch synchronized this throw throws transient try volatile while @interface"),
    types: a("byte short int long float double boolean char void Boolean Byte Character Double Float Integer Long Number Object Short String StringBuffer StringBuilder Void"),
    blockKeywords: a("catch class do else finally for if switch try while"),
    defKeywords: a("class interface enum @interface"),
    typeFirstDefinitions: !0,
    atoms: a("true false null"),
    number: /^(?:0x[a-f\d_]+|0b[01_]+|(?:[\d_]+\.?\d*|\.\d+)(?:e[-+]?[\d_]+)?)(u|ll?|l|f)?/i,
    hooks: {
      "@": function(e) {
        return !e.match("interface", !1) && (e.eatWhile(/[\w\$_]/), "meta");
      }
    },
    modeProps: {
      fold: [ "brace", "import" ]
    }
  }), y("text/x-csharp", {
    name: "clike",
    keywords: a("abstract as async await base break case catch checked class const continue default delegate do else enum event explicit extern finally fixed for foreach goto if implicit in interface internal is lock namespace new operator out override params private protected public readonly ref return sealed sizeof stackalloc static struct switch this throw try typeof unchecked unsafe using virtual void volatile while add alias ascending descending dynamic from get global group into join let orderby partial remove select set value var yield"),
    types: a("Action Boolean Byte Char DateTime DateTimeOffset Decimal Double Func Guid Int16 Int32 Int64 Object SByte Single String Task TimeSpan UInt16 UInt32 UInt64 bool byte char decimal double short int long object sbyte float string ushort uint ulong"),
    blockKeywords: a("catch class do else finally for foreach if struct switch try while"),
    defKeywords: a("class interface namespace struct var"),
    typeFirstDefinitions: !0,
    atoms: a("true false null"),
    hooks: {
      "@": function(e, t) {
        return e.eat('"') ? (t.tokenize = g, g(e, t)) : (e.eatWhile(/[\w\$_]/), "meta");
      }
    }
  }), y("text/x-scala", {
    name: "clike",
    keywords: a("abstract case catch class def do else extends final finally for forSome if implicit import lazy match new null object override package private protected return sealed super this throw trait try type val var while with yield _ assert assume require print println printf readLine readBoolean readByte readShort readChar readInt readLong readFloat readDouble"),
    types: a("AnyVal App Application Array BufferedIterator BigDecimal BigInt Char Console Either Enumeration Equiv Error Exception Fractional Function IndexedSeq Int Integral Iterable Iterator List Map Numeric Nil NotNull Option Ordered Ordering PartialFunction PartialOrdering Product Proxy Range Responder Seq Serializable Set Specializable Stream StringBuilder StringContext Symbol Throwable Traversable TraversableOnce Tuple Unit Vector Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),
    multiLineStrings: !0,
    blockKeywords: a("catch class enum do else finally for forSome if match switch try while"),
    defKeywords: a("class enum def object package trait type val var"),
    atoms: a("true false null"),
    indentStatements: !1,
    indentSwitch: !1,
    isOperatorChar: /[+\-*&%=<>!?|\/#:@]/,
    hooks: {
      "@": function(e) {
        return e.eatWhile(/[\w\$_]/), "meta";
      },
      '"': function(e, t) {
        return !!e.match('""') && (t.tokenize = b, t.tokenize(e, t));
      },
      "'": function(e) {
        return e.eatWhile(/[\w\$_\xa1-\uffff]/), "atom";
      },
      "=": function(e, r) {
        var n = r.context;
        return !("}" != n.type || !n.align || !e.eat(">")) && (r.context = new t(n.indented, n.column, n.type, n.info, null, n.prev), 
        "operator");
      },
      "/": function(e, t) {
        return !!e.eat("*") && (t.tokenize = x(1), t.tokenize(e, t));
      }
    },
    modeProps: {
      closeBrackets: {
        pairs: '()[]{}""',
        triples: '"'
      }
    }
  }), y("text/x-kotlin", {
    name: "clike",
    keywords: a("package as typealias class interface this super val operator var fun for is in This throw return annotation break continue object if else while do try when !in !is as? file import where by get set abstract enum open inner override private public internal protected catch finally out final vararg reified dynamic companion constructor init sealed field property receiver param sparam lateinit data inline noinline tailrec external annotation crossinline const operator infix suspend actual expect setparam"),
    types: a("Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void Annotation Any BooleanArray ByteArray Char CharArray DeprecationLevel DoubleArray Enum FloatArray Function Int IntArray Lazy LazyThreadSafetyMode LongArray Nothing ShortArray Unit"),
    intendSwitch: !1,
    indentStatements: !1,
    multiLineStrings: !0,
    number: /^(?:0x[a-f\d_]+|0b[01_]+|(?:[\d_]+(\.\d+)?|\.\d+)(?:e[-+]?[\d_]+)?)(u|ll?|l|f)?/i,
    blockKeywords: a("catch class do else finally for if where try while enum"),
    defKeywords: a("class val var object interface fun"),
    atoms: a("true false null this"),
    hooks: {
      "@": function(e) {
        return e.eatWhile(/[\w\$_]/), "meta";
      },
      "*": function(e, t) {
        return "." == t.prevToken ? "variable" : "operator";
      },
      '"': function(e, t) {
        return t.tokenize = w(e.match('""')), t.tokenize(e, t);
      },
      "/": function(e, t) {
        return !!e.eat("*") && (t.tokenize = x(1), t.tokenize(e, t));
      },
      indent: function(e, t, r, n) {
        var i = r && r.charAt(0);
        return "}" != e.prevToken && ")" != e.prevToken || "" != r ? "operator" == e.prevToken && "}" != r && "}" != e.context.type || "variable" == e.prevToken && "." == i || ("}" == e.prevToken || ")" == e.prevToken) && "." == i ? 2 * n + t.indented : t.align && "}" == t.type ? t.indented + (e.context.type == (r || "").charAt(0) ? 0 : n) : void 0 : e.indented;
      }
    },
    modeProps: {
      closeBrackets: {
        triples: '"'
      }
    }
  }), y([ "x-shader/x-vertex", "x-shader/x-fragment" ], {
    name: "clike",
    keywords: a("sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow const attribute uniform varying break continue discard return for while do if else struct in out inout"),
    types: a("float int bool void vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 mat2 mat3 mat4"),
    blockKeywords: a("for while do if else struct"),
    builtin: a("radians degrees sin cos tan asin acos atan pow exp log exp2 sqrt inversesqrt abs sign floor ceil fract mod min max clamp mix step smoothstep length distance dot cross normalize ftransform faceforward reflect refract matrixCompMult lessThan lessThanEqual greaterThan greaterThanEqual equal notEqual any all not texture1D texture1DProj texture1DLod texture1DProjLod texture2D texture2DProj texture2DLod texture2DProjLod texture3D texture3DProj texture3DLod texture3DProjLod textureCube textureCubeLod shadow1D shadow2D shadow1DProj shadow2DProj shadow1DLod shadow2DLod shadow1DProjLod shadow2DProjLod dFdx dFdy fwidth noise1 noise2 noise3 noise4"),
    atoms: a("true false gl_FragColor gl_SecondaryColor gl_Normal gl_Vertex gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_FogCoord gl_PointCoord gl_Position gl_PointSize gl_ClipVertex gl_FrontColor gl_BackColor gl_FrontSecondaryColor gl_BackSecondaryColor gl_TexCoord gl_FogFragCoord gl_FragCoord gl_FrontFacing gl_FragData gl_FragDepth gl_ModelViewMatrix gl_ProjectionMatrix gl_ModelViewProjectionMatrix gl_TextureMatrix gl_NormalMatrix gl_ModelViewMatrixInverse gl_ProjectionMatrixInverse gl_ModelViewProjectionMatrixInverse gl_TexureMatrixTranspose gl_ModelViewMatrixInverseTranspose gl_ProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixInverseTranspose gl_TextureMatrixInverseTranspose gl_NormalScale gl_DepthRange gl_ClipPlane gl_Point gl_FrontMaterial gl_BackMaterial gl_LightSource gl_LightModel gl_FrontLightModelProduct gl_BackLightModelProduct gl_TextureColor gl_EyePlaneS gl_EyePlaneT gl_EyePlaneR gl_EyePlaneQ gl_FogParameters gl_MaxLights gl_MaxClipPlanes gl_MaxTextureUnits gl_MaxTextureCoords gl_MaxVertexAttribs gl_MaxVertexUniformComponents gl_MaxVaryingFloats gl_MaxVertexTextureImageUnits gl_MaxTextureImageUnits gl_MaxFragmentUniformComponents gl_MaxCombineTextureImageUnits gl_MaxDrawBuffers"),
    indentSwitch: !1,
    hooks: {
      "#": u
    },
    modeProps: {
      fold: [ "brace", "include" ]
    }
  }), y("text/x-nesc", {
    name: "clike",
    keywords: a(_ + " as atomic async call command component components configuration event generic implementation includes interface module new norace nx_struct nx_union post provides signal task uses abstract extends"),
    types: s,
    blockKeywords: a(N),
    atoms: a("null true false"),
    hooks: {
      "#": u
    },
    modeProps: {
      fold: [ "brace", "include" ]
    }
  }), y("text/x-objectivec", {
    name: "clike",
    keywords: a(_ + " " + S),
    types: c,
    builtin: a(T),
    blockKeywords: a(N + " @synthesize @try @catch @finally @autoreleasepool @synchronized"),
    defKeywords: a(A + " @interface @implementation @protocol @class"),
    dontIndentStatements: /^@.*$/,
    typeFirstDefinitions: !0,
    atoms: a("YES NO NULL Nil nil true false nullptr"),
    isReservedIdentifier: f,
    hooks: {
      "#": u,
      "*": d
    },
    modeProps: {
      fold: [ "brace", "include" ]
    }
  }), y("text/x-objectivec++", {
    name: "clike",
    keywords: a(_ + " " + S + " " + C),
    types: c,
    builtin: a(T),
    blockKeywords: a(N + " @synthesize @try @catch @finally @autoreleasepool @synchronized class try catch"),
    defKeywords: a(A + " @interface @implementation @protocol @class class namespace"),
    dontIndentStatements: /^@.*$|^template$/,
    typeFirstDefinitions: !0,
    atoms: a("YES NO NULL Nil nil true false nullptr"),
    isReservedIdentifier: f,
    hooks: {
      "#": u,
      "*": d,
      u: h,
      U: h,
      L: h,
      R: h,
      0: p,
      1: p,
      2: p,
      3: p,
      4: p,
      5: p,
      6: p,
      7: p,
      8: p,
      9: p,
      token: function(e, t, r) {
        if ("variable" == r && "(" == e.peek() && (";" == t.prevToken || null == t.prevToken || "}" == t.prevToken) && m(e.current())) return "def";
      }
    },
    namespaceSeparator: "::",
    modeProps: {
      fold: [ "brace", "include" ]
    }
  }), y("text/x-squirrel", {
    name: "clike",
    keywords: a("base break clone continue const default delete enum extends function in class foreach local resume return this throw typeof yield constructor instanceof static"),
    types: s,
    blockKeywords: a("case catch class else for foreach if switch try while"),
    defKeywords: a("function local class"),
    typeFirstDefinitions: !0,
    atoms: a("true false null"),
    hooks: {
      "#": u
    },
    modeProps: {
      fold: [ "brace", "include" ]
    }
  });
  var z = null;
  y("text/x-ceylon", {
    name: "clike",
    keywords: a("abstracts alias assembly assert assign break case catch class continue dynamic else exists extends finally for function given if import in interface is let module new nonempty object of out outer package return satisfies super switch then this throw try value void while"),
    types: function(e) {
      var t = e.charAt(0);
      return t === t.toUpperCase() && t !== t.toLowerCase();
    },
    blockKeywords: a("case catch class dynamic else finally for function if interface module new object switch try while"),
    defKeywords: a("class dynamic function interface module object package value"),
    builtin: a("abstract actual aliased annotation by default deprecated doc final formal late license native optional sealed see serializable shared suppressWarnings tagged throws variable"),
    isPunctuationChar: /[\[\]{}\(\),;\:\.`]/,
    isOperatorChar: /[+\-*&%=<>!?|^~:\/]/,
    numberStart: /[\d#$]/,
    number: /^(?:#[\da-fA-F_]+|\$[01_]+|[\d_]+[kMGTPmunpf]?|[\d_]+\.[\d_]+(?:[eE][-+]?\d+|[kMGTPmunpf]|)|)/i,
    multiLineStrings: !0,
    typeFirstDefinitions: !0,
    atoms: a("true false null larger smaller equal empty finished"),
    indentSwitch: !1,
    styleDefs: !1,
    hooks: {
      "@": function(e) {
        return e.eatWhile(/[\w\$_]/), "meta";
      },
      '"': function(e, t) {
        return t.tokenize = k(e.match('""') ? "triple" : "single"), t.tokenize(e, t);
      },
      "`": function(e, t) {
        return !(!z || !e.match("`")) && (t.tokenize = z, z = null, t.tokenize(e, t));
      },
      "'": function(e) {
        return e.eatWhile(/[\w\$_\xa1-\uffff]/), "atom";
      },
      token: function(e, t, r) {
        if (("variable" == r || "type" == r) && "." == t.prevToken) return "variable-2";
      }
    },
    modeProps: {
      fold: [ "brace", "import" ],
      closeBrackets: {
        triples: '"'
      }
    }
  });
}), function(e) {
  "object" == typeof exports && "object" == typeof module ? e(require("../../lib/codemirror")) : "function" == typeof define && define.amd ? define([ "../../lib/codemirror" ], e) : e(CodeMirror);
}(function(e) {
  "use strict";
  function t(e) {
    for (var t = {}, r = 0; r < e.length; ++r) t[e[r].toLowerCase()] = !0;
    return t;
  }
  function r(e, t) {
    for (var r, n = !1; null != (r = e.next()); ) {
      if (n && "/" == r) {
        t.tokenize = null;
        break;
      }
      n = "*" == r;
    }
    return [ "comment", "comment" ];
  }
  e.defineMode("css", function(t, r) {
    function n(e, t) {
      return h = t, e;
    }
    function i(e, t) {
      var r = e.next();
      if (v[r]) {
        var i = v[r](e, t);
        if (!1 !== i) return i;
      }
      return "@" == r ? (e.eatWhile(/[\w\\\-]/), n("def", e.current())) : "=" == r || ("~" == r || "|" == r) && e.eat("=") ? n(null, "compare") : '"' == r || "'" == r ? (t.tokenize = o(r), 
      t.tokenize(e, t)) : "#" == r ? (e.eatWhile(/[\w\\\-]/), n("atom", "hash")) : "!" == r ? (e.match(/^\s*\w*/), 
      n("keyword", "important")) : /\d/.test(r) || "." == r && e.eat(/\d/) ? (e.eatWhile(/[\w.%]/), 
      n("number", "unit")) : "-" !== r ? /[,+>*\/]/.test(r) ? n(null, "select-op") : "." == r && e.match(/^-?[_a-z][_a-z0-9-]*/i) ? n("qualifier", "qualifier") : /[:;{}\[\]\(\)]/.test(r) ? n(null, r) : e.match(/[\w-.]+(?=\()/) ? (/^(url(-prefix)?|domain|regexp)$/.test(e.current().toLowerCase()) && (t.tokenize = a), 
      n("variable callee", "variable")) : /[\w\\\-]/.test(r) ? (e.eatWhile(/[\w\\\-]/), 
      n("property", "word")) : n(null, null) : /[\d.]/.test(e.peek()) ? (e.eatWhile(/[\w.%]/), 
      n("number", "unit")) : e.match(/^-[\w\\\-]*/) ? (e.eatWhile(/[\w\\\-]/), e.match(/^\s*:/, !1) ? n("variable-2", "variable-definition") : n("variable-2", "variable")) : e.match(/^\w+-/) ? n("meta", "meta") : void 0;
    }
    function o(e) {
      return function(t, r) {
        for (var i, o = !1; null != (i = t.next()); ) {
          if (i == e && !o) {
            ")" == e && t.backUp(1);
            break;
          }
          o = !o && "\\" == i;
        }
        return (i == e || !o && ")" != e) && (r.tokenize = null), n("string", "string");
      };
    }
    function a(e, t) {
      return e.next(), e.match(/\s*[\"\')]/, !1) ? t.tokenize = null : t.tokenize = o(")"), 
      n(null, "(");
    }
    function l(e, t, r) {
      this.type = e, this.indent = t, this.prev = r;
    }
    function s(e, t, r, n) {
      return e.context = new l(r, t.indentation() + (!1 === n ? 0 : g), e.context), r;
    }
    function c(e) {
      return e.context.prev && (e.context = e.context.prev), e.context.type;
    }
    function u(e, t, r) {
      return z[r.context.type](e, t, r);
    }
    function d(e, t, r, n) {
      for (var i = n || 1; i > 0; i--) r.context = r.context.prev;
      return u(e, t, r);
    }
    function f(e) {
      var t = e.current().toLowerCase();
      m = M.hasOwnProperty(t) ? "atom" : T.hasOwnProperty(t) ? "keyword" : "variable";
    }
    var p = r.inline;
    r.propertyKeywords || (r = e.resolveMode("text/css"));
    var h, m, g = t.indentUnit, v = r.tokenHooks, y = r.documentTypes || {}, b = r.mediaTypes || {}, x = r.mediaFeatures || {}, w = r.mediaValueKeywords || {}, k = r.propertyKeywords || {}, _ = r.nonStandardPropertyKeywords || {}, C = r.fontProperties || {}, S = r.counterDescriptors || {}, T = r.colorKeywords || {}, M = r.valueKeywords || {}, L = r.allowNested, N = r.lineComment, A = !0 === r.supportsAtComponent, z = {
      top: function(e, t, r) {
        if ("{" == e) return s(r, t, "block");
        if ("}" == e && r.context.prev) return c(r);
        if (A && /@component/i.test(e)) return s(r, t, "atComponentBlock");
        if (/^@(-moz-)?document$/i.test(e)) return s(r, t, "documentTypes");
        if (/^@(media|supports|(-moz-)?document|import)$/i.test(e)) return s(r, t, "atBlock");
        if (/^@(font-face|counter-style)/i.test(e)) return r.stateArg = e, "restricted_atBlock_before";
        if (/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(e)) return "keyframes";
        if (e && "@" == e.charAt(0)) return s(r, t, "at");
        if ("hash" == e) m = "builtin"; else if ("word" == e) m = "tag"; else {
          if ("variable-definition" == e) return "maybeprop";
          if ("interpolation" == e) return s(r, t, "interpolation");
          if (":" == e) return "pseudo";
          if (L && "(" == e) return s(r, t, "parens");
        }
        return r.context.type;
      },
      block: function(e, t, r) {
        if ("word" == e) {
          var n = t.current().toLowerCase();
          return k.hasOwnProperty(n) ? (m = "property", "maybeprop") : _.hasOwnProperty(n) ? (m = "string-2", 
          "maybeprop") : L ? (m = t.match(/^\s*:(?:\s|$)/, !1) ? "property" : "tag", "block") : (m += " error", 
          "maybeprop");
        }
        return "meta" == e ? "block" : L || "hash" != e && "qualifier" != e ? z.top(e, t, r) : (m = "error", 
        "block");
      },
      maybeprop: function(e, t, r) {
        return ":" == e ? s(r, t, "prop") : u(e, t, r);
      },
      prop: function(e, t, r) {
        if (";" == e) return c(r);
        if ("{" == e && L) return s(r, t, "propBlock");
        if ("}" == e || "{" == e) return d(e, t, r);
        if ("(" == e) return s(r, t, "parens");
        if ("hash" != e || /^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(t.current())) {
          if ("word" == e) f(t); else if ("interpolation" == e) return s(r, t, "interpolation");
        } else m += " error";
        return "prop";
      },
      propBlock: function(e, t, r) {
        return "}" == e ? c(r) : "word" == e ? (m = "property", "maybeprop") : r.context.type;
      },
      parens: function(e, t, r) {
        return "{" == e || "}" == e ? d(e, t, r) : ")" == e ? c(r) : "(" == e ? s(r, t, "parens") : "interpolation" == e ? s(r, t, "interpolation") : ("word" == e && f(t), 
        "parens");
      },
      pseudo: function(e, t, r) {
        return "meta" == e ? "pseudo" : "word" == e ? (m = "variable-3", r.context.type) : u(e, t, r);
      },
      documentTypes: function(e, t, r) {
        return "word" == e && y.hasOwnProperty(t.current()) ? (m = "tag", r.context.type) : z.atBlock(e, t, r);
      },
      atBlock: function(e, t, r) {
        if ("(" == e) return s(r, t, "atBlock_parens");
        if ("}" == e || ";" == e) return d(e, t, r);
        if ("{" == e) return c(r) && s(r, t, L ? "block" : "top");
        if ("interpolation" == e) return s(r, t, "interpolation");
        if ("word" == e) {
          var n = t.current().toLowerCase();
          m = "only" == n || "not" == n || "and" == n || "or" == n ? "keyword" : b.hasOwnProperty(n) ? "attribute" : x.hasOwnProperty(n) ? "property" : w.hasOwnProperty(n) ? "keyword" : k.hasOwnProperty(n) ? "property" : _.hasOwnProperty(n) ? "string-2" : M.hasOwnProperty(n) ? "atom" : T.hasOwnProperty(n) ? "keyword" : "error";
        }
        return r.context.type;
      },
      atComponentBlock: function(e, t, r) {
        return "}" == e ? d(e, t, r) : "{" == e ? c(r) && s(r, t, L ? "block" : "top", !1) : ("word" == e && (m = "error"), 
        r.context.type);
      },
      atBlock_parens: function(e, t, r) {
        return ")" == e ? c(r) : "{" == e || "}" == e ? d(e, t, r, 2) : z.atBlock(e, t, r);
      },
      restricted_atBlock_before: function(e, t, r) {
        return "{" == e ? s(r, t, "restricted_atBlock") : "word" == e && "@counter-style" == r.stateArg ? (m = "variable", 
        "restricted_atBlock_before") : u(e, t, r);
      },
      restricted_atBlock: function(e, t, r) {
        return "}" == e ? (r.stateArg = null, c(r)) : "word" == e ? (m = "@font-face" == r.stateArg && !C.hasOwnProperty(t.current().toLowerCase()) || "@counter-style" == r.stateArg && !S.hasOwnProperty(t.current().toLowerCase()) ? "error" : "property", 
        "maybeprop") : "restricted_atBlock";
      },
      keyframes: function(e, t, r) {
        return "word" == e ? (m = "variable", "keyframes") : "{" == e ? s(r, t, "top") : u(e, t, r);
      },
      at: function(e, t, r) {
        return ";" == e ? c(r) : "{" == e || "}" == e ? d(e, t, r) : ("word" == e ? m = "tag" : "hash" == e && (m = "builtin"), 
        "at");
      },
      interpolation: function(e, t, r) {
        return "}" == e ? c(r) : "{" == e || ";" == e ? d(e, t, r) : ("word" == e ? m = "variable" : "variable" != e && "(" != e && ")" != e && (m = "error"), 
        "interpolation");
      }
    };
    return {
      startState: function(e) {
        return {
          tokenize: null,
          state: p ? "block" : "top",
          stateArg: null,
          context: new l(p ? "block" : "top", e || 0, null)
        };
      },
      token: function(e, t) {
        if (!t.tokenize && e.eatSpace()) return null;
        var r = (t.tokenize || i)(e, t);
        return r && "object" == typeof r && (h = r[1], r = r[0]), m = r, "comment" != h && (t.state = z[t.state](h, e, t)), 
        m;
      },
      indent: function(e, t) {
        var r = e.context, n = t && t.charAt(0), i = r.indent;
        return "prop" != r.type || "}" != n && ")" != n || (r = r.prev), r.prev && ("}" != n || "block" != r.type && "top" != r.type && "interpolation" != r.type && "restricted_atBlock" != r.type ? (")" != n || "parens" != r.type && "atBlock_parens" != r.type) && ("{" != n || "at" != r.type && "atBlock" != r.type) || (i = Math.max(0, r.indent - g)) : i = (r = r.prev).indent), 
        i;
      },
      electricChars: "}",
      blockCommentStart: "/*",
      blockCommentEnd: "*/",
      blockCommentContinue: " * ",
      lineComment: N,
      fold: "brace"
    };
  });
  var n = [ "domain", "regexp", "url", "url-prefix" ], i = t(n), o = [ "all", "aural", "braille", "handheld", "print", "projection", "screen", "tty", "tv", "embossed" ], a = t(o), l = [ "width", "min-width", "max-width", "height", "min-height", "max-height", "device-width", "min-device-width", "max-device-width", "device-height", "min-device-height", "max-device-height", "aspect-ratio", "min-aspect-ratio", "max-aspect-ratio", "device-aspect-ratio", "min-device-aspect-ratio", "max-device-aspect-ratio", "color", "min-color", "max-color", "color-index", "min-color-index", "max-color-index", "monochrome", "min-monochrome", "max-monochrome", "resolution", "min-resolution", "max-resolution", "scan", "grid", "orientation", "device-pixel-ratio", "min-device-pixel-ratio", "max-device-pixel-ratio", "pointer", "any-pointer", "hover", "any-hover" ], s = t(l), c = [ "landscape", "portrait", "none", "coarse", "fine", "on-demand", "hover", "interlace", "progressive" ], u = t(c), d = [ "align-content", "align-items", "align-self", "alignment-adjust", "alignment-baseline", "anchor-point", "animation", "animation-delay", "animation-direction", "animation-duration", "animation-fill-mode", "animation-iteration-count", "animation-name", "animation-play-state", "animation-timing-function", "appearance", "azimuth", "backdrop-filter", "backface-visibility", "background", "background-attachment", "background-blend-mode", "background-clip", "background-color", "background-image", "background-origin", "background-position", "background-position-x", "background-position-y", "background-repeat", "background-size", "baseline-shift", "binding", "bleed", "block-size", "bookmark-label", "bookmark-level", "bookmark-state", "bookmark-target", "border", "border-bottom", "border-bottom-color", "border-bottom-left-radius", "border-bottom-right-radius", "border-bottom-style", "border-bottom-width", "border-collapse", "border-color", "border-image", "border-image-outset", "border-image-repeat", "border-image-slice", "border-image-source", "border-image-width", "border-left", "border-left-color", "border-left-style", "border-left-width", "border-radius", "border-right", "border-right-color", "border-right-style", "border-right-width", "border-spacing", "border-style", "border-top", "border-top-color", "border-top-left-radius", "border-top-right-radius", "border-top-style", "border-top-width", "border-width", "bottom", "box-decoration-break", "box-shadow", "box-sizing", "break-after", "break-before", "break-inside", "caption-side", "caret-color", "clear", "clip", "color", "color-profile", "column-count", "column-fill", "column-gap", "column-rule", "column-rule-color", "column-rule-style", "column-rule-width", "column-span", "column-width", "columns", "contain", "content", "counter-increment", "counter-reset", "crop", "cue", "cue-after", "cue-before", "cursor", "direction", "display", "dominant-baseline", "drop-initial-after-adjust", "drop-initial-after-align", "drop-initial-before-adjust", "drop-initial-before-align", "drop-initial-size", "drop-initial-value", "elevation", "empty-cells", "fit", "fit-position", "flex", "flex-basis", "flex-direction", "flex-flow", "flex-grow", "flex-shrink", "flex-wrap", "float", "float-offset", "flow-from", "flow-into", "font", "font-family", "font-feature-settings", "font-kerning", "font-language-override", "font-optical-sizing", "font-size", "font-size-adjust", "font-stretch", "font-style", "font-synthesis", "font-variant", "font-variant-alternates", "font-variant-caps", "font-variant-east-asian", "font-variant-ligatures", "font-variant-numeric", "font-variant-position", "font-variation-settings", "font-weight", "gap", "grid", "grid-area", "grid-auto-columns", "grid-auto-flow", "grid-auto-rows", "grid-column", "grid-column-end", "grid-column-gap", "grid-column-start", "grid-gap", "grid-row", "grid-row-end", "grid-row-gap", "grid-row-start", "grid-template", "grid-template-areas", "grid-template-columns", "grid-template-rows", "hanging-punctuation", "height", "hyphens", "icon", "image-orientation", "image-rendering", "image-resolution", "inline-box-align", "inset", "inset-block", "inset-block-end", "inset-block-start", "inset-inline", "inset-inline-end", "inset-inline-start", "isolation", "justify-content", "justify-items", "justify-self", "left", "letter-spacing", "line-break", "line-height", "line-height-step", "line-stacking", "line-stacking-ruby", "line-stacking-shift", "line-stacking-strategy", "list-style", "list-style-image", "list-style-position", "list-style-type", "margin", "margin-bottom", "margin-left", "margin-right", "margin-top", "marks", "marquee-direction", "marquee-loop", "marquee-play-count", "marquee-speed", "marquee-style", "max-block-size", "max-height", "max-inline-size", "max-width", "min-block-size", "min-height", "min-inline-size", "min-width", "mix-blend-mode", "move-to", "nav-down", "nav-index", "nav-left", "nav-right", "nav-up", "object-fit", "object-position", "offset", "offset-anchor", "offset-distance", "offset-path", "offset-position", "offset-rotate", "opacity", "order", "orphans", "outline", "outline-color", "outline-offset", "outline-style", "outline-width", "overflow", "overflow-style", "overflow-wrap", "overflow-x", "overflow-y", "padding", "padding-bottom", "padding-left", "padding-right", "padding-top", "page", "page-break-after", "page-break-before", "page-break-inside", "page-policy", "pause", "pause-after", "pause-before", "perspective", "perspective-origin", "pitch", "pitch-range", "place-content", "place-items", "place-self", "play-during", "position", "presentation-level", "punctuation-trim", "quotes", "region-break-after", "region-break-before", "region-break-inside", "region-fragment", "rendering-intent", "resize", "rest", "rest-after", "rest-before", "richness", "right", "rotate", "rotation", "rotation-point", "row-gap", "ruby-align", "ruby-overhang", "ruby-position", "ruby-span", "scale", "scroll-behavior", "scroll-margin", "scroll-margin-block", "scroll-margin-block-end", "scroll-margin-block-start", "scroll-margin-bottom", "scroll-margin-inline", "scroll-margin-inline-end", "scroll-margin-inline-start", "scroll-margin-left", "scroll-margin-right", "scroll-margin-top", "scroll-padding", "scroll-padding-block", "scroll-padding-block-end", "scroll-padding-block-start", "scroll-padding-bottom", "scroll-padding-inline", "scroll-padding-inline-end", "scroll-padding-inline-start", "scroll-padding-left", "scroll-padding-right", "scroll-padding-top", "scroll-snap-align", "scroll-snap-type", "shape-image-threshold", "shape-inside", "shape-margin", "shape-outside", "size", "speak", "speak-as", "speak-header", "speak-numeral", "speak-punctuation", "speech-rate", "stress", "string-set", "tab-size", "table-layout", "target", "target-name", "target-new", "target-position", "text-align", "text-align-last", "text-combine-upright", "text-decoration", "text-decoration-color", "text-decoration-line", "text-decoration-skip", "text-decoration-skip-ink", "text-decoration-style", "text-emphasis", "text-emphasis-color", "text-emphasis-position", "text-emphasis-style", "text-height", "text-indent", "text-justify", "text-orientation", "text-outline", "text-overflow", "text-rendering", "text-shadow", "text-size-adjust", "text-space-collapse", "text-transform", "text-underline-position", "text-wrap", "top", "transform", "transform-origin", "transform-style", "transition", "transition-delay", "transition-duration", "transition-property", "transition-timing-function", "translate", "unicode-bidi", "user-select", "vertical-align", "visibility", "voice-balance", "voice-duration", "voice-family", "voice-pitch", "voice-range", "voice-rate", "voice-stress", "voice-volume", "volume", "white-space", "widows", "width", "will-change", "word-break", "word-spacing", "word-wrap", "writing-mode", "z-index", "clip-path", "clip-rule", "mask", "enable-background", "filter", "flood-color", "flood-opacity", "lighting-color", "stop-color", "stop-opacity", "pointer-events", "color-interpolation", "color-interpolation-filters", "color-rendering", "fill", "fill-opacity", "fill-rule", "image-rendering", "marker", "marker-end", "marker-mid", "marker-start", "shape-rendering", "stroke", "stroke-dasharray", "stroke-dashoffset", "stroke-linecap", "stroke-linejoin", "stroke-miterlimit", "stroke-opacity", "stroke-width", "text-rendering", "baseline-shift", "dominant-baseline", "glyph-orientation-horizontal", "glyph-orientation-vertical", "text-anchor", "writing-mode" ], f = t(d), p = [ "border-block", "border-block-color", "border-block-end", "border-block-end-color", "border-block-end-style", "border-block-end-width", "border-block-start", "border-block-start-color", "border-block-start-style", "border-block-start-width", "border-block-style", "border-block-width", "border-inline", "border-inline-color", "border-inline-end", "border-inline-end-color", "border-inline-end-style", "border-inline-end-width", "border-inline-start", "border-inline-start-color", "border-inline-start-style", "border-inline-start-width", "border-inline-style", "border-inline-width", "margin-block", "margin-block-end", "margin-block-start", "margin-inline", "margin-inline-end", "margin-inline-start", "padding-block", "padding-block-end", "padding-block-start", "padding-inline", "padding-inline-end", "padding-inline-start", "scroll-snap-stop", "scrollbar-3d-light-color", "scrollbar-arrow-color", "scrollbar-base-color", "scrollbar-dark-shadow-color", "scrollbar-face-color", "scrollbar-highlight-color", "scrollbar-shadow-color", "scrollbar-track-color", "searchfield-cancel-button", "searchfield-decoration", "searchfield-results-button", "searchfield-results-decoration", "shape-inside", "zoom" ], h = t(p), m = t([ "font-display", "font-family", "src", "unicode-range", "font-variant", "font-feature-settings", "font-stretch", "font-weight", "font-style" ]), g = t([ "additive-symbols", "fallback", "negative", "pad", "prefix", "range", "speak-as", "suffix", "symbols", "system" ]), v = [ "aliceblue", "antiquewhite", "aqua", "aquamarine", "azure", "beige", "bisque", "black", "blanchedalmond", "blue", "blueviolet", "brown", "burlywood", "cadetblue", "chartreuse", "chocolate", "coral", "cornflowerblue", "cornsilk", "crimson", "cyan", "darkblue", "darkcyan", "darkgoldenrod", "darkgray", "darkgreen", "darkkhaki", "darkmagenta", "darkolivegreen", "darkorange", "darkorchid", "darkred", "darksalmon", "darkseagreen", "darkslateblue", "darkslategray", "darkturquoise", "darkviolet", "deeppink", "deepskyblue", "dimgray", "dodgerblue", "firebrick", "floralwhite", "forestgreen", "fuchsia", "gainsboro", "ghostwhite", "gold", "goldenrod", "gray", "grey", "green", "greenyellow", "honeydew", "hotpink", "indianred", "indigo", "ivory", "khaki", "lavender", "lavenderblush", "lawngreen", "lemonchiffon", "lightblue", "lightcoral", "lightcyan", "lightgoldenrodyellow", "lightgray", "lightgreen", "lightpink", "lightsalmon", "lightseagreen", "lightskyblue", "lightslategray", "lightsteelblue", "lightyellow", "lime", "limegreen", "linen", "magenta", "maroon", "mediumaquamarine", "mediumblue", "mediumorchid", "mediumpurple", "mediumseagreen", "mediumslateblue", "mediumspringgreen", "mediumturquoise", "mediumvioletred", "midnightblue", "mintcream", "mistyrose", "moccasin", "navajowhite", "navy", "oldlace", "olive", "olivedrab", "orange", "orangered", "orchid", "palegoldenrod", "palegreen", "paleturquoise", "palevioletred", "papayawhip", "peachpuff", "peru", "pink", "plum", "powderblue", "purple", "rebeccapurple", "red", "rosybrown", "royalblue", "saddlebrown", "salmon", "sandybrown", "seagreen", "seashell", "sienna", "silver", "skyblue", "slateblue", "slategray", "snow", "springgreen", "steelblue", "tan", "teal", "thistle", "tomato", "turquoise", "violet", "wheat", "white", "whitesmoke", "yellow", "yellowgreen" ], y = t(v), b = [ "above", "absolute", "activeborder", "additive", "activecaption", "afar", "after-white-space", "ahead", "alias", "all", "all-scroll", "alphabetic", "alternate", "always", "amharic", "amharic-abegede", "antialiased", "appworkspace", "arabic-indic", "armenian", "asterisks", "attr", "auto", "auto-flow", "avoid", "avoid-column", "avoid-page", "avoid-region", "background", "backwards", "baseline", "below", "bidi-override", "binary", "bengali", "blink", "block", "block-axis", "bold", "bolder", "border", "border-box", "both", "bottom", "break", "break-all", "break-word", "bullets", "button", "button-bevel", "buttonface", "buttonhighlight", "buttonshadow", "buttontext", "calc", "cambodian", "capitalize", "caps-lock-indicator", "caption", "captiontext", "caret", "cell", "center", "checkbox", "circle", "cjk-decimal", "cjk-earthly-branch", "cjk-heavenly-stem", "cjk-ideographic", "clear", "clip", "close-quote", "col-resize", "collapse", "color", "color-burn", "color-dodge", "column", "column-reverse", "compact", "condensed", "contain", "content", "contents", "content-box", "context-menu", "continuous", "copy", "counter", "counters", "cover", "crop", "cross", "crosshair", "currentcolor", "cursive", "cyclic", "darken", "dashed", "decimal", "decimal-leading-zero", "default", "default-button", "dense", "destination-atop", "destination-in", "destination-out", "destination-over", "devanagari", "difference", "disc", "discard", "disclosure-closed", "disclosure-open", "document", "dot-dash", "dot-dot-dash", "dotted", "double", "down", "e-resize", "ease", "ease-in", "ease-in-out", "ease-out", "element", "ellipse", "ellipsis", "embed", "end", "ethiopic", "ethiopic-abegede", "ethiopic-abegede-am-et", "ethiopic-abegede-gez", "ethiopic-abegede-ti-er", "ethiopic-abegede-ti-et", "ethiopic-halehame-aa-er", "ethiopic-halehame-aa-et", "ethiopic-halehame-am-et", "ethiopic-halehame-gez", "ethiopic-halehame-om-et", "ethiopic-halehame-sid-et", "ethiopic-halehame-so-et", "ethiopic-halehame-ti-er", "ethiopic-halehame-ti-et", "ethiopic-halehame-tig", "ethiopic-numeric", "ew-resize", "exclusion", "expanded", "extends", "extra-condensed", "extra-expanded", "fantasy", "fast", "fill", "fixed", "flat", "flex", "flex-end", "flex-start", "footnotes", "forwards", "from", "geometricPrecision", "georgian", "graytext", "grid", "groove", "gujarati", "gurmukhi", "hand", "hangul", "hangul-consonant", "hard-light", "hebrew", "help", "hidden", "hide", "higher", "highlight", "highlighttext", "hiragana", "hiragana-iroha", "horizontal", "hsl", "hsla", "hue", "icon", "ignore", "inactiveborder", "inactivecaption", "inactivecaptiontext", "infinite", "infobackground", "infotext", "inherit", "initial", "inline", "inline-axis", "inline-block", "inline-flex", "inline-grid", "inline-table", "inset", "inside", "intrinsic", "invert", "italic", "japanese-formal", "japanese-informal", "justify", "kannada", "katakana", "katakana-iroha", "keep-all", "khmer", "korean-hangul-formal", "korean-hanja-formal", "korean-hanja-informal", "landscape", "lao", "large", "larger", "left", "level", "lighter", "lighten", "line-through", "linear", "linear-gradient", "lines", "list-item", "listbox", "listitem", "local", "logical", "loud", "lower", "lower-alpha", "lower-armenian", "lower-greek", "lower-hexadecimal", "lower-latin", "lower-norwegian", "lower-roman", "lowercase", "ltr", "luminosity", "malayalam", "match", "matrix", "matrix3d", "media-controls-background", "media-current-time-display", "media-fullscreen-button", "media-mute-button", "media-play-button", "media-return-to-realtime-button", "media-rewind-button", "media-seek-back-button", "media-seek-forward-button", "media-slider", "media-sliderthumb", "media-time-remaining-display", "media-volume-slider", "media-volume-slider-container", "media-volume-sliderthumb", "medium", "menu", "menulist", "menulist-button", "menulist-text", "menulist-textfield", "menutext", "message-box", "middle", "min-intrinsic", "mix", "mongolian", "monospace", "move", "multiple", "multiply", "myanmar", "n-resize", "narrower", "ne-resize", "nesw-resize", "no-close-quote", "no-drop", "no-open-quote", "no-repeat", "none", "normal", "not-allowed", "nowrap", "ns-resize", "numbers", "numeric", "nw-resize", "nwse-resize", "oblique", "octal", "opacity", "open-quote", "optimizeLegibility", "optimizeSpeed", "oriya", "oromo", "outset", "outside", "outside-shape", "overlay", "overline", "padding", "padding-box", "painted", "page", "paused", "persian", "perspective", "plus-darker", "plus-lighter", "pointer", "polygon", "portrait", "pre", "pre-line", "pre-wrap", "preserve-3d", "progress", "push-button", "radial-gradient", "radio", "read-only", "read-write", "read-write-plaintext-only", "rectangle", "region", "relative", "repeat", "repeating-linear-gradient", "repeating-radial-gradient", "repeat-x", "repeat-y", "reset", "reverse", "rgb", "rgba", "ridge", "right", "rotate", "rotate3d", "rotateX", "rotateY", "rotateZ", "round", "row", "row-resize", "row-reverse", "rtl", "run-in", "running", "s-resize", "sans-serif", "saturation", "scale", "scale3d", "scaleX", "scaleY", "scaleZ", "screen", "scroll", "scrollbar", "scroll-position", "se-resize", "searchfield", "searchfield-cancel-button", "searchfield-decoration", "searchfield-results-button", "searchfield-results-decoration", "self-start", "self-end", "semi-condensed", "semi-expanded", "separate", "serif", "show", "sidama", "simp-chinese-formal", "simp-chinese-informal", "single", "skew", "skewX", "skewY", "skip-white-space", "slide", "slider-horizontal", "slider-vertical", "sliderthumb-horizontal", "sliderthumb-vertical", "slow", "small", "small-caps", "small-caption", "smaller", "soft-light", "solid", "somali", "source-atop", "source-in", "source-out", "source-over", "space", "space-around", "space-between", "space-evenly", "spell-out", "square", "square-button", "start", "static", "status-bar", "stretch", "stroke", "sub", "subpixel-antialiased", "super", "sw-resize", "symbolic", "symbols", "system-ui", "table", "table-caption", "table-cell", "table-column", "table-column-group", "table-footer-group", "table-header-group", "table-row", "table-row-group", "tamil", "telugu", "text", "text-bottom", "text-top", "textarea", "textfield", "thai", "thick", "thin", "threeddarkshadow", "threedface", "threedhighlight", "threedlightshadow", "threedshadow", "tibetan", "tigre", "tigrinya-er", "tigrinya-er-abegede", "tigrinya-et", "tigrinya-et-abegede", "to", "top", "trad-chinese-formal", "trad-chinese-informal", "transform", "translate", "translate3d", "translateX", "translateY", "translateZ", "transparent", "ultra-condensed", "ultra-expanded", "underline", "unset", "up", "upper-alpha", "upper-armenian", "upper-greek", "upper-hexadecimal", "upper-latin", "upper-norwegian", "upper-roman", "uppercase", "urdu", "url", "var", "vertical", "vertical-text", "visible", "visibleFill", "visiblePainted", "visibleStroke", "visual", "w-resize", "wait", "wave", "wider", "window", "windowframe", "windowtext", "words", "wrap", "wrap-reverse", "x-large", "x-small", "xor", "xx-large", "xx-small" ], x = t(b), w = n.concat(o).concat(l).concat(c).concat(d).concat(p).concat(v).concat(b);
  e.registerHelper("hintWords", "css", w), e.defineMIME("text/css", {
    documentTypes: i,
    mediaTypes: a,
    mediaFeatures: s,
    mediaValueKeywords: u,
    propertyKeywords: f,
    nonStandardPropertyKeywords: h,
    fontProperties: m,
    counterDescriptors: g,
    colorKeywords: y,
    valueKeywords: x,
    tokenHooks: {
      "/": function(e, t) {
        return !!e.eat("*") && (t.tokenize = r, r(e, t));
      }
    },
    name: "css"
  }), e.defineMIME("text/x-scss", {
    mediaTypes: a,
    mediaFeatures: s,
    mediaValueKeywords: u,
    propertyKeywords: f,
    nonStandardPropertyKeywords: h,
    colorKeywords: y,
    valueKeywords: x,
    fontProperties: m,
    allowNested: !0,
    lineComment: "//",
    tokenHooks: {
      "/": function(e, t) {
        return e.eat("/") ? (e.skipToEnd(), [ "comment", "comment" ]) : e.eat("*") ? (t.tokenize = r, 
        r(e, t)) : [ "operator", "operator" ];
      },
      ":": function(e) {
        return !!e.match(/\s*\{/, !1) && [ null, null ];
      },
      $: function(e) {
        return e.match(/^[\w-]+/), e.match(/^\s*:/, !1) ? [ "variable-2", "variable-definition" ] : [ "variable-2", "variable" ];
      },
      "#": function(e) {
        return !!e.eat("{") && [ null, "interpolation" ];
      }
    },
    name: "css",
    helperType: "scss"
  }), e.defineMIME("text/x-less", {
    mediaTypes: a,
    mediaFeatures: s,
    mediaValueKeywords: u,
    propertyKeywords: f,
    nonStandardPropertyKeywords: h,
    colorKeywords: y,
    valueKeywords: x,
    fontProperties: m,
    allowNested: !0,
    lineComment: "//",
    tokenHooks: {
      "/": function(e, t) {
        return e.eat("/") ? (e.skipToEnd(), [ "comment", "comment" ]) : e.eat("*") ? (t.tokenize = r, 
        r(e, t)) : [ "operator", "operator" ];
      },
      "@": function(e) {
        return e.eat("{") ? [ null, "interpolation" ] : !e.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/i, !1) && (e.eatWhile(/[\w\\\-]/), 
        e.match(/^\s*:/, !1) ? [ "variable-2", "variable-definition" ] : [ "variable-2", "variable" ]);
      },
      "&": function() {
        return [ "atom", "atom" ];
      }
    },
    name: "css",
    helperType: "less"
  }), e.defineMIME("text/x-gss", {
    documentTypes: i,
    mediaTypes: a,
    mediaFeatures: s,
    propertyKeywords: f,
    nonStandardPropertyKeywords: h,
    fontProperties: m,
    counterDescriptors: g,
    colorKeywords: y,
    valueKeywords: x,
    supportsAtComponent: !0,
    tokenHooks: {
      "/": function(e, t) {
        return !!e.eat("*") && (t.tokenize = r, r(e, t));
      }
    },
    name: "css",
    helperType: "gss"
  });
}), function(e) {
  "object" == typeof exports && "object" == typeof module ? e(require("../../lib/codemirror"), require("../htmlmixed/htmlmixed"), require("../../addon/mode/multiplex")) : "function" == typeof define && define.amd ? define([ "../../lib/codemirror", "../htmlmixed/htmlmixed", "../../addon/mode/multiplex" ], e) : e(CodeMirror);
}(function(e) {
  "use strict";
  e.defineMode("htmlembedded", function(t, r) {
    var n = r.closeComment || "--%>";
    return e.multiplexingMode(e.getMode(t, "htmlmixed"), {
      open: r.openComment || "<%--",
      close: n,
      delimStyle: "comment",
      mode: {
        token: function(e) {
          return e.skipTo(n) || e.skipToEnd(), "comment";
        }
      }
    }, {
      open: r.open || r.scriptStartRegex || "<%",
      close: r.close || r.scriptEndRegex || "%>",
      mode: e.getMode(t, r.scriptingModeSpec)
    });
  }, "htmlmixed"), e.defineMIME("application/x-ejs", {
    name: "htmlembedded",
    scriptingModeSpec: "javascript"
  }), e.defineMIME("application/x-aspx", {
    name: "htmlembedded",
    scriptingModeSpec: "text/x-csharp"
  }), e.defineMIME("application/x-jsp", {
    name: "htmlembedded",
    scriptingModeSpec: "text/x-java"
  }), e.defineMIME("application/x-erb", {
    name: "htmlembedded",
    scriptingModeSpec: "ruby"
  });
}), function(e) {
  "object" == typeof exports && "object" == typeof module ? e(require("../../lib/codemirror"), require("../xml/xml"), require("../javascript/javascript"), require("../css/css")) : "function" == typeof define && define.amd ? define([ "../../lib/codemirror", "../xml/xml", "../javascript/javascript", "../css/css" ], e) : e(CodeMirror);
}(function(e) {
  "use strict";
  function t(e, t, r) {
    var n = e.current(), i = n.search(t);
    return i > -1 ? e.backUp(n.length - i) : n.match(/<\/?$/) && (e.backUp(n.length), 
    e.match(t, !1) || e.match(n)), r;
  }
  function r(e) {
    var t = s[e];
    return t || (s[e] = new RegExp("\\s+" + e + "\\s*=\\s*('|\")?([^'\"]+)('|\")?\\s*"));
  }
  function n(e, t) {
    var n = e.match(r(t));
    return n ? /^\s*(.*?)\s*$/.exec(n[2])[1] : "";
  }
  function i(e, t) {
    return new RegExp((t ? "^" : "") + "</s*" + e + "s*>", "i");
  }
  function o(e, t) {
    for (var r in e) for (var n = t[r] || (t[r] = []), i = e[r], o = i.length - 1; o >= 0; o--) n.unshift(i[o]);
  }
  function a(e, t) {
    for (var r = 0; r < e.length; r++) {
      var i = e[r];
      if (!i[0] || i[1].test(n(t, i[0]))) return i[2];
    }
  }
  var l = {
    script: [ [ "lang", /(javascript|babel)/i, "javascript" ], [ "type", /^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i, "javascript" ], [ "type", /./, "text/plain" ], [ null, null, "javascript" ] ],
    style: [ [ "lang", /^css$/i, "css" ], [ "type", /^(text\/)?(x-)?(stylesheet|css)$/i, "css" ], [ "type", /./, "text/plain" ], [ null, null, "css" ] ]
  }, s = {};
  e.defineMode("htmlmixed", function(r, n) {
    function s(n, o) {
      var l, d = c.token(n, o.htmlState), f = /\btag\b/.test(d);
      if (f && !/[<>\s\/]/.test(n.current()) && (l = o.htmlState.tagName && o.htmlState.tagName.toLowerCase()) && u.hasOwnProperty(l)) o.inTag = l + " "; else if (o.inTag && f && />$/.test(n.current())) {
        var p = /^([\S]+) (.*)/.exec(o.inTag);
        o.inTag = null;
        var h = ">" == n.current() && a(u[p[1]], p[2]), m = e.getMode(r, h), g = i(p[1], !0), v = i(p[1], !1);
        o.token = function(e, r) {
          return e.match(g, !1) ? (r.token = s, r.localState = r.localMode = null, null) : t(e, v, r.localMode.token(e, r.localState));
        }, o.localMode = m, o.localState = e.startState(m, c.indent(o.htmlState, "", ""));
      } else o.inTag && (o.inTag += n.current(), n.eol() && (o.inTag += " "));
      return d;
    }
    var c = e.getMode(r, {
      name: "xml",
      htmlMode: !0,
      multilineTagIndentFactor: n.multilineTagIndentFactor,
      multilineTagIndentPastTag: n.multilineTagIndentPastTag
    }), u = {}, d = n && n.tags, f = n && n.scriptTypes;
    if (o(l, u), d && o(d, u), f) for (var p = f.length - 1; p >= 0; p--) u.script.unshift([ "type", f[p].matches, f[p].mode ]);
    return {
      startState: function() {
        return {
          token: s,
          inTag: null,
          localMode: null,
          localState: null,
          htmlState: e.startState(c)
        };
      },
      copyState: function(t) {
        var r;
        return t.localState && (r = e.copyState(t.localMode, t.localState)), {
          token: t.token,
          inTag: t.inTag,
          localMode: t.localMode,
          localState: r,
          htmlState: e.copyState(c, t.htmlState)
        };
      },
      token: function(e, t) {
        return t.token(e, t);
      },
      indent: function(t, r, n) {
        return !t.localMode || /^\s*<\//.test(r) ? c.indent(t.htmlState, r, n) : t.localMode.indent ? t.localMode.indent(t.localState, r, n) : e.Pass;
      },
      innerMode: function(e) {
        return {
          state: e.localState || e.htmlState,
          mode: e.localMode || c
        };
      }
    };
  }, "xml", "javascript", "css"), e.defineMIME("text/html", "htmlmixed");
}), function(e) {
  "object" == typeof exports && "object" == typeof module ? e(require("../../lib/codemirror")) : "function" == typeof define && define.amd ? define([ "../../lib/codemirror" ], e) : e(CodeMirror);
}(function(e) {
  "use strict";
  e.defineMode("javascript", function(t, r) {
    function n(e) {
      for (var t, r = !1, n = !1; null != (t = e.next()); ) {
        if (!r) {
          if ("/" == t && !n) return;
          "[" == t ? n = !0 : n && "]" == t && (n = !1);
        }
        r = !r && "\\" == t;
      }
    }
    function i(e, t, r) {
      return Re = e, He = r, t;
    }
    function o(e, t) {
      var r = e.next();
      if ('"' == r || "'" == r) return t.tokenize = a(r), t.tokenize(e, t);
      if ("." == r && e.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/)) return i("number", "number");
      if ("." == r && e.match("..")) return i("spread", "meta");
      if (/[\[\]{}\(\),;\:\.]/.test(r)) return i(r);
      if ("=" == r && e.eat(">")) return i("=>", "operator");
      if ("0" == r && e.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/)) return i("number", "number");
      if (/\d/.test(r)) return e.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/), 
      i("number", "number");
      if ("/" == r) return e.eat("*") ? (t.tokenize = l, l(e, t)) : e.eat("/") ? (e.skipToEnd(), 
      i("comment", "comment")) : Fe(e, t, 1) ? (n(e), e.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/), 
      i("regexp", "string-2")) : (e.eat("="), i("operator", "operator", e.current()));
      if ("`" == r) return t.tokenize = s, s(e, t);
      if ("#" == r && "!" == e.peek()) return e.skipToEnd(), i("meta", "meta");
      if ("#" == r && e.eatWhile(Ve)) return i("variable", "property");
      if ("<" == r && e.match("!--") || "-" == r && e.match("->")) return e.skipToEnd(), 
      i("comment", "comment");
      if (Xe.test(r)) return ">" == r && t.lexical && ">" == t.lexical.type || (e.eat("=") ? "!" != r && "=" != r || e.eat("=") : /[<>*+\-]/.test(r) && (e.eat(r), 
      ">" == r && e.eat(r))), "?" == r && e.eat(".") ? i(".") : i("operator", "operator", e.current());
      if (Ve.test(r)) {
        e.eatWhile(Ve);
        var o = e.current();
        if ("." != t.lastType) {
          if (Ge.propertyIsEnumerable(o)) {
            var c = Ge[o];
            return i(c.type, c.style, o);
          }
          if ("async" == o && e.match(/^(\s|\/\*.*?\*\/)*[\[\(\w]/, !1)) return i("async", "keyword", o);
        }
        return i("variable", "variable", o);
      }
    }
    function a(e) {
      return function(t, r) {
        var n, a = !1;
        if (Ue && "@" == t.peek() && t.match(Ze)) return r.tokenize = o, i("jsonld-keyword", "meta");
        for (;null != (n = t.next()) && (n != e || a); ) a = !a && "\\" == n;
        return a || (r.tokenize = o), i("string", "string");
      };
    }
    function l(e, t) {
      for (var r, n = !1; r = e.next(); ) {
        if ("/" == r && n) {
          t.tokenize = o;
          break;
        }
        n = "*" == r;
      }
      return i("comment", "comment");
    }
    function s(e, t) {
      for (var r, n = !1; null != (r = e.next()); ) {
        if (!n && ("`" == r || "$" == r && e.eat("{"))) {
          t.tokenize = o;
          break;
        }
        n = !n && "\\" == r;
      }
      return i("quasi", "string-2", e.current());
    }
    function c(e, t) {
      t.fatArrowAt && (t.fatArrowAt = null);
      var r = e.string.indexOf("=>", e.start);
      if (!(r < 0)) {
        if ($e) {
          var n = /:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(e.string.slice(e.start, r));
          n && (r = n.index);
        }
        for (var i = 0, o = !1, a = r - 1; a >= 0; --a) {
          var l = e.string.charAt(a), s = Ye.indexOf(l);
          if (s >= 0 && s < 3) {
            if (!i) {
              ++a;
              break;
            }
            if (0 == --i) {
              "(" == l && (o = !0);
              break;
            }
          } else if (s >= 3 && s < 6) ++i; else if (Ve.test(l)) o = !0; else if (/["'\/`]/.test(l)) for (;;--a) {
            if (0 == a) return;
            if (e.string.charAt(a - 1) == l && "\\" != e.string.charAt(a - 2)) {
              a--;
              break;
            }
          } else if (o && !i) {
            ++a;
            break;
          }
        }
        o && !i && (t.fatArrowAt = a);
      }
    }
    function u(e, t, r, n, i, o) {
      this.indented = e, this.column = t, this.type = r, this.prev = i, this.info = o, 
      null != n && (this.align = n);
    }
    function d(e, t) {
      for (var r = e.localVars; r; r = r.next) if (r.name == t) return !0;
      for (var n = e.context; n; n = n.prev) for (r = n.vars; r; r = r.next) if (r.name == t) return !0;
    }
    function f(e, t, r, n, i) {
      var o = e.cc;
      for (Je.state = e, Je.stream = i, Je.marked = null, Je.cc = o, Je.style = t, e.lexical.hasOwnProperty("align") || (e.lexical.align = !0); ;) {
        if ((o.length ? o.pop() : Ke ? N : M)(r, n)) {
          for (;o.length && o[o.length - 1].lex; ) o.pop()();
          return Je.marked ? Je.marked : "variable" == r && d(e, n) ? "variable-2" : t;
        }
      }
    }
    function p() {
      for (var e = arguments.length - 1; e >= 0; e--) Je.cc.push(arguments[e]);
    }
    function h() {
      return p.apply(null, arguments), !0;
    }
    function m(e, t) {
      for (var r = t; r; r = r.next) if (r.name == e) return !0;
      return !1;
    }
    function g(e) {
      var t = Je.state;
      if (Je.marked = "def", t.context) if ("var" == t.lexical.info && t.context && t.context.block) {
        var n = v(e, t.context);
        if (null != n) return void (t.context = n);
      } else if (!m(e, t.localVars)) return void (t.localVars = new x(e, t.localVars));
      r.globalVars && !m(e, t.globalVars) && (t.globalVars = new x(e, t.globalVars));
    }
    function v(e, t) {
      if (t) {
        if (t.block) {
          var r = v(e, t.prev);
          return r ? r == t.prev ? t : new b(r, t.vars, !0) : null;
        }
        return m(e, t.vars) ? t : new b(t.prev, new x(e, t.vars), !1);
      }
      return null;
    }
    function y(e) {
      return "public" == e || "private" == e || "protected" == e || "abstract" == e || "readonly" == e;
    }
    function b(e, t, r) {
      this.prev = e, this.vars = t, this.block = r;
    }
    function x(e, t) {
      this.name = e, this.next = t;
    }
    function w() {
      Je.state.context = new b(Je.state.context, Je.state.localVars, !1), Je.state.localVars = et;
    }
    function k() {
      Je.state.context = new b(Je.state.context, Je.state.localVars, !0), Je.state.localVars = null;
    }
    function _() {
      Je.state.localVars = Je.state.context.vars, Je.state.context = Je.state.context.prev;
    }
    function C(e, t) {
      var r = function() {
        var r = Je.state, n = r.indented;
        if ("stat" == r.lexical.type) n = r.lexical.indented; else for (var i = r.lexical; i && ")" == i.type && i.align; i = i.prev) n = i.indented;
        r.lexical = new u(n, Je.stream.column(), e, null, r.lexical, t);
      };
      return r.lex = !0, r;
    }
    function S() {
      var e = Je.state;
      e.lexical.prev && (")" == e.lexical.type && (e.indented = e.lexical.indented), e.lexical = e.lexical.prev);
    }
    function T(e) {
      function t(r) {
        return r == e ? h() : ";" == e || "}" == r || ")" == r || "]" == r ? p() : h(t);
      }
      return t;
    }
    function M(e, t) {
      return "var" == e ? h(C("vardef", t), ce, T(";"), S) : "keyword a" == e ? h(C("form"), z, M, S) : "keyword b" == e ? h(C("form"), M, S) : "keyword d" == e ? Je.stream.match(/^\s*$/, !1) ? h() : h(C("stat"), D, T(";"), S) : "debugger" == e ? h(T(";")) : "{" == e ? h(C("}"), k, Z, S, _) : ";" == e ? h() : "if" == e ? ("else" == Je.state.lexical.info && Je.state.cc[Je.state.cc.length - 1] == S && Je.state.cc.pop()(), 
      h(C("form"), z, M, S, me)) : "function" == e ? h(be) : "for" == e ? h(C("form"), ge, M, S) : "class" == e || $e && "interface" == t ? (Je.marked = "keyword", 
      h(C("form", "class" == e ? e : t), Ce, S)) : "variable" == e ? $e && "declare" == t ? (Je.marked = "keyword", 
      h(M)) : $e && ("module" == t || "enum" == t || "type" == t) && Je.stream.match(/^\s*\w/, !1) ? (Je.marked = "keyword", 
      "enum" == t ? h(Pe) : "type" == t ? h(we, T("operator"), te, T(";")) : h(C("form"), ue, T("{"), C("}"), Z, S, S)) : $e && "namespace" == t ? (Je.marked = "keyword", 
      h(C("form"), N, M, S)) : $e && "abstract" == t ? (Je.marked = "keyword", h(M)) : h(C("stat"), B) : "switch" == e ? h(C("form"), z, T("{"), C("}", "switch"), k, Z, S, S, _) : "case" == e ? h(N, T(":")) : "default" == e ? h(T(":")) : "catch" == e ? h(C("form"), w, L, M, S, _) : "export" == e ? h(C("stat"), Le, S) : "import" == e ? h(C("stat"), Ae, S) : "async" == e ? h(M) : "@" == t ? h(N, M) : p(C("stat"), N, T(";"), S);
    }
    function L(e) {
      if ("(" == e) return h(ke, T(")"));
    }
    function N(e, t) {
      return O(e, t, !1);
    }
    function A(e, t) {
      return O(e, t, !0);
    }
    function z(e) {
      return "(" != e ? p() : h(C(")"), D, T(")"), S);
    }
    function O(e, t, r) {
      if (Je.state.fatArrowAt == Je.stream.start) {
        var n = r ? F : q;
        if ("(" == e) return h(w, C(")"), G(ke, ")"), S, T("=>"), n, _);
        if ("variable" == e) return p(w, ue, T("=>"), n, _);
      }
      var i = r ? I : E;
      return Qe.hasOwnProperty(e) ? h(i) : "function" == e ? h(be, i) : "class" == e || $e && "interface" == t ? (Je.marked = "keyword", 
      h(C("form"), _e, S)) : "keyword c" == e || "async" == e ? h(r ? A : N) : "(" == e ? h(C(")"), D, T(")"), S, i) : "operator" == e || "spread" == e ? h(r ? A : N) : "[" == e ? h(C("]"), Ie, S, i) : "{" == e ? X(K, "}", null, i) : "quasi" == e ? p(P, i) : "new" == e ? h(R(r)) : "import" == e ? h(N) : h();
    }
    function D(e) {
      return e.match(/[;\}\)\],]/) ? p() : p(N);
    }
    function E(e, t) {
      return "," == e ? h(D) : I(e, t, !1);
    }
    function I(e, t, r) {
      var n = 0 == r ? E : I, i = 0 == r ? N : A;
      return "=>" == e ? h(w, r ? F : q, _) : "operator" == e ? /\+\+|--/.test(t) || $e && "!" == t ? h(n) : $e && "<" == t && Je.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/, !1) ? h(C(">"), G(te, ">"), S, n) : "?" == t ? h(N, T(":"), i) : h(i) : "quasi" == e ? p(P, n) : ";" != e ? "(" == e ? X(A, ")", "call", n) : "." == e ? h(U, n) : "[" == e ? h(C("]"), D, T("]"), S, n) : $e && "as" == t ? (Je.marked = "keyword", 
      h(te, n)) : "regexp" == e ? (Je.state.lastType = Je.marked = "operator", Je.stream.backUp(Je.stream.pos - Je.stream.start - 1), 
      h(i)) : void 0 : void 0;
    }
    function P(e, t) {
      return "quasi" != e ? p() : "${" != t.slice(t.length - 2) ? h(P) : h(N, W);
    }
    function W(e) {
      if ("}" == e) return Je.marked = "string-2", Je.state.tokenize = s, h(P);
    }
    function q(e) {
      return c(Je.stream, Je.state), p("{" == e ? M : N);
    }
    function F(e) {
      return c(Je.stream, Je.state), p("{" == e ? M : A);
    }
    function R(e) {
      return function(t) {
        return "." == t ? h(e ? j : H) : "variable" == t && $e ? h(ae, e ? I : E) : p(e ? A : N);
      };
    }
    function H(e, t) {
      if ("target" == t) return Je.marked = "keyword", h(E);
    }
    function j(e, t) {
      if ("target" == t) return Je.marked = "keyword", h(I);
    }
    function B(e) {
      return ":" == e ? h(S, M) : p(E, T(";"), S);
    }
    function U(e) {
      if ("variable" == e) return Je.marked = "property", h();
    }
    function K(e, t) {
      if ("async" == e) return Je.marked = "property", h(K);
      if ("variable" == e || "keyword" == Je.style) {
        return Je.marked = "property", "get" == t || "set" == t ? h($) : ($e && Je.state.fatArrowAt == Je.stream.start && (r = Je.stream.match(/^\s*:\s*/, !1)) && (Je.state.fatArrowAt = Je.stream.pos + r[0].length), 
        h(V));
        var r;
      } else {
        if ("number" == e || "string" == e) return Je.marked = Ue ? "property" : Je.style + " property", 
        h(V);
        if ("jsonld-keyword" == e) return h(V);
        if ($e && y(t)) return Je.marked = "keyword", h(K);
        if ("[" == e) return h(N, Y, T("]"), V);
        if ("spread" == e) return h(A, V);
        if ("*" == t) return Je.marked = "keyword", h(K);
        if (":" == e) return p(V);
      }
    }
    function $(e) {
      return "variable" != e ? p(V) : (Je.marked = "property", h(be));
    }
    function V(e) {
      return ":" == e ? h(A) : "(" == e ? p(be) : void 0;
    }
    function G(e, t, r) {
      function n(i, o) {
        if (r ? r.indexOf(i) > -1 : "," == i) {
          var a = Je.state.lexical;
          return "call" == a.info && (a.pos = (a.pos || 0) + 1), h(function(r, n) {
            return r == t || n == t ? p() : p(e);
          }, n);
        }
        return i == t || o == t ? h() : r && r.indexOf(";") > -1 ? p(e) : h(T(t));
      }
      return function(r, i) {
        return r == t || i == t ? h() : p(e, n);
      };
    }
    function X(e, t, r) {
      for (var n = 3; n < arguments.length; n++) Je.cc.push(arguments[n]);
      return h(C(t, r), G(e, t), S);
    }
    function Z(e) {
      return "}" == e ? h() : p(M, Z);
    }
    function Y(e, t) {
      if ($e) {
        if (":" == e) return h(te);
        if ("?" == t) return h(Y);
      }
    }
    function Q(e, t) {
      if ($e && (":" == e || "in" == t)) return h(te);
    }
    function J(e) {
      if ($e && ":" == e) return Je.stream.match(/^\s*\w+\s+is\b/, !1) ? h(N, ee, te) : h(te);
    }
    function ee(e, t) {
      if ("is" == t) return Je.marked = "keyword", h();
    }
    function te(e, t) {
      return "keyof" == t || "typeof" == t || "infer" == t ? (Je.marked = "keyword", h("typeof" == t ? A : te)) : "variable" == e || "void" == t ? (Je.marked = "type", 
      h(oe)) : "|" == t || "&" == t ? h(te) : "string" == e || "number" == e || "atom" == e ? h(oe) : "[" == e ? h(C("]"), G(te, "]", ","), S, oe) : "{" == e ? h(C("}"), G(ne, "}", ",;"), S, oe) : "(" == e ? h(G(ie, ")"), re, oe) : "<" == e ? h(G(te, ">"), te) : void 0;
    }
    function re(e) {
      if ("=>" == e) return h(te);
    }
    function ne(e, t) {
      return "variable" == e || "keyword" == Je.style ? (Je.marked = "property", h(ne)) : "?" == t || "number" == e || "string" == e ? h(ne) : ":" == e ? h(te) : "[" == e ? h(T("variable"), Q, T("]"), ne) : "(" == e ? p(xe, ne) : void 0;
    }
    function ie(e, t) {
      return "variable" == e && Je.stream.match(/^\s*[?:]/, !1) || "?" == t ? h(ie) : ":" == e ? h(te) : "spread" == e ? h(ie) : p(te);
    }
    function oe(e, t) {
      return "<" == t ? h(C(">"), G(te, ">"), S, oe) : "|" == t || "." == e || "&" == t ? h(te) : "[" == e ? h(te, T("]"), oe) : "extends" == t || "implements" == t ? (Je.marked = "keyword", 
      h(te)) : "?" == t ? h(te, T(":"), te) : void 0;
    }
    function ae(e, t) {
      if ("<" == t) return h(C(">"), G(te, ">"), S, oe);
    }
    function le() {
      return p(te, se);
    }
    function se(e, t) {
      if ("=" == t) return h(te);
    }
    function ce(e, t) {
      return "enum" == t ? (Je.marked = "keyword", h(Pe)) : p(ue, Y, pe, he);
    }
    function ue(e, t) {
      return $e && y(t) ? (Je.marked = "keyword", h(ue)) : "variable" == e ? (g(t), h()) : "spread" == e ? h(ue) : "[" == e ? X(fe, "]") : "{" == e ? X(de, "}") : void 0;
    }
    function de(e, t) {
      return "variable" != e || Je.stream.match(/^\s*:/, !1) ? ("variable" == e && (Je.marked = "property"), 
      "spread" == e ? h(ue) : "}" == e ? p() : "[" == e ? h(N, T("]"), T(":"), de) : h(T(":"), ue, pe)) : (g(t), 
      h(pe));
    }
    function fe() {
      return p(ue, pe);
    }
    function pe(e, t) {
      if ("=" == t) return h(A);
    }
    function he(e) {
      if ("," == e) return h(ce);
    }
    function me(e, t) {
      if ("keyword b" == e && "else" == t) return h(C("form", "else"), M, S);
    }
    function ge(e, t) {
      return "await" == t ? h(ge) : "(" == e ? h(C(")"), ve, S) : void 0;
    }
    function ve(e) {
      return "var" == e ? h(ce, ye) : "variable" == e ? h(ye) : p(ye);
    }
    function ye(e, t) {
      return ")" == e ? h() : ";" == e ? h(ye) : "in" == t || "of" == t ? (Je.marked = "keyword", 
      h(N, ye)) : p(N, ye);
    }
    function be(e, t) {
      return "*" == t ? (Je.marked = "keyword", h(be)) : "variable" == e ? (g(t), h(be)) : "(" == e ? h(w, C(")"), G(ke, ")"), S, J, M, _) : $e && "<" == t ? h(C(">"), G(le, ">"), S, be) : void 0;
    }
    function xe(e, t) {
      return "*" == t ? (Je.marked = "keyword", h(xe)) : "variable" == e ? (g(t), h(xe)) : "(" == e ? h(w, C(")"), G(ke, ")"), S, J, _) : $e && "<" == t ? h(C(">"), G(le, ">"), S, xe) : void 0;
    }
    function we(e, t) {
      return "keyword" == e || "variable" == e ? (Je.marked = "type", h(we)) : "<" == t ? h(C(">"), G(le, ">"), S) : void 0;
    }
    function ke(e, t) {
      return "@" == t && h(N, ke), "spread" == e ? h(ke) : $e && y(t) ? (Je.marked = "keyword", 
      h(ke)) : $e && "this" == e ? h(Y, pe) : p(ue, Y, pe);
    }
    function _e(e, t) {
      return "variable" == e ? Ce(e, t) : Se(e, t);
    }
    function Ce(e, t) {
      if ("variable" == e) return g(t), h(Se);
    }
    function Se(e, t) {
      return "<" == t ? h(C(">"), G(le, ">"), S, Se) : "extends" == t || "implements" == t || $e && "," == e ? ("implements" == t && (Je.marked = "keyword"), 
      h($e ? te : N, Se)) : "{" == e ? h(C("}"), Te, S) : void 0;
    }
    function Te(e, t) {
      return "async" == e || "variable" == e && ("static" == t || "get" == t || "set" == t || $e && y(t)) && Je.stream.match(/^\s+[\w$\xa1-\uffff]/, !1) ? (Je.marked = "keyword", 
      h(Te)) : "variable" == e || "keyword" == Je.style ? (Je.marked = "property", h(Me, Te)) : "number" == e || "string" == e ? h(Me, Te) : "[" == e ? h(N, Y, T("]"), Me, Te) : "*" == t ? (Je.marked = "keyword", 
      h(Te)) : $e && "(" == e ? p(xe, Te) : ";" == e || "," == e ? h(Te) : "}" == e ? h() : "@" == t ? h(N, Te) : void 0;
    }
    function Me(e, t) {
      if ("?" == t) return h(Me);
      if (":" == e) return h(te, pe);
      if ("=" == t) return h(A);
      var r = Je.state.lexical.prev;
      return p(r && "interface" == r.info ? xe : be);
    }
    function Le(e, t) {
      return "*" == t ? (Je.marked = "keyword", h(Ee, T(";"))) : "default" == t ? (Je.marked = "keyword", 
      h(N, T(";"))) : "{" == e ? h(G(Ne, "}"), Ee, T(";")) : p(M);
    }
    function Ne(e, t) {
      return "as" == t ? (Je.marked = "keyword", h(T("variable"))) : "variable" == e ? p(A, Ne) : void 0;
    }
    function Ae(e) {
      return "string" == e ? h() : "(" == e ? p(N) : p(ze, Oe, Ee);
    }
    function ze(e, t) {
      return "{" == e ? X(ze, "}") : ("variable" == e && g(t), "*" == t && (Je.marked = "keyword"), 
      h(De));
    }
    function Oe(e) {
      if ("," == e) return h(ze, Oe);
    }
    function De(e, t) {
      if ("as" == t) return Je.marked = "keyword", h(ze);
    }
    function Ee(e, t) {
      if ("from" == t) return Je.marked = "keyword", h(N);
    }
    function Ie(e) {
      return "]" == e ? h() : p(G(A, "]"));
    }
    function Pe() {
      return p(C("form"), ue, T("{"), C("}"), G(We, "}"), S, S);
    }
    function We() {
      return p(ue, pe);
    }
    function qe(e, t) {
      return "operator" == e.lastType || "," == e.lastType || Xe.test(t.charAt(0)) || /[,.]/.test(t.charAt(0));
    }
    function Fe(e, t, r) {
      return t.tokenize == o && /^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(t.lastType) || "quasi" == t.lastType && /\{\s*$/.test(e.string.slice(0, e.pos - (r || 0)));
    }
    var Re, He, je = t.indentUnit, Be = r.statementIndent, Ue = r.jsonld, Ke = r.json || Ue, $e = r.typescript, Ve = r.wordCharacters || /[\w$\xa1-\uffff]/, Ge = function() {
      function e(e) {
        return {
          type: e,
          style: "keyword"
        };
      }
      var t = e("keyword a"), r = e("keyword b"), n = e("keyword c"), i = e("keyword d"), o = e("operator"), a = {
        type: "atom",
        style: "atom"
      };
      return {
        "if": e("if"),
        "while": t,
        "with": t,
        "else": r,
        "do": r,
        "try": r,
        "finally": r,
        "return": i,
        "break": i,
        "continue": i,
        "new": e("new"),
        "delete": n,
        "void": n,
        "throw": n,
        "debugger": e("debugger"),
        "var": e("var"),
        "const": e("var"),
        "let": e("var"),
        "function": e("function"),
        "catch": e("catch"),
        "for": e("for"),
        "switch": e("switch"),
        "case": e("case"),
        "default": e("default"),
        "in": o,
        "typeof": o,
        "instanceof": o,
        "true": a,
        "false": a,
        "null": a,
        undefined: a,
        NaN: a,
        Infinity: a,
        "this": e("this"),
        "class": e("class"),
        "super": e("atom"),
        yield: n,
        "export": e("export"),
        "import": e("import"),
        "extends": n,
        await: n
      };
    }(), Xe = /[+\-*&%=<>!?|~^@]/, Ze = /^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/, Ye = "([{}])", Qe = {
      atom: !0,
      number: !0,
      variable: !0,
      string: !0,
      regexp: !0,
      "this": !0,
      "jsonld-keyword": !0
    }, Je = {
      state: null,
      column: null,
      marked: null,
      cc: null
    }, et = new x("this", new x("arguments", null));
    return _.lex = !0, S.lex = !0, {
      startState: function(e) {
        var t = {
          tokenize: o,
          lastType: "sof",
          cc: [],
          lexical: new u((e || 0) - je, 0, "block", !1),
          localVars: r.localVars,
          context: r.localVars && new b(null, null, !1),
          indented: e || 0
        };
        return r.globalVars && "object" == typeof r.globalVars && (t.globalVars = r.globalVars), 
        t;
      },
      token: function(e, t) {
        if (e.sol() && (t.lexical.hasOwnProperty("align") || (t.lexical.align = !1), t.indented = e.indentation(), 
        c(e, t)), t.tokenize != l && e.eatSpace()) return null;
        var r = t.tokenize(e, t);
        return "comment" == Re ? r : (t.lastType = "operator" != Re || "++" != He && "--" != He ? Re : "incdec", 
        f(t, r, Re, He, e));
      },
      indent: function(t, n) {
        if (t.tokenize == l) return e.Pass;
        if (t.tokenize != o) return 0;
        var i, a = n && n.charAt(0), s = t.lexical;
        if (!/^\s*else\b/.test(n)) for (var c = t.cc.length - 1; c >= 0; --c) {
          var u = t.cc[c];
          if (u == S) s = s.prev; else if (u != me) break;
        }
        for (;("stat" == s.type || "form" == s.type) && ("}" == a || (i = t.cc[t.cc.length - 1]) && (i == E || i == I) && !/^[,\.=+\-*:?[\(]/.test(n)); ) s = s.prev;
        Be && ")" == s.type && "stat" == s.prev.type && (s = s.prev);
        var d = s.type, f = a == d;
        return "vardef" == d ? s.indented + ("operator" == t.lastType || "," == t.lastType ? s.info.length + 1 : 0) : "form" == d && "{" == a ? s.indented : "form" == d ? s.indented + je : "stat" == d ? s.indented + (qe(t, n) ? Be || je : 0) : "switch" != s.info || f || 0 == r.doubleIndentSwitch ? s.align ? s.column + (f ? 0 : 1) : s.indented + (f ? 0 : je) : s.indented + (/^(?:case|default)\b/.test(n) ? je : 2 * je);
      },
      electricInput: /^\s*(?:case .*?:|default:|\{|\})$/,
      blockCommentStart: Ke ? null : "/*",
      blockCommentEnd: Ke ? null : "*/",
      blockCommentContinue: Ke ? null : " * ",
      lineComment: Ke ? null : "//",
      fold: "brace",
      closeBrackets: "()[]{}''\"\"``",
      helperType: Ke ? "json" : "javascript",
      jsonldMode: Ue,
      jsonMode: Ke,
      expressionAllowed: Fe,
      skipExpression: function(e) {
        var t = e.cc[e.cc.length - 1];
        t != N && t != A || e.cc.pop();
      }
    };
  }), e.registerHelper("wordChars", "javascript", /[\w$]/), e.defineMIME("text/javascript", "javascript"), 
  e.defineMIME("text/ecmascript", "javascript"), e.defineMIME("application/javascript", "javascript"), 
  e.defineMIME("application/x-javascript", "javascript"), e.defineMIME("application/ecmascript", "javascript"), 
  e.defineMIME("application/json", {
    name: "javascript",
    json: !0
  }), e.defineMIME("application/x-json", {
    name: "javascript",
    json: !0
  }), e.defineMIME("application/ld+json", {
    name: "javascript",
    jsonld: !0
  }), e.defineMIME("text/typescript", {
    name: "javascript",
    typescript: !0
  }), e.defineMIME("application/typescript", {
    name: "javascript",
    typescript: !0
  });
}), function(e) {
  "object" == typeof exports && "object" == typeof module ? e(require("../../lib/codemirror"), require("../htmlmixed/htmlmixed"), require("../clike/clike")) : "function" == typeof define && define.amd ? define([ "../../lib/codemirror", "../htmlmixed/htmlmixed", "../clike/clike" ], e) : e(CodeMirror);
}(function(e) {
  "use strict";
  function t(e) {
    for (var t = {}, r = e.split(" "), n = 0; n < r.length; ++n) t[r[n]] = !0;
    return t;
  }
  function r(e, t, i) {
    return 0 == e.length ? n(t) : function(o, a) {
      for (var l = e[0], s = 0; s < l.length; s++) if (o.match(l[s][0])) return a.tokenize = r(e.slice(1), t), 
      l[s][1];
      return a.tokenize = n(t, i), "string";
    };
  }
  function n(e, t) {
    return function(r, n) {
      return i(r, n, e, t);
    };
  }
  function i(e, t, n, i) {
    if (!1 !== i && e.match("${", !1) || e.match("{$", !1)) return t.tokenize = null, 
    "string";
    if (!1 !== i && e.match(/^\$[a-zA-Z_][a-zA-Z0-9_]*/)) return e.match("[", !1) && (t.tokenize = r([ [ [ "[", null ] ], [ [ /\d[\w\.]*/, "number" ], [ /\$[a-zA-Z_][a-zA-Z0-9_]*/, "variable-2" ], [ /[\w\$]+/, "variable" ] ], [ [ "]", null ] ] ], n, i)), 
    e.match(/\-\>\w/, !1) && (t.tokenize = r([ [ [ "->", null ] ], [ [ /[\w]+/, "variable" ] ] ], n, i)), 
    "variable-2";
    for (var o = !1; !e.eol() && (o || !1 === i || !e.match("{$", !1) && !e.match(/^(\$[a-zA-Z_][a-zA-Z0-9_]*|\$\{)/, !1)); ) {
      if (!o && e.match(n)) {
        t.tokenize = null, t.tokStack.pop(), t.tokStack.pop();
        break;
      }
      o = "\\" == e.next() && !o;
    }
    return "string";
  }
  var o = "abstract and array as break case catch class clone const continue declare default do else elseif enddeclare endfor endforeach endif endswitch endwhile extends final for foreach function global goto if implements interface instanceof namespace new or private protected public static switch throw trait try use var while xor die echo empty exit eval include include_once isset list require require_once return print unset __halt_compiler self static parent yield insteadof finally", a = "true false null TRUE FALSE NULL __CLASS__ __DIR__ __FILE__ __LINE__ __METHOD__ __FUNCTION__ __NAMESPACE__ __TRAIT__", l = "func_num_args func_get_arg func_get_args strlen strcmp strncmp strcasecmp strncasecmp each error_reporting define defined trigger_error user_error set_error_handler restore_error_handler get_declared_classes get_loaded_extensions extension_loaded get_extension_funcs debug_backtrace constant bin2hex hex2bin sleep usleep time mktime gmmktime strftime gmstrftime strtotime date gmdate getdate localtime checkdate flush wordwrap htmlspecialchars htmlentities html_entity_decode md5 md5_file crc32 getimagesize image_type_to_mime_type phpinfo phpversion phpcredits strnatcmp strnatcasecmp substr_count strspn strcspn strtok strtoupper strtolower strpos strrpos strrev hebrev hebrevc nl2br basename dirname pathinfo stripslashes stripcslashes strstr stristr strrchr str_shuffle str_word_count strcoll substr substr_replace quotemeta ucfirst ucwords strtr addslashes addcslashes rtrim str_replace str_repeat count_chars chunk_split trim ltrim strip_tags similar_text explode implode setlocale localeconv parse_str str_pad chop strchr sprintf printf vprintf vsprintf sscanf fscanf parse_url urlencode urldecode rawurlencode rawurldecode readlink linkinfo link unlink exec system escapeshellcmd escapeshellarg passthru shell_exec proc_open proc_close rand srand getrandmax mt_rand mt_srand mt_getrandmax base64_decode base64_encode abs ceil floor round is_finite is_nan is_infinite bindec hexdec octdec decbin decoct dechex base_convert number_format fmod ip2long long2ip getenv putenv getopt microtime gettimeofday getrusage uniqid quoted_printable_decode set_time_limit get_cfg_var magic_quotes_runtime set_magic_quotes_runtime get_magic_quotes_gpc get_magic_quotes_runtime import_request_variables error_log serialize unserialize memory_get_usage var_dump var_export debug_zval_dump print_r highlight_file show_source highlight_string ini_get ini_get_all ini_set ini_alter ini_restore get_include_path set_include_path restore_include_path setcookie header headers_sent connection_aborted connection_status ignore_user_abort parse_ini_file is_uploaded_file move_uploaded_file intval floatval doubleval strval gettype settype is_null is_resource is_bool is_long is_float is_int is_integer is_double is_real is_numeric is_string is_array is_object is_scalar ereg ereg_replace eregi eregi_replace split spliti join sql_regcase dl pclose popen readfile rewind rmdir umask fclose feof fgetc fgets fgetss fread fopen fpassthru ftruncate fstat fseek ftell fflush fwrite fputs mkdir rename copy tempnam tmpfile file file_get_contents file_put_contents stream_select stream_context_create stream_context_set_params stream_context_set_option stream_context_get_options stream_filter_prepend stream_filter_append fgetcsv flock get_meta_tags stream_set_write_buffer set_file_buffer set_socket_blocking stream_set_blocking socket_set_blocking stream_get_meta_data stream_register_wrapper stream_wrapper_register stream_set_timeout socket_set_timeout socket_get_status realpath fnmatch fsockopen pfsockopen pack unpack get_browser crypt opendir closedir chdir getcwd rewinddir readdir dir glob fileatime filectime filegroup fileinode filemtime fileowner fileperms filesize filetype file_exists is_writable is_writeable is_readable is_executable is_file is_dir is_link stat lstat chown touch clearstatcache mail ob_start ob_flush ob_clean ob_end_flush ob_end_clean ob_get_flush ob_get_clean ob_get_length ob_get_level ob_get_status ob_get_contents ob_implicit_flush ob_list_handlers ksort krsort natsort natcasesort asort arsort sort rsort usort uasort uksort shuffle array_walk count end prev next reset current key min max in_array array_search extract compact array_fill range array_multisort array_push array_pop array_shift array_unshift array_splice array_slice array_merge array_merge_recursive array_keys array_values array_count_values array_reverse array_reduce array_pad array_flip array_change_key_case array_rand array_unique array_intersect array_intersect_assoc array_diff array_diff_assoc array_sum array_filter array_map array_chunk array_key_exists array_intersect_key array_combine array_column pos sizeof key_exists assert assert_options version_compare ftok str_rot13 aggregate session_name session_module_name session_save_path session_id session_regenerate_id session_decode session_register session_unregister session_is_registered session_encode session_start session_destroy session_unset session_set_save_handler session_cache_limiter session_cache_expire session_set_cookie_params session_get_cookie_params session_write_close preg_match preg_match_all preg_replace preg_replace_callback preg_split preg_quote preg_grep overload ctype_alnum ctype_alpha ctype_cntrl ctype_digit ctype_lower ctype_graph ctype_print ctype_punct ctype_space ctype_upper ctype_xdigit virtual apache_request_headers apache_note apache_lookup_uri apache_child_terminate apache_setenv apache_response_headers apache_get_version getallheaders mysql_connect mysql_pconnect mysql_close mysql_select_db mysql_create_db mysql_drop_db mysql_query mysql_unbuffered_query mysql_db_query mysql_list_dbs mysql_list_tables mysql_list_fields mysql_list_processes mysql_error mysql_errno mysql_affected_rows mysql_insert_id mysql_result mysql_num_rows mysql_num_fields mysql_fetch_row mysql_fetch_array mysql_fetch_assoc mysql_fetch_object mysql_data_seek mysql_fetch_lengths mysql_fetch_field mysql_field_seek mysql_free_result mysql_field_name mysql_field_table mysql_field_len mysql_field_type mysql_field_flags mysql_escape_string mysql_real_escape_string mysql_stat mysql_thread_id mysql_client_encoding mysql_get_client_info mysql_get_host_info mysql_get_proto_info mysql_get_server_info mysql_info mysql mysql_fieldname mysql_fieldtable mysql_fieldlen mysql_fieldtype mysql_fieldflags mysql_selectdb mysql_createdb mysql_dropdb mysql_freeresult mysql_numfields mysql_numrows mysql_listdbs mysql_listtables mysql_listfields mysql_db_name mysql_dbname mysql_tablename mysql_table_name pg_connect pg_pconnect pg_close pg_connection_status pg_connection_busy pg_connection_reset pg_host pg_dbname pg_port pg_tty pg_options pg_ping pg_query pg_send_query pg_cancel_query pg_fetch_result pg_fetch_row pg_fetch_assoc pg_fetch_array pg_fetch_object pg_fetch_all pg_affected_rows pg_get_result pg_result_seek pg_result_status pg_free_result pg_last_oid pg_num_rows pg_num_fields pg_field_name pg_field_num pg_field_size pg_field_type pg_field_prtlen pg_field_is_null pg_get_notify pg_get_pid pg_result_error pg_last_error pg_last_notice pg_put_line pg_end_copy pg_copy_to pg_copy_from pg_trace pg_untrace pg_lo_create pg_lo_unlink pg_lo_open pg_lo_close pg_lo_read pg_lo_write pg_lo_read_all pg_lo_import pg_lo_export pg_lo_seek pg_lo_tell pg_escape_string pg_escape_bytea pg_unescape_bytea pg_client_encoding pg_set_client_encoding pg_meta_data pg_convert pg_insert pg_update pg_delete pg_select pg_exec pg_getlastoid pg_cmdtuples pg_errormessage pg_numrows pg_numfields pg_fieldname pg_fieldsize pg_fieldtype pg_fieldnum pg_fieldprtlen pg_fieldisnull pg_freeresult pg_result pg_loreadall pg_locreate pg_lounlink pg_loopen pg_loclose pg_loread pg_lowrite pg_loimport pg_loexport http_response_code get_declared_traits getimagesizefromstring socket_import_stream stream_set_chunk_size trait_exists header_register_callback class_uses session_status session_register_shutdown echo print global static exit array empty eval isset unset die include require include_once require_once json_decode json_encode json_last_error json_last_error_msg curl_close curl_copy_handle curl_errno curl_error curl_escape curl_exec curl_file_create curl_getinfo curl_init curl_multi_add_handle curl_multi_close curl_multi_exec curl_multi_getcontent curl_multi_info_read curl_multi_init curl_multi_remove_handle curl_multi_select curl_multi_setopt curl_multi_strerror curl_pause curl_reset curl_setopt_array curl_setopt curl_share_close curl_share_init curl_share_setopt curl_strerror curl_unescape curl_version mysqli_affected_rows mysqli_autocommit mysqli_change_user mysqli_character_set_name mysqli_close mysqli_commit mysqli_connect_errno mysqli_connect_error mysqli_connect mysqli_data_seek mysqli_debug mysqli_dump_debug_info mysqli_errno mysqli_error_list mysqli_error mysqli_fetch_all mysqli_fetch_array mysqli_fetch_assoc mysqli_fetch_field_direct mysqli_fetch_field mysqli_fetch_fields mysqli_fetch_lengths mysqli_fetch_object mysqli_fetch_row mysqli_field_count mysqli_field_seek mysqli_field_tell mysqli_free_result mysqli_get_charset mysqli_get_client_info mysqli_get_client_stats mysqli_get_client_version mysqli_get_connection_stats mysqli_get_host_info mysqli_get_proto_info mysqli_get_server_info mysqli_get_server_version mysqli_info mysqli_init mysqli_insert_id mysqli_kill mysqli_more_results mysqli_multi_query mysqli_next_result mysqli_num_fields mysqli_num_rows mysqli_options mysqli_ping mysqli_prepare mysqli_query mysqli_real_connect mysqli_real_escape_string mysqli_real_query mysqli_reap_async_query mysqli_refresh mysqli_rollback mysqli_select_db mysqli_set_charset mysqli_set_local_infile_default mysqli_set_local_infile_handler mysqli_sqlstate mysqli_ssl_set mysqli_stat mysqli_stmt_init mysqli_store_result mysqli_thread_id mysqli_thread_safe mysqli_use_result mysqli_warning_count";
  e.registerHelper("hintWords", "php", [ o, a, l ].join(" ").split(" ")), e.registerHelper("wordChars", "php", /[\w$]/);
  var s = {
    name: "clike",
    helperType: "php",
    keywords: t(o),
    blockKeywords: t("catch do else elseif for foreach if switch try while finally"),
    defKeywords: t("class function interface namespace trait"),
    atoms: t(a),
    builtin: t(l),
    multiLineStrings: !0,
    hooks: {
      $: function(e) {
        return e.eatWhile(/[\w\$_]/), "variable-2";
      },
      "<": function(e, t) {
        var r;
        if (r = e.match(/<<\s*/)) {
          var i = e.eat(/['"]/);
          e.eatWhile(/[\w\.]/);
          var o = e.current().slice(r[0].length + (i ? 2 : 1));
          if (i && e.eat(i), o) return (t.tokStack || (t.tokStack = [])).push(o, 0), t.tokenize = n(o, "'" != i), 
          "string";
        }
        return !1;
      },
      "#": function(e) {
        for (;!e.eol() && !e.match("?>", !1); ) e.next();
        return "comment";
      },
      "/": function(e) {
        if (e.eat("/")) {
          for (;!e.eol() && !e.match("?>", !1); ) e.next();
          return "comment";
        }
        return !1;
      },
      '"': function(e, t) {
        return (t.tokStack || (t.tokStack = [])).push('"', 0), t.tokenize = n('"'), "string";
      },
      "{": function(e, t) {
        return t.tokStack && t.tokStack.length && t.tokStack[t.tokStack.length - 1]++, !1;
      },
      "}": function(e, t) {
        return t.tokStack && t.tokStack.length > 0 && !--t.tokStack[t.tokStack.length - 1] && (t.tokenize = n(t.tokStack[t.tokStack.length - 2])), 
        !1;
      }
    }
  };
  e.defineMode("php", function(t, r) {
    function n(t, r) {
      var n = r.curMode == o;
      if (t.sol() && r.pending && '"' != r.pending && "'" != r.pending && (r.pending = null), 
      n) return n && null == r.php.tokenize && t.match("?>") ? (r.curMode = i, r.curState = r.html, 
      r.php.context.prev || (r.php = null), "meta") : o.token(t, r.curState);
      if (t.match(/^<\?\w*/)) return r.curMode = o, r.php || (r.php = e.startState(o, i.indent(r.html, "", ""))), 
      r.curState = r.php, "meta";
      if ('"' == r.pending || "'" == r.pending) {
        for (;!t.eol() && t.next() != r.pending; ) ;
        var a = "string";
      } else if (r.pending && t.pos < r.pending.end) {
        t.pos = r.pending.end;
        a = r.pending.style;
      } else a = i.token(t, r.curState);
      r.pending && (r.pending = null);
      var l, s = t.current(), c = s.search(/<\?/);
      return -1 != c && ("string" == a && (l = s.match(/[\'\"]$/)) && !/\?>/.test(s) ? r.pending = l[0] : r.pending = {
        end: t.pos,
        style: a
      }, t.backUp(s.length - c)), a;
    }
    var i = e.getMode(t, r && r.htmlMode || "text/html"), o = e.getMode(t, s);
    return {
      startState: function() {
        var t = e.startState(i), n = r.startOpen ? e.startState(o) : null;
        return {
          html: t,
          php: n,
          curMode: r.startOpen ? o : i,
          curState: r.startOpen ? n : t,
          pending: null
        };
      },
      copyState: function(t) {
        var r, n = t.html, a = e.copyState(i, n), l = t.php, s = l && e.copyState(o, l);
        return r = t.curMode == i ? a : s, {
          html: a,
          php: s,
          curMode: t.curMode,
          curState: r,
          pending: t.pending
        };
      },
      token: n,
      indent: function(e, t, r) {
        return e.curMode != o && /^\s*<\//.test(t) || e.curMode == o && /^\?>/.test(t) ? i.indent(e.html, t, r) : e.curMode.indent(e.curState, t, r);
      },
      blockCommentStart: "/*",
      blockCommentEnd: "*/",
      lineComment: "//",
      innerMode: function(e) {
        return {
          state: e.curState,
          mode: e.curMode
        };
      }
    };
  }, "htmlmixed", "clike"), e.defineMIME("application/x-httpd-php", "php"), e.defineMIME("application/x-httpd-php-open", {
    name: "php",
    startOpen: !0
  }), e.defineMIME("text/x-php", s);
}), function(e) {
  "object" == typeof exports && "object" == typeof module ? e(require("../../lib/codemirror")) : "function" == typeof define && define.amd ? define([ "../../lib/codemirror" ], e) : e(CodeMirror);
}(function(e) {
  "use strict";
  e.defineMode("ruby", function(t) {
    function r(e) {
      for (var t = {}, r = 0, n = e.length; r < n; ++r) t[e[r]] = !0;
      return t;
    }
    function n(e, t, r) {
      return r.tokenize.push(e), e(t, r);
    }
    function i(e, t) {
      if (e.sol() && e.match("=begin") && e.eol()) return t.tokenize.push(u), "comment";
      if (e.eatSpace()) return null;
      var r, i = e.next();
      if ("`" == i || "'" == i || '"' == i) return n(s(i, "string", '"' == i || "`" == i), e, t);
      if ("/" == i) return o(e) ? n(s(i, "string-2", !0), e, t) : "operator";
      if ("%" == i) {
        var a = "string", l = !0;
        e.eat("s") ? a = "atom" : e.eat(/[WQ]/) ? a = "string" : e.eat(/[r]/) ? a = "string-2" : e.eat(/[wxq]/) && (a = "string", 
        l = !1);
        var f = e.eat(/[^\w\s=]/);
        return f ? (m.propertyIsEnumerable(f) && (f = m[f]), n(s(f, a, l, !0), e, t)) : "operator";
      }
      if ("#" == i) return e.skipToEnd(), "comment";
      if ("<" == i && (r = e.match(/^<([-~])[\`\"\']?([a-zA-Z_?]\w*)[\`\"\']?(?:;|$)/))) return n(c(r[2], r[1]), e, t);
      if ("0" == i) return e.eat("x") ? e.eatWhile(/[\da-fA-F]/) : e.eat("b") ? e.eatWhile(/[01]/) : e.eatWhile(/[0-7]/), 
      "number";
      if (/\d/.test(i)) return e.match(/^[\d_]*(?:\.[\d_]+)?(?:[eE][+\-]?[\d_]+)?/), "number";
      if ("?" == i) {
        for (;e.match(/^\\[CM]-/); ) ;
        return e.eat("\\") ? e.eatWhile(/\w/) : e.next(), "string";
      }
      if (":" == i) return e.eat("'") ? n(s("'", "atom", !1), e, t) : e.eat('"') ? n(s('"', "atom", !0), e, t) : e.eat(/[\<\>]/) ? (e.eat(/[\<\>]/), 
      "atom") : e.eat(/[\+\-\*\/\&\|\:\!]/) ? "atom" : e.eat(/[a-zA-Z$@_\xa1-\uffff]/) ? (e.eatWhile(/[\w$\xa1-\uffff]/), 
      e.eat(/[\?\!\=]/), "atom") : "operator";
      if ("@" == i && e.match(/^@?[a-zA-Z_\xa1-\uffff]/)) return e.eat("@"), e.eatWhile(/[\w\xa1-\uffff]/), 
      "variable-2";
      if ("$" == i) return e.eat(/[a-zA-Z_]/) ? e.eatWhile(/[\w]/) : e.eat(/\d/) ? e.eat(/\d/) : e.next(), 
      "variable-3";
      if (/[a-zA-Z_\xa1-\uffff]/.test(i)) return e.eatWhile(/[\w\xa1-\uffff]/), e.eat(/[\?\!]/), 
      e.eat(":") ? "atom" : "ident";
      if ("|" != i || !t.varList && "{" != t.lastTok && "do" != t.lastTok) {
        if (/[\(\)\[\]{}\\;]/.test(i)) return d = i, null;
        if ("-" == i && e.eat(">")) return "arrow";
        if (/[=+\-\/*:\.^%<>~|]/.test(i)) {
          var p = e.eatWhile(/[=+\-\/*:\.^%<>~|]/);
          return "." != i || p || (d = "."), "operator";
        }
        return null;
      }
      return d = "|", null;
    }
    function o(e) {
      for (var t, r = e.pos, n = 0, i = !1, o = !1; null != (t = e.next()); ) if (o) o = !1; else {
        if ("[{(".indexOf(t) > -1) n++; else if ("]})".indexOf(t) > -1) {
          if (--n < 0) break;
        } else if ("/" == t && 0 == n) {
          i = !0;
          break;
        }
        o = "\\" == t;
      }
      return e.backUp(e.pos - r), i;
    }
    function a(e) {
      return e || (e = 1), function(t, r) {
        if ("}" == t.peek()) {
          if (1 == e) return r.tokenize.pop(), r.tokenize[r.tokenize.length - 1](t, r);
          r.tokenize[r.tokenize.length - 1] = a(e - 1);
        } else "{" == t.peek() && (r.tokenize[r.tokenize.length - 1] = a(e + 1));
        return i(t, r);
      };
    }
    function l() {
      var e = !1;
      return function(t, r) {
        return e ? (r.tokenize.pop(), r.tokenize[r.tokenize.length - 1](t, r)) : (e = !0, 
        i(t, r));
      };
    }
    function s(e, t, r, n) {
      return function(i, o) {
        var s, c = !1;
        for ("read-quoted-paused" === o.context.type && (o.context = o.context.prev, i.eat("}")); null != (s = i.next()); ) {
          if (s == e && (n || !c)) {
            o.tokenize.pop();
            break;
          }
          if (r && "#" == s && !c) {
            if (i.eat("{")) {
              "}" == e && (o.context = {
                prev: o.context,
                type: "read-quoted-paused"
              }), o.tokenize.push(a());
              break;
            }
            if (/[@\$]/.test(i.peek())) {
              o.tokenize.push(l());
              break;
            }
          }
          c = !c && "\\" == s;
        }
        return t;
      };
    }
    function c(e, t) {
      return function(r, n) {
        return t && r.eatSpace(), r.match(e) ? n.tokenize.pop() : r.skipToEnd(), "string";
      };
    }
    function u(e, t) {
      return e.sol() && e.match("=end") && e.eol() && t.tokenize.pop(), e.skipToEnd(), 
      "comment";
    }
    var d, f = r([ "alias", "and", "BEGIN", "begin", "break", "case", "class", "def", "defined?", "do", "else", "elsif", "END", "end", "ensure", "false", "for", "if", "in", "module", "next", "not", "or", "redo", "rescue", "retry", "return", "self", "super", "then", "true", "undef", "unless", "until", "when", "while", "yield", "nil", "raise", "throw", "catch", "fail", "loop", "callcc", "caller", "lambda", "proc", "public", "protected", "private", "require", "load", "require_relative", "extend", "autoload", "__END__", "__FILE__", "__LINE__", "__dir__" ]), p = r([ "def", "class", "case", "for", "while", "until", "module", "then", "catch", "loop", "proc", "begin" ]), h = r([ "end", "until" ]), m = {
      "[": "]",
      "{": "}",
      "(": ")"
    }, g = {
      "]": "[",
      "}": "{",
      ")": "("
    };
    return {
      startState: function() {
        return {
          tokenize: [ i ],
          indented: 0,
          context: {
            type: "top",
            indented: -t.indentUnit
          },
          continuedLine: !1,
          lastTok: null,
          varList: !1
        };
      },
      token: function(e, t) {
        d = null, e.sol() && (t.indented = e.indentation());
        var r, n = t.tokenize[t.tokenize.length - 1](e, t), i = d;
        if ("ident" == n) {
          var o = e.current();
          "keyword" == (n = "." == t.lastTok ? "property" : f.propertyIsEnumerable(e.current()) ? "keyword" : /^[A-Z]/.test(o) ? "tag" : "def" == t.lastTok || "class" == t.lastTok || t.varList ? "def" : "variable") && (i = o, 
          p.propertyIsEnumerable(o) ? r = "indent" : h.propertyIsEnumerable(o) ? r = "dedent" : "if" != o && "unless" != o || e.column() != e.indentation() ? "do" == o && t.context.indented < t.indented && (r = "indent") : r = "indent");
        }
        return (d || n && "comment" != n) && (t.lastTok = i), "|" == d && (t.varList = !t.varList), 
        "indent" == r || /[\(\[\{]/.test(d) ? t.context = {
          prev: t.context,
          type: d || n,
          indented: t.indented
        } : ("dedent" == r || /[\)\]\}]/.test(d)) && t.context.prev && (t.context = t.context.prev), 
        e.eol() && (t.continuedLine = "\\" == d || "operator" == n), n;
      },
      indent: function(r, n) {
        if (r.tokenize[r.tokenize.length - 1] != i) return e.Pass;
        var o = n && n.charAt(0), a = r.context, l = a.type == g[o] || "keyword" == a.type && /^(?:end|until|else|elsif|when|rescue)\b/.test(n);
        return a.indented + (l ? 0 : t.indentUnit) + (r.continuedLine ? t.indentUnit : 0);
      },
      electricInput: /^\s*(?:end|rescue|elsif|else|\})$/,
      lineComment: "#",
      fold: "indent"
    };
  }), e.defineMIME("text/x-ruby", "ruby");
}), function(e) {
  "object" == typeof exports && "object" == typeof module ? e(require("../../lib/codemirror")) : "function" == typeof define && define.amd ? define([ "../../lib/codemirror" ], e) : e(CodeMirror);
}(function(e) {
  "use strict";
  var t = {
    autoSelfClosers: {
      area: !0,
      base: !0,
      br: !0,
      col: !0,
      command: !0,
      embed: !0,
      frame: !0,
      hr: !0,
      img: !0,
      input: !0,
      keygen: !0,
      link: !0,
      meta: !0,
      param: !0,
      source: !0,
      track: !0,
      wbr: !0,
      menuitem: !0
    },
    implicitlyClosed: {
      dd: !0,
      li: !0,
      optgroup: !0,
      option: !0,
      p: !0,
      rp: !0,
      rt: !0,
      tbody: !0,
      td: !0,
      tfoot: !0,
      th: !0,
      tr: !0
    },
    contextGrabbers: {
      dd: {
        dd: !0,
        dt: !0
      },
      dt: {
        dd: !0,
        dt: !0
      },
      li: {
        li: !0
      },
      option: {
        option: !0,
        optgroup: !0
      },
      optgroup: {
        optgroup: !0
      },
      p: {
        address: !0,
        article: !0,
        aside: !0,
        blockquote: !0,
        dir: !0,
        div: !0,
        dl: !0,
        fieldset: !0,
        footer: !0,
        form: !0,
        h1: !0,
        h2: !0,
        h3: !0,
        h4: !0,
        h5: !0,
        h6: !0,
        header: !0,
        hgroup: !0,
        hr: !0,
        menu: !0,
        nav: !0,
        ol: !0,
        p: !0,
        pre: !0,
        section: !0,
        table: !0,
        ul: !0
      },
      rp: {
        rp: !0,
        rt: !0
      },
      rt: {
        rp: !0,
        rt: !0
      },
      tbody: {
        tbody: !0,
        tfoot: !0
      },
      td: {
        td: !0,
        th: !0
      },
      tfoot: {
        tbody: !0
      },
      th: {
        td: !0,
        th: !0
      },
      thead: {
        tbody: !0,
        tfoot: !0
      },
      tr: {
        tr: !0
      }
    },
    doNotIndent: {
      pre: !0
    },
    allowUnquoted: !0,
    allowMissing: !0,
    caseFold: !0
  }, r = {
    autoSelfClosers: {},
    implicitlyClosed: {},
    contextGrabbers: {},
    doNotIndent: {},
    allowUnquoted: !1,
    allowMissing: !1,
    allowMissingTagName: !1,
    caseFold: !1
  };
  e.defineMode("xml", function(n, i) {
    function o(e, t) {
      function r(r) {
        return t.tokenize = r, r(e, t);
      }
      var n = e.next();
      return "<" == n ? e.eat("!") ? e.eat("[") ? e.match("CDATA[") ? r(s("atom", "]]>")) : null : e.match("--") ? r(s("comment", "-->")) : e.match("DOCTYPE", !0, !0) ? (e.eatWhile(/[\w\._\-]/), 
      r(c(1))) : null : e.eat("?") ? (e.eatWhile(/[\w\._\-]/), t.tokenize = s("meta", "?>"), 
      "meta") : (k = e.eat("/") ? "closeTag" : "openTag", t.tokenize = a, "tag bracket") : "&" == n ? (e.eat("#") ? e.eat("x") ? e.eatWhile(/[a-fA-F\d]/) && e.eat(";") : e.eatWhile(/[\d]/) && e.eat(";") : e.eatWhile(/[\w\.\-:]/) && e.eat(";")) ? "atom" : "error" : (e.eatWhile(/[^&<]/), 
      null);
    }
    function a(e, t) {
      var r = e.next();
      if (">" == r || "/" == r && e.eat(">")) return t.tokenize = o, k = ">" == r ? "endTag" : "selfcloseTag", 
      "tag bracket";
      if ("=" == r) return k = "equals", null;
      if ("<" == r) {
        t.tokenize = o, t.state = p, t.tagName = t.tagStart = null;
        var n = t.tokenize(e, t);
        return n ? n + " tag error" : "tag error";
      }
      return /[\'\"]/.test(r) ? (t.tokenize = l(r), t.stringStartCol = e.column(), t.tokenize(e, t)) : (e.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/), 
      "word");
    }
    function l(e) {
      var t = function(t, r) {
        for (;!t.eol(); ) if (t.next() == e) {
          r.tokenize = a;
          break;
        }
        return "string";
      };
      return t.isInAttribute = !0, t;
    }
    function s(e, t) {
      return function(r, n) {
        for (;!r.eol(); ) {
          if (r.match(t)) {
            n.tokenize = o;
            break;
          }
          r.next();
        }
        return e;
      };
    }
    function c(e) {
      return function(t, r) {
        for (var n; null != (n = t.next()); ) {
          if ("<" == n) return r.tokenize = c(e + 1), r.tokenize(t, r);
          if (">" == n) {
            if (1 == e) {
              r.tokenize = o;
              break;
            }
            return r.tokenize = c(e - 1), r.tokenize(t, r);
          }
        }
        return "meta";
      };
    }
    function u(e, t, r) {
      this.prev = e.context, this.tagName = t, this.indent = e.indented, this.startOfLine = r, 
      (S.doNotIndent.hasOwnProperty(t) || e.context && e.context.noIndent) && (this.noIndent = !0);
    }
    function d(e) {
      e.context && (e.context = e.context.prev);
    }
    function f(e, t) {
      for (var r; ;) {
        if (!e.context) return;
        if (r = e.context.tagName, !S.contextGrabbers.hasOwnProperty(r) || !S.contextGrabbers[r].hasOwnProperty(t)) return;
        d(e);
      }
    }
    function p(e, t, r) {
      return "openTag" == e ? (r.tagStart = t.column(), h) : "closeTag" == e ? m : p;
    }
    function h(e, t, r) {
      return "word" == e ? (r.tagName = t.current(), _ = "tag", y) : S.allowMissingTagName && "endTag" == e ? (_ = "tag bracket", 
      y(e, t, r)) : (_ = "error", h);
    }
    function m(e, t, r) {
      if ("word" == e) {
        var n = t.current();
        return r.context && r.context.tagName != n && S.implicitlyClosed.hasOwnProperty(r.context.tagName) && d(r), 
        r.context && r.context.tagName == n || !1 === S.matchClosing ? (_ = "tag", g) : (_ = "tag error", 
        v);
      }
      return S.allowMissingTagName && "endTag" == e ? (_ = "tag bracket", g(e, t, r)) : (_ = "error", 
      v);
    }
    function g(e, t, r) {
      return "endTag" != e ? (_ = "error", g) : (d(r), p);
    }
    function v(e, t, r) {
      return _ = "error", g(e, t, r);
    }
    function y(e, t, r) {
      if ("word" == e) return _ = "attribute", b;
      if ("endTag" == e || "selfcloseTag" == e) {
        var n = r.tagName, i = r.tagStart;
        return r.tagName = r.tagStart = null, "selfcloseTag" == e || S.autoSelfClosers.hasOwnProperty(n) ? f(r, n) : (f(r, n), 
        r.context = new u(r, n, i == r.indented)), p;
      }
      return _ = "error", y;
    }
    function b(e, t, r) {
      return "equals" == e ? x : (S.allowMissing || (_ = "error"), y(e, t, r));
    }
    function x(e, t, r) {
      return "string" == e ? w : "word" == e && S.allowUnquoted ? (_ = "string", y) : (_ = "error", 
      y(e, t, r));
    }
    function w(e, t, r) {
      return "string" == e ? w : y(e, t, r);
    }
    var k, _, C = n.indentUnit, S = {}, T = i.htmlMode ? t : r;
    for (var M in T) S[M] = T[M];
    for (var M in i) S[M] = i[M];
    return o.isInText = !0, {
      startState: function(e) {
        var t = {
          tokenize: o,
          state: p,
          indented: e || 0,
          tagName: null,
          tagStart: null,
          context: null
        };
        return null != e && (t.baseIndent = e), t;
      },
      token: function(e, t) {
        if (!t.tagName && e.sol() && (t.indented = e.indentation()), e.eatSpace()) return null;
        k = null;
        var r = t.tokenize(e, t);
        return (r || k) && "comment" != r && (_ = null, t.state = t.state(k || r, e, t), 
        _ && (r = "error" == _ ? r + " error" : _)), r;
      },
      indent: function(t, r, n) {
        var i = t.context;
        if (t.tokenize.isInAttribute) return t.tagStart == t.indented ? t.stringStartCol + 1 : t.indented + C;
        if (i && i.noIndent) return e.Pass;
        if (t.tokenize != a && t.tokenize != o) return n ? n.match(/^(\s*)/)[0].length : 0;
        if (t.tagName) return !1 !== S.multilineTagIndentPastTag ? t.tagStart + t.tagName.length + 2 : t.tagStart + C * (S.multilineTagIndentFactor || 1);
        if (S.alignCDATA && /<!\[CDATA\[/.test(r)) return 0;
        var l = r && /^<(\/)?([\w_:\.-]*)/.exec(r);
        if (l && l[1]) for (;i; ) {
          if (i.tagName == l[2]) {
            i = i.prev;
            break;
          }
          if (!S.implicitlyClosed.hasOwnProperty(i.tagName)) break;
          i = i.prev;
        } else if (l) for (;i; ) {
          var s = S.contextGrabbers[i.tagName];
          if (!s || !s.hasOwnProperty(l[2])) break;
          i = i.prev;
        }
        for (;i && i.prev && !i.startOfLine; ) i = i.prev;
        return i ? i.indent + C : t.baseIndent || 0;
      },
      electricInput: /<\/[\s\w:]+>$/,
      blockCommentStart: "<!--",
      blockCommentEnd: "-->",
      configuration: S.htmlMode ? "html" : "xml",
      helperType: S.htmlMode ? "html" : "xml",
      skipAttribute: function(e) {
        e.state == x && (e.state = y);
      },
      xmlCurrentTag: function(e) {
        return e.tagName ? {
          name: e.tagName,
          close: "closeTag" == e.type
        } : null;
      },
      xmlCurrentContext: function(e) {
        for (var t = [], r = e.context; r; r = r.prev) r.tagName && t.push(r.tagName);
        return t.reverse();
      }
    };
  }), e.defineMIME("text/xml", "xml"), e.defineMIME("application/xml", "xml"), e.mimeModes.hasOwnProperty("text/html") || e.defineMIME("text/html", {
    name: "xml",
    htmlMode: !0
  });
}), function(e) {
  "object" == typeof exports && "object" == typeof module ? e(require("../../lib/codemirror")) : "function" == typeof define && define.amd ? define([ "../../lib/codemirror" ], e) : e(CodeMirror);
}(function(e) {
  "use strict";
  function t(e) {
    return new RegExp("^((" + e.join(")|(") + "))\\b");
  }
  function r(e) {
    return e.scopes[e.scopes.length - 1];
  }
  var n = t([ "and", "or", "not", "is" ]), i = [ "as", "assert", "break", "class", "continue", "def", "del", "elif", "else", "except", "finally", "for", "from", "global", "if", "import", "lambda", "pass", "raise", "return", "try", "while", "with", "yield", "in" ], o = [ "abs", "all", "any", "bin", "bool", "bytearray", "callable", "chr", "classmethod", "compile", "complex", "delattr", "dict", "dir", "divmod", "enumerate", "eval", "filter", "float", "format", "frozenset", "getattr", "globals", "hasattr", "hash", "help", "hex", "id", "input", "int", "isinstance", "issubclass", "iter", "len", "list", "locals", "map", "max", "memoryview", "min", "next", "object", "oct", "open", "ord", "pow", "property", "range", "repr", "reversed", "round", "set", "setattr", "slice", "sorted", "staticmethod", "str", "sum", "super", "tuple", "type", "vars", "zip", "__import__", "NotImplemented", "Ellipsis", "__debug__" ];
  e.registerHelper("hintWords", "python", i.concat(o)), e.defineMode("python", function(a, l) {
    function s(e, t) {
      var n = e.sol() && "\\" != t.lastToken;
      if (n && (t.indent = e.indentation()), n && "py" == r(t).type) {
        var i = r(t).offset;
        if (e.eatSpace()) {
          var o = e.indentation();
          return o > i ? f(t) : o < i && h(e, t) && "#" != e.peek() && (t.errorToken = !0), 
          null;
        }
        var a = c(e, t);
        return i > 0 && h(e, t) && (a += " " + g), a;
      }
      return c(e, t);
    }
    function c(e, t, r) {
      if (e.eatSpace()) return null;
      if (!r && e.match(/^#.*/)) return "comment";
      if (e.match(/^[0-9\.]/, !1)) {
        var i = !1;
        if (e.match(/^[\d_]*\.\d+(e[\+\-]?\d+)?/i) && (i = !0), e.match(/^[\d_]+\.\d*/) && (i = !0), 
        e.match(/^\.\d+/) && (i = !0), i) return e.eat(/J/i), "number";
        var o = !1;
        if (e.match(/^0x[0-9a-f_]+/i) && (o = !0), e.match(/^0b[01_]+/i) && (o = !0), e.match(/^0o[0-7_]+/i) && (o = !0), 
        e.match(/^[1-9][\d_]*(e[\+\-]?[\d_]+)?/) && (e.eat(/J/i), o = !0), e.match(/^0(?![\dx])/i) && (o = !0), 
        o) return e.eat(/L/i), "number";
      }
      if (e.match(S)) return -1 !== e.current().toLowerCase().indexOf("f") ? (t.tokenize = u(e.current(), t.tokenize), 
      t.tokenize(e, t)) : (t.tokenize = d(e.current(), t.tokenize), t.tokenize(e, t));
      for (var a = 0; a < y.length; a++) if (e.match(y[a])) return "operator";
      return e.match(v) ? "punctuation" : "." == t.lastToken && e.match(C) ? "property" : e.match(T) || e.match(n) ? "keyword" : e.match(M) ? "builtin" : e.match(/^(self|cls)\b/) ? "variable-2" : e.match(C) ? "def" == t.lastToken || "class" == t.lastToken ? "def" : "variable" : (e.next(), 
      r ? null : g);
    }
    function u(e, t) {
      function r(e) {
        return function(t, i) {
          var o = c(t, i, !0);
          return "punctuation" == o && ("{" == t.current() ? i.tokenize = r(e + 1) : "}" == t.current() && (i.tokenize = e > 1 ? r(e - 1) : n)), 
          o;
        };
      }
      function n(n, a) {
        for (;!n.eol(); ) if (n.eatWhile(/[^'"\{\}\\]/), n.eat("\\")) {
          if (n.next(), i && n.eol()) return o;
        } else {
          if (n.match(e)) return a.tokenize = t, o;
          if (n.match("{{")) return o;
          if (n.match("{", !1)) return a.tokenize = r(0), n.current() ? o : a.tokenize(n, a);
          if (n.match("}}")) return o;
          if (n.match("}")) return g;
          n.eat(/['"]/);
        }
        if (i) {
          if (l.singleLineStringErrors) return g;
          a.tokenize = t;
        }
        return o;
      }
      for (;"rubf".indexOf(e.charAt(0).toLowerCase()) >= 0; ) e = e.substr(1);
      var i = 1 == e.length, o = "string";
      return n.isString = !0, n;
    }
    function d(e, t) {
      function r(r, o) {
        for (;!r.eol(); ) if (r.eatWhile(/[^'"\\]/), r.eat("\\")) {
          if (r.next(), n && r.eol()) return i;
        } else {
          if (r.match(e)) return o.tokenize = t, i;
          r.eat(/['"]/);
        }
        if (n) {
          if (l.singleLineStringErrors) return g;
          o.tokenize = t;
        }
        return i;
      }
      for (;"rubf".indexOf(e.charAt(0).toLowerCase()) >= 0; ) e = e.substr(1);
      var n = 1 == e.length, i = "string";
      return r.isString = !0, r;
    }
    function f(e) {
      for (;"py" != r(e).type; ) e.scopes.pop();
      e.scopes.push({
        offset: r(e).offset + a.indentUnit,
        type: "py",
        align: null
      });
    }
    function p(e, t, r) {
      var n = e.match(/^([\s\[\{\(]|#.*)*$/, !1) ? null : e.column() + 1;
      t.scopes.push({
        offset: t.indent + x,
        type: r,
        align: n
      });
    }
    function h(e, t) {
      for (var n = e.indentation(); t.scopes.length > 1 && r(t).offset > n; ) {
        if ("py" != r(t).type) return !0;
        t.scopes.pop();
      }
      return r(t).offset != n;
    }
    function m(e, t) {
      e.sol() && (t.beginningOfLine = !0);
      var n = t.tokenize(e, t), i = e.current();
      if (t.beginningOfLine && "@" == i) return e.match(C, !1) ? "meta" : _ ? "operator" : g;
      if (/\S/.test(i) && (t.beginningOfLine = !1), "variable" != n && "builtin" != n || "meta" != t.lastToken || (n = "meta"), 
      "pass" != i && "return" != i || (t.dedent += 1), "lambda" == i && (t.lambda = !0), 
      ":" != i || t.lambda || "py" != r(t).type || f(t), 1 == i.length && !/string|comment/.test(n)) {
        var o = "[({".indexOf(i);
        if (-1 != o && p(e, t, "])}".slice(o, o + 1)), -1 != (o = "])}".indexOf(i))) {
          if (r(t).type != i) return g;
          t.indent = t.scopes.pop().offset - x;
        }
      }
      return t.dedent > 0 && e.eol() && "py" == r(t).type && (t.scopes.length > 1 && t.scopes.pop(), 
      t.dedent -= 1), n;
    }
    for (var g = "error", v = l.delimiters || l.singleDelimiters || /^[\(\)\[\]\{\}@,:`=;\.\\]/, y = [ l.singleOperators, l.doubleOperators, l.doubleDelimiters, l.tripleDelimiters, l.operators || /^([-+*/%\/&|^]=?|[<>=]+|\/\/=?|\*\*=?|!=|[~!@]|\.\.\.)/ ], b = 0; b < y.length; b++) y[b] || y.splice(b--, 1);
    var x = l.hangingIndent || a.indentUnit, w = i, k = o;
    l.extra_keywords != undefined && (w = w.concat(l.extra_keywords)), l.extra_builtins != undefined && (k = k.concat(l.extra_builtins));
    var _ = !(l.version && Number(l.version) < 3);
    if (_) {
      var C = l.identifiers || /^[_A-Za-z\u00A1-\uFFFF][_A-Za-z0-9\u00A1-\uFFFF]*/;
      w = w.concat([ "nonlocal", "False", "True", "None", "async", "await" ]), k = k.concat([ "ascii", "bytes", "exec", "print" ]);
      var S = new RegExp("^(([rbuf]|(br)|(fr))?('{3}|\"{3}|['\"]))", "i");
    } else {
      C = l.identifiers || /^[_A-Za-z][_A-Za-z0-9]*/;
      w = w.concat([ "exec", "print" ]), k = k.concat([ "apply", "basestring", "buffer", "cmp", "coerce", "execfile", "file", "intern", "long", "raw_input", "reduce", "reload", "unichr", "unicode", "xrange", "False", "True", "None" ]);
      S = new RegExp("^(([rubf]|(ur)|(br))?('{3}|\"{3}|['\"]))", "i");
    }
    var T = t(w), M = t(k);
    return {
      startState: function(e) {
        return {
          tokenize: s,
          scopes: [ {
            offset: e || 0,
            type: "py",
            align: null
          } ],
          indent: e || 0,
          lastToken: null,
          lambda: !1,
          dedent: 0
        };
      },
      token: function(e, t) {
        var r = t.errorToken;
        r && (t.errorToken = !1);
        var n = m(e, t);
        return n && "comment" != n && (t.lastToken = "keyword" == n || "punctuation" == n ? e.current() : n), 
        "punctuation" == n && (n = null), e.eol() && t.lambda && (t.lambda = !1), r ? n + " " + g : n;
      },
      indent: function(t, n) {
        if (t.tokenize != s) return t.tokenize.isString ? e.Pass : 0;
        var i = r(t), o = i.type == n.charAt(0);
        return null != i.align ? i.align - (o ? 1 : 0) : i.offset - (o ? x : 0);
      },
      electricInput: /^\s*[\}\]\)]$/,
      closeBrackets: {
        triples: "'\""
      },
      lineComment: "#",
      fold: "indent"
    };
  }), e.defineMIME("text/x-python", "python");
  var a = function(e) {
    return e.split(" ");
  };
  e.defineMIME("text/x-cython", {
    name: "python",
    extra_keywords: a("by cdef cimport cpdef ctypedef enum except extern gil include nogil property public readonly struct union DEF IF ELIF ELSE")
  });
}), function(e) {
  "object" == typeof exports && "object" == typeof module ? e(require("../../lib/codemirror")) : "function" == typeof define && define.amd ? define([ "../../lib/codemirror" ], e) : e(CodeMirror);
}(function(e) {
  "use strict";
  function t(e, t) {
    for (var n = -1, i = 1, o = e.split(r), a = 0; a < o.length; a++) {
      for (var l = 1; l <= o[a].length; l++) i === t && (n = a), i++;
      i++;
    }
    var s = [ "", "" ];
    return 0 === t ? (s[1] = o[0], s[0] = null) : (s[1] = o[n], s[0] = o[n - 1]), s;
  }
  var r = new RegExp([ " ", "\\+", "\\-", "\\(", "\\)", "\\*", "/", ":", "\\?", "\\<", "\\>", " " ].join("|"), "g");
  e.defineMode("swift", function() {
    var e = [ "class", "deinit", "enum", "extension", "func", "import", "init", "let", "protocol", "static", "struct", "subscript", "typealias", "var", "as", "dynamicType", "is", "new", "super", "self", "Self", "Type", "__COLUMN__", "__FILE__", "__FUNCTION__", "__LINE__", "break", "case", "continue", "default", "do", "else", "fallthrough", "if", "in", "for", "return", "switch", "where", "while", "associativity", "didSet", "get", "infix", "inout", "left", "mutating", "none", "nonmutating", "operator", "override", "postfix", "precedence", "prefix", "right", "set", "unowned", "unowned(safe)", "unowned(unsafe)", "weak", "willSet" ], n = [ "Infinity", "NaN", "undefined", "null", "true", "false", "on", "off", "yes", "no", "nil" ], i = [ "0", "1", "2", "3", "4", "5", "6", "7", "8", "9" ], o = [ "+", "-", "/", "*", "%", "=", "|", "&", "<", ">", "[", "]" ], a = [ ";", ",", ".", "(", ")" ], l = /^(?:[()\[\]{},:`=;]|\.\.?\.?)/, s = /^[_A-Za-z$][_A-Za-z$0-9]*/, c = /^(@|this\.)[_A-Za-z$][_A-Za-z$0-9]*/, u = /^(\/{3}|\/)/;
    return {
      startState: function() {
        return {
          prev: !1,
          func: !1,
          op: !1,
          string: !1,
          escape: !1,
          inner: !1,
          comment: !1,
          num_left: 0,
          num_right: 0,
          word: "",
          back: 0,
          back_type: !1
        };
      },
      token: function(d, f) {
        var p;
        if (d.eatSpace()) return null;
        if (p = d.next(), f.string) return f.escape ? (f.escape = !1, "string") : '"' !== p && "'" !== p || f.escape ? "\\" === p && "(" === d.peek() ? (f.inner = !0, 
        f.string = !1, "keyword") : "\\" === p && "(" !== d.peek() ? (f.escape = !0, f.string = !0, 
        "string") : "string" : (f.string = !1, "string");
        if (f.comment) return "*" === p && "/" === d.peek() ? (f.prev = "*", "comment") : "/" === p && "*" === f.prev ? (f.prev = !1, 
        f.comment = !1, "comment") : "comment";
        if ("/" === p) {
          if ("/" === d.peek()) return d.skipToEnd(), "comment";
          if ("*" === d.peek()) return f.comment = !0, "comment";
        }
        if ("(" === p && f.inner) return f.num_left++, null;
        if (")" === p && f.inner) return f.num_right++, f.num_left === f.num_right && (f.inner = !1, 
        f.string = !0), null;
        var h = t(d.string, d.pos), m = h[1], g = h[0];
        if (-1 !== o.indexOf(p + "")) return "operator";
        if (-1 !== a.indexOf(p + "")) return "punctuation";
        if (void 0 !== m) {
          if ("#" === m.charAt(0)) return null;
          if (-1 !== n.indexOf(m)) return "atom";
          if (-1 !== i.indexOf(m)) return "number";
          if ((-1 !== i.indexOf(m.charAt(0) + "") || o.indexOf(m.charAt(0) + "")) && -1 !== i.indexOf(p)) return "number";
          if (-1 !== e.indexOf(m) || -1 !== e.indexOf(m.split(r)[0])) return "keyword";
          if ("@" === m.charAt(0)) return "def";
          if ("var" === g || "let" === g) return "def";
        }
        if ("'" === p || '"' === p) return f.string = !0, "string";
        if ("(" === p && f.inner && f.num_left++, ")" === p && f.inner) return f.num_right++, 
        f.num_left === f.num_right && (f.inner = !1, f.string = !0), null;
        if (d.match(/^-?[0-9\.]/, !1)) {
          var v = !1;
          if (d.match(/^-?\d*\.\d+(e[\+\-]?\d+)?/i) && (v = !0), d.match(/^-?\d+\.\d*/) && (v = !0), 
          d.match(/^-?\.\d+/) && (v = !0), v) return "." == d.peek() && d.backUp(1), "number";
          var y = !1;
          if (d.match(/^-?0x[0-9a-f]+/i) && (y = !0), d.match(/^-?[1-9]\d*(e[\+\-]?\d+)?/) && (y = !0), 
          d.match(/^-?0(?![\dx])/i) && (y = !0), y) return "number";
        }
        if (d.match(u)) {
          if ("/" != d.current() || d.match(/^.*\//, !1)) return "string";
          d.backUp(1);
        }
        return d.match(l) ? "punctuation" : d.match(s) ? "variable" : d.match(c) ? "property" : void 0;
      }
    };
  }), e.defineMIME("text/swift", "swift");
});
//# sourceMappingURL=/assets/maps/code_editor-e366b3c2ca6e94ed11346648fa30985b133cd2de50307cf167784a3fa98d09f0.js.map
